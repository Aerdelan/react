/**
 * hirtc-web v1.0.4.2023121435
 * build date: 2023/12/14
 * @JuHaoKan Hisense
 */

const e=L;!function(e,t){const r=L,o=R();for(;;)try{if(376853===-parseInt(r(1397))/1*(parseInt(r(1168))/2)+-parseInt(r(1258))/3*(parseInt(r(278))/4)+-parseInt(r(708))/5+-parseInt(r(1004))/6+parseInt(r(488))/7+parseInt(r(1050))/8*(parseInt(r(895))/9)+parseInt(r(1359))/10)break;o.push(o.shift())}catch(e){o.push(o.shift())}}();const t=e(1316);function r({url:t="",method:r=e(452),headers:o,params:n,data:i,timeout:s=5e3,withCredentials:a=!1,responseType:c=e(738),contentType:d}){return new Promise(((e,u)=>{const l=L,p={"Content-Type":l(555),Accept:l(1144)};let m=i;const f={...p,...o||{}};d&&(f[l(942)]=d),r=r.toUpperCase();let b=new XMLHttpRequest;function y(){const t=l;if(!b)return;const r=t(611)in b?b[t(611)]():{},o=c&&c!==t(830)&&"json"!==c?b[t(1411)]:b[t(1401)];b[t(180)]>=200&&b[t(180)]<300||304===b[t(180)]?e(c===t(738)&&o?JSON[t(562)](o):o):(b[t(314)]=r,b[t(1121)]=o,u(b)),b=null}if(n&&n instanceof Object&&(t=t+"?"+Object.keys(n)[l(1336)]((e=>e+"="+n[e])).join("&")),b[l(579)](r,t,!0),b[l(372)]=s,l(216)in b?b[l(216)]=y:b[l(620)]=function(){const e=l;b&&4===b[e(1531)]&&(0!==b[e(180)]||b[e(272)]&&0===b[e(272)][e(1248)](e(1380)))&&setTimeout(y)},b.onabort=function(){b&&(u(new Error(l(710),config)),b=null)},b.onerror=function(e){u(new Error("Network Error")),b=null},b[l(160)]=function(){const e=l;let t=s?e(1097)+s+e(383):e(1235);u(new Error(t)),b=null},"setRequestHeader"in b&&Object.keys(f)[l(352)]((e=>{b[l(1422)](e,f[e])})),a&&(b[l(1190)]=!!a),c&&"json"!==c&&(b.responseType=c),!m&&!1!==m&&0!==m&&""!==m&&(m=null),[l(966)][l(1239)](r)&&f[l(942)]===p[l(942)]&&typeof m===l(1075)){let e="";Object[l(1015)](m)[l(352)]((t=>{e+="&"+t+"="+m[t]})),m=e[l(1445)](1)}b[l(633)](m)}))}const o={DOT:e(357),COMMON:e(653),ERR:e(1089)},n=e(801),i=e(515),s=e(766),a=e(1356);let c=!0,d=!1,u=[],l=null;const p=(y=e(1051),{setItem(e,t){const r=L;"object"===typeof t&&(t=JSON.stringify(t)),window[y][r(159)](e,t)},getItem(e,t=!1){const r=L;let o=window[y][r(456)](e);if(t)try{o=JSON[r(562)](o)}catch(e){console[r(1089)](e),o=null}return o},removeItem(e){const t=L;window[y][t(455)](e)}}),m=(t,r,n=o[e(459)])=>{const i=e;return l&&l.serAddress?t({url:b(n,l),method:i(883),sign:!1,data:{json:JSON[i(1064)](r)},timeout:1e3}):Promise.reject(new Error(i(1155)))},f=(t,r)=>{const o=e;t?d=!0:(d=!1,u[o(532)]>0&&(u[o(352)]((e=>{e(r)})),u=[]))},b=(t,r)=>{const n=e;switch(t){case o[n(1234)]:return r[n(519)];case o[n(898)]:return r[n(387)];default:return r[n(1467)]}};let y,v={init:t=>{const r=e,{publicCloud:o}=t;!l&&(l=p[r(456)](s,!0)||null),l&&l[a]!==o&&(p[r(455)](s),l=null),c=o},report:(t,r,o)=>new Promise((b=>{const y=L;d?u.push((e=>{const n=L;e?b():m(t,r,o)[n(1419)](b)[n(1396)](b)})):l?m(t,r,o).then(b)[y(1396)](b):(f(!0),((t,r)=>{const o=e;t({url:c?n:i,method:o(452),timeout:1e3,sign:!1,params:{policySeq:Math[o(826)](Date[o(542)]()/1e3),appKey:1192554437,version:"1.0",reportTag:0,receiveTag:2}})[o(1419)]((e=>{const t=o;e[t(1467)]&&(l=e,l[a]=c,p[t(159)](s,l)),f(!1),r()}))[o(1396)]((e=>{f(!1,e),r(e)}))})(t,(e=>{const n=L;e?b():m(t,r,o)[n(1419)](b)[n(1396)](b)})))})),LOG_TYPE:o};const g=function(){const t=e;let r=new Date;return r[t(148)]()+"/"+(r[t(957)]()+1)+"/"+r[t(207)]()+" "+r[t(1404)]()+":"+r[t(501)]()+":"+r[t(484)]()+"."+r[t(191)]()},h=function(t,r){const o=e;return Math[o(826)](Math[o(230)]()*(r-t+1))+t},S=function(e=10){const t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];let r="";for(let o=0;o<e;o++)r+=t[h(0,61)];return r},w=function(t=0,r=0,o=0,n=1){return 0===o?0:Math[e(826)](n*(t-r)/o)||0},I=function(t=""){const r=e;return t?t[0][r(837)]()+t.substring(1):t},E=function(){},k=function(t,r,o){const n=e,i=Date[n(542)]()+(r[n(334)]||0),s=Math.floor(i/1e3),a=t[n(1096)],c=r.serviceID,d=r[n(1149)];try{return n(783)+n(1499)+a+n(186)+c+",mauth_cnonce="+i+",mauth_timestamp="+s+n(777)+Base64.encode(CryptoJS[n(338)]([s,i,a,n(790)][n(421)](","),d)[n(1214)]())}catch(e){o[n(1241)](n(912)+e)}},D=t=>{const r=e;let o=URL.createObjectURL(t),n=document[r(391)]("a");n[r(1244)]=o,n.download=""+t[r(340)],n[r(158)]=r(371),setTimeout((function(){const e=r;URL.revokeObjectURL(n[e(1244)])}),3e4),setTimeout((function(){n[r(1483)]()}),0)};class T{[e(1451)]=[];[e(929)]=-1;[e(239)]={Info:e(1552),Warn:e(1373),Error:e(1089)};[e(281)]=null;constructor({globalOptions:t}){this[e(281)]=t}[e(745)](t,...r){const o=e;let n=o(1022)+g()+" "+t,i="";if(r[o(352)]((e=>{i=e instanceof Object?i+" "+JSON[o(1064)](e):i+" "+e})),i&&(i=n+" -"+i+"\n",console[t](i),this[o(1451)][o(1129)](i),this[o(1451)][o(532)]>this[o(281)][o(516)]))for(let e=0,t=this[o(281)][o(516)]/10;e<t;e++)this.logContainer[o(1265)](),this[o(929)]--}logInfo(...t){const r=e;this[r(745)](this[r(239)].Info,...t)}logWarn(...t){const r=e;this[r(745)](this.LogLevel[r(457)],...t)}[e(1241)](...t){const r=e;this[r(745)](this.LogLevel[r(1465)],...t)}[e(309)](t,r){const o=e;let n=window.saveAs||D,i=JSON[o(1064)](t),s=JSON[o(1064)](this[o(281)])[o(1272)](this[o(281)].serviceKey,o(1040)),a=g()[o(382)](" ",2);this[o(1451)][o(1129)]("@@@@ write log to file @@@@\ncore="+i+o(508)+s+"\n");let c="hirtc-web@"+a[0]+"@"+a[1][o(382)](".",1)[0]+o(1560),d=new File(this[o(1451)],c,{type:o(1114)});return r&&n(d),d}clear(){const t=e;this[t(1451)]=[],this[t(929)]=-1}}class C{[e(197)]={};[e(1513)]={joined:e(1049),reconnected:e(1034),disconnected:e(1554),kick:e(242),someoneJoined:"someoneJoined",someoneLeft:e(795),published:e(675),publishedEx:e(686),publishedScreenEx:e(549),publishedCustom:e(1390),subscribed:e(430),streamAdded:"streamAdded",streamRemoved:e(1529),streamUpdated:"streamUpdated",infoUpdated:e(343),message:"message",mixerTask:e(157),webpageTask:"webpageTask",videoOption:e(1246),deviceList:"deviceList",deviceChanged:e(367),audioReport:e(1340),videoReport:e(870),audioTest:"audioTest",networkReport:e(145),qosReport:e(676),netWeakChange:e(732),permission:e(934),camera:e(861),cameraEx:"cameraEx",screen:"screen",screenEx:e(1210),custom:e(609),needUserPlay:e(481),audioTrackStopped:e(350),subscribeRecover:e(269),videoFreezeWarn:e(410),error:"error"};maxListener=10;constructor(t){const r=e,{maxListener:o,localLog:n}=t;this[r(965)]=n,o&&this[r(729)](o)}[e(544)](t,r){const o=e;!r instanceof Function?this.localLog.logError(o(361)+t+o(693)):this[o(197)][t]&&this[o(197)][t][o(532)]>=this[o(1070)]?this.localLog[o(1241)](o(1436)+t+o(825)):(this[o(965)][o(574)](o(1230)+t+")"),this[o(197)][t]instanceof Array?-1===this[o(197)][t][o(1248)](r)&&this[o(197)][t][o(1129)](r):this[o(197)][t]=[].concat(r))}removeListener(t,r){const o=e;if(!this.listeners[t]||0===this.listeners[t][o(532)])return void this[o(965)][o(1366)](o(1318)+t+o(873));let n=this[o(197)][t][o(1248)](r);n>=0&&(this.listeners[t].splice(n,1),this[o(965)].logInfo(o(1318)+t+o(1225)))}[e(663)](t){const r=e;this.localLog.logInfo(r(1292)+t+")"),this[r(197)][t]=[]}setMaxListeners(e=10){this.maxListener=e}emit(t){const r=e;if(!t)return;let o=Array[r(750)].slice[r(541)](arguments);if(o.shift(),[r(676),"networkReport","videoReport",r(1340),r(1089)][r(1248)](t)<0&&("message"===t?this[r(965)][r(574)](r(655)+t+r(377)):this.localLog[r(574)](r(655)+t+"]",o)),this[r(197)][t]&&this[r(197)][t][r(532)]>0){const e=[];this[r(197)][t][r(352)]((t=>{e[r(1129)](t)})),e[r(352)]((e=>{e[r(1297)](null,o)}))}}[e(303)](){this[e(197)]={}}}function L(e,t){const r=R();return(L=function(e,t){return r[e-=145]})(e,t)}function R(){const e=["number","add simulcast info to original sdp error,","audioTrack","receiver","nackCount"," mslabel:(.*)\r?\n","push","recordLocalEx","first init ws, retry:","PreviewError","wsHandler","LOG_TYPE","setSimulcastLayerConfig","getDeviceUsingPermission","audioReport(aduioid: ","audioPacketsSent","publish, info should be string","joinBegin","wsUpdateInfo","spanDuration","min","application/json, text/javascript, */*",",document:","retry","roundTripTime","privateID","serviceKey","update","canvasTimer","unsubscribe(publishIDorTag:","muteRemote(subscribeID:","script","No log strategy","target","response code not zero",", ready:","E008","autoDownload","MediaRecorder","wsSubscribe","pliCount","Publish","open ","ice connection state: failed","reviseStreamData","1248500hbsLJK",",muted:","connectionState","getQosDownlinkData","track","setPublishRatio, layer shoud be object","getStreamInfo","videoEnded","previewScreenEx(vodeo.id:",", tag:","core","max","wsHandleUserJoined","open video preview error, ","unpublish error, bad response","PublishError","publish error, bad response","createRtcPeerConn","stopMediaStream","qosLogTimer","captureStream not exit","cameraEx","withCredentials","pause","subscribeAutoRecover","wsHandleUpdateLayer","printLocalEx","role","triggerLogUpload","trackInfo,onunmute:","websocketPingInterval","mixer","users","reconnect","getSettings","selectLayer: no stream","42e01f","getAudioConstraints","[startMixer]","RTCPeerConnection","elementPlay","debug","screenEx","videoCodec","audioDelay","videoBitrate","toString","index",", requestID: ","cameraPreview","ready","getBrowserSupported","createMediaStreamSource","onstop",", err:","onConnectionStateChange ext:","function",") success!","wsHandleRole","streamAudioTest",", local: ","aduioTest","addListener(","unableAutoPlay","SetDeviceError","crossOrigin","DOT","timeout exceeded","streamVideoReport","saveAs","wsHandleStreamRemoved","includes","MixerErr","logError","cityCode","signature","href","totalFreezesDuration","videoOption","init audio context ok","indexOf","getQosUplinkData","previewScreenEx","bytesSent","videoHeight","Live","onIceStateChange","change ","subscribe","lcoalMuteVideo","2109gvXHRC","getLayerBw","set audio element source error, ","Web","reconnectTimeout","wsHandlePublish() code:","camera had been opened already","shift","getElementsByTagName","levelList","joinRoom","match","lastIndexOf","networkReportInterval","replace","sdp","playsInline","inBandWidth","onIceNegotiationNeeded","activeDuration","muteLocalStream","autoplayFix","netWeakMuteVideo","releaseAudioTestProcessor","routineCheckStreamFirstUpload","tempVideoElem","detail:","set autoplay error,invalid dom","[updateMixer]","publishScreenEx before preview","monitor","muteRemote","gapList","wsHandleUpdateInfo","removeAllListener("," cname:(.*)\r?\n","screenEnableVideo","muteAllStreamAudio","checkDeviceList","apply"," mslabel:","encodetime","prepare websocket","set device error","[printLocalEx]","captureStream","wsPrepare"," failed","Role","resume audio fail, session: ","negotiate error, streamID: ","autoplayHack","android","videoFramesDecoded","视频流无接收数据","isChange","getUplinkNetworkReport","AudioContext","1.0.4.2023121435","videoPktsLost","removeListener(","onError","publishCustom, info should be string"," meta data received ","inactiveDuration","url","state",", videoInputID:","self aes decrypt error, ","audioOut","communications","request","subscribe error, bad response","subscribe stream error","`reqest ip info:","recvonly","displaySurface","qosReport(enable:","map","Utf8","ws send updateNetstat, userID:","wrapBaseData","audioReport","sdpAddGroup","askForPermission(audio:","onDeviceChange","userArea","setOption","wsHandleStreamAdded","mozCaptureStream","audio/g722","clone","routineAudioReport","roomName","getUserMedia","onIceStateChange ext:","userToken","screenLayers","_public_cloud_","duplicate inspire stream: ","subscriber error, cannot handle seq id, params: ","17055890dQyigc","wsHandleLayerReqChanged","decodeDelay","stop",", muteVideo:","adr","adaptVideoConstraints","logWarn","pktslost","selectLayer","muteVideo"," label:(.*)\r?\n","remote","Camera","warn","MediaType","video/H264","192.","reject","addTrack","initAudioContext","file:",", status:","SubStreamType","inspiredStream","[recordScreen], open screen error","peerError","unsubscribe-","startNormalBitrateTime","request ip info error","open screen error","publishedCustom","ice conn change to","abs","wsWebPage","requestID","SubscribeIce","catch","1WkrErC","controls","audioinput","candidate-pair","responseText","webpageTask","setSingleLayerConfig","getHours","record error, stream",", re-publish","retry exceed max count:","options","create","askForPermission","response","setPublishLayer type no support","wsMessage","guardian","candidate","wsHandleUnPublish","video/webm;codecs=h264,opus","screen","then","setPublishRatio, layer info error",", UserID:","setRequestHeader","devices","videoBytesSent","layout","room service response error, ","open video input error, ","videoWidth","Video","setSinkId","ipInfoRetryCount","joinRoom with force areaCode:","[WS-GET]","toFixed","[printLocal]","too many listeners, add listeners ","bps","getParameters",",readyState:","releaseAudioProcessor","OPEN","parameter(s) error，check it please","wsRole","streamType","slice","E002",", options: ","publish response code not zero","audioContext"," not support yet","logContainer","vbad","publicIP","framesReceived","getStats","Tracks","subscribeID","const","onIceCandidate","catch an error when apply for stream, ","publishBegin","content","iceConnectionState","Decoded","Error",", streamId:","serAddress","publishEx(tag:","wsHandleStopLive","bad","errtype","turnURL","PublishIce","open media preview error","turnUser","bwtarget","params","Received","wsHandleMixer","unpublishEx(tag:","publish before preview","audiooutput","click","ipAddr","Rtc","findIndex","set session description error, err:","sysAnchor","ParamsError","user play fail: ","onplay","E001"," msid:(.*)\r?\n","streamID","broadcast","initCore","ios","probator",",mauth_userid=","clearnStreamNetData","media-source","kind","tokenId","videoFreezeLog","frames","replace peer connection video track error,","jitterBufferEmittedCount","audioNoRcvdTimes","wsPing","Sent","unpublishEx","getPubIdBySubId","Event","videoBytesReceived"," in subscribing process or subscribed already","Response","web page notify error: ","loadedmetadata","wsHandleStartLive","setSimulcastLayerBitrate","removeTrack","websocket closed: ","logTrackInfo","audioPktsLost","publishEnd","markVideoEnded","getSupportedConstraints","screenshot remote before subscribe","streamRemoved","dType","readyState"," input","lastLocalMuteAudio","PlatformType","wsUpdateRoom","音频无发送数据","websocket open:","onClose","audio/opus","forceArea","negotiate error, drop not found stream ","failCheck","webPage","jitter","muteLocalEx","Join","qosUploadInterval","unsubscribe","getAttribute","videoTrack","E013","info","muteAudio","disconnected","getStreamReport","audioContext add module success","you were in room already","connection error","answerRtcPeerConn",".txt","request ip info success, resp:","width","PreviewAlready","you need to use HTTPS for selecting audio output device: ","getStreamInfoByRequestID","getContext","record remote not found","downlinkStats","publish error,","wsHandlePing","setRemoteDescription",", muteAllStreamAudio: ","inbound-rtp","localMuteVideo","networkReport","auidoInterval","requestIpInfo","getFullYear","bytes","getNetworkMinBw","wsHandleWebPage","and","bind","httpRequest","input","subscribeBegin","mixerTask","rel","setItem","ontimeout","frameHeight","wsHandleUserLeft","end waitStreamTimer","[printRemote]","sdpFmtpLine","errdesc","interval","domain","updateNetWeakStats","unshift","open camera error","routineAudioTestReport","deviceID needed, should be string",".webm","print","bytessent","stuckData","start","cameraPreviewEx","status","remoteCandidate","maxBitrate","leave","wsJoin","restart ice ok, prepare ice negotiation",",mauth_role=presenter,mauth_serviceid=","live","音频流无接收数据","x-google-min-bitrate=","handle preview error","getMilliseconds","video/rtx","request ip info error, ","getCurrentScriptURL","can not find device","UserAction","listeners","reviseStreamDataNormal","wsUnsubscribe","rtt","getDeviceUsingPermission before await navigator.mediaDevices.getUserMedia(constrains:","muted","trackInfo:","current role can not publish","203003","updateSubLayer","getDate",", enable:","local pubid:","cityInfo","wsHandleUnsubscribe","clearRect","视频流解码无输出帧",", audioInputID:","Publisher","onloadend","onconnectionstatechange","videoPktsRcvd","autoFocusScreen","canplay","substring","P000","token","getCore","stream updated, but stream not found, stream=","recorder","can not handle data, ","mediaType","setLocalDescription","random","isWeak","AudioInput",",url:","open screen previewEx error, ","Pause","audioProcessor","change simulcast layer active, ","publishCustom(info:","LogLevel","sampleNum","qosError, errtype: ","kick","AudioOutput","negotiate error, drop not found stream, params: ","mute","ErrorCode","setCodecPreferences","routineStuckLog","statusText","routineVideoReport","wsMixer","failed","NotAllowedError","getDeviceInfo","muteLocal(streamType:","create session description error: ","checkStreamFirstUpload","toggleMute","web socket disconnected","lastRequestID","no need subscribe recover","port","local timestamp=","ms and retry:",", open:","selected","sendonly","getTransceivers","subscribeRecover","muteLocalCustom","print before ready, ","responseURL","publishEx before preview","closed","delUnableAutoPlayElem","screenPreviewEx","averageVideoFps","1076oOXuyf","[stopWebPage]","stuckCount","globalOptions","oniceconnectionstatechange","aoni webcam A30","emitPeerError","StreamRole","both audio and video have been disabled","wsHandleNegotiate() params.type:","hdQualityPriority","set video element source error, ","publicCloud","remote-inbound-rtp","promise","wsHandleNegotiate","concat","subscriber error, cannot handle seq id ","127","ip request: ","getCapabilities","report","cameraLayers","playDuration","unpublishScreenEx(tag:","destroy","m=audio","wsUnPublish","currentScript","packetsSent","screenPreview","logToFile","[recordLocalEx]","ask for permission but devices were not readable","ceil","splice","responseHeaders","wrapUserActionData","wsHandleSubscribe","quality","markPermission","stream","audioPktsSent","boolean","setReceiverCodecPreferences","receive user stream added but user not found","weak","Unknown","hasOwnProperty","disconnect"," msid:","customCanPlay","preview(","getTargetBw",", params:","setDevice(deviceType:","deltaTime","customPreview","cleanStreamData","isWsOpen","HmacSHA1","Start","name","wsHandleMessage","[recordLocal]","infoUpdated","audioRtt","muteRemoteStream","userPlay","no handler for ","unknown","stack","audioTrackStopped","emitNetWeakReport","forEach","publishEx, info should be string","get audio report before preview, no permission","BasicRoomServiceToken","playTime","dot","restart ice error,","Encoded","streamid","bad listener, listener ","negotiate error, bad msg type","packetsReceived","waitStreamTimer","wsLeave","VideoInput","deviceChanged","Joined","tempMuteAudio","update info error","noopener","timeout","app","setCustomProfile: videoElement error","NotReadableError","h264DecodeSupported","] got a msg","ErrorDetail","encodings","codecs","streamAudioReport","split","ms exceeded","firstDataDownloaded","onMessage","room service response error, no token info","excAddress","fps","NotSelectDevice","wsHandleUpdateNetStat","createElement",", uName:",", interval:","SecurityError","subscribeEnd","E007","averageBitrate","Receiver","addVideoEvent","publishScreenEx before join","beginStuckTime","videoSource","network","SUCCESS","seq","audioJitter","maxFramerate","recoverTimeout","find","videoFreezeWarn","screenshot local before preview","Token","preview","[previewCustom] videoElement need, and shoud be HTMLElement","setStreamReport","setDNS(rules:","negotiate error"," or serviceKey:","videoPacketsSent","wsHandleKick","join","LogErrorCode","sleep ","ipInfoMaxRetryCount","publishers","muteLocalEx(tag:","a=ssrc-group:FID ","getChannelData","videoOut","subscribed","audio input","m=video","open camera preview error, ","browser is not support MediaRecorder"," label:","qosHistroyData","isSafari","getReceivers","reason","iceServers","mediatype","Custom","totalVideoFps","LogType","audio",", deviceID:",", StreamIDorTag:","level","add bitrate control error,","data","recordScreen","get","uplinkStats","getAppInfo(streamId:","removeItem","getItem","Warn","SubscribeError","COMMON","enableLogUpload","errcode","oncapturehandlechange","clockRate","videoElem","webpage"," before preview","customLayers","decoderImplementation","record stream","a=ssrc:","cleanVideoEvent","headers","[previewCustom] url error","setParameters","wsInitialize","wsHandleUpdateRoom","frameRate","sdpAddSIM","weakDuration","emitPreviewError","needUserPlay","downloadTime",", area:","getSeconds","ondevicechange","you browser does not support output device selection","onDeviceChangeCallback","4983279FOKrNx","[userPlay]: ","LogErrorType","leaveBeforeUnload","本地无采集输出",", layerIndex:","subscribe-","path","joinRoomEx","availableIncomingBitrate","autoRecovery","lastIntervalTime","resolve","getMinutes","stunURL","bindWindowEvent","sdpAddSimulcast","unpublishCustom","enableProbator","cameraChangePreview","\noptions=","notify","onunmute","checkQosUplinkError","rtc connection change to","wsUpdateNetStat","publish-","https://api-gps-julinker.hisense.com/log/get_js_strategy","logSize","muteLocalCustom(status:","wsHandleNetStatChanged","dotAddress","targetBw","videoFrameWidth","record","subscribe recover:","frameWidth","initTime","audioTest(enable:","resumeAllStreamAudio",", video:","videoFrameHeight","publishID","method","length","tempMuteVideo","supported","can't autoplay ","wsHandleJoin","getDeviceUsingPermission after await navigator.mediaDevices.getUserMedia(constrains)",",enabled:","fetchRangePercentL","toDataURL","call","now","forceAreaCode","addListener","publishScreenEx, info should be string","wsHandleNotifyMixer","Unpublished","request ip info error, retry exceed max count:","publishedScreenEx",", info:","duration","print picture error","muteLocalScreenEx(tag:","a=ssrc-group:SIM","application/x-www-form-urlencoded; charset=utf-8","your browser can not support audio context","muteLocalStreamEx","resetSreenFramerate","userAgent: ","destination","regionCode","parse","capabilities","sdpNormalizer","decode","Subscribe","fulfilled","Leave","wrapStuckData","join(room:","offer:","room response error","checkedStreamFirstUpload","logInfo","update stream info error","muteLocal","stuckDuration","session","open",", id: ","checkVideoPlay",", time: ","routineQosLog","before subscribe","type","updateRoom","framesEncoded","join room error","appKey","cleanTimer","audioContext timeout","[startWebPage]","setElementSinkId","videoPktsSent","streamUpdated","203013",", errcode: ","streamServer","Capturer","wsHandleRoomUpdated","Subscribed","test","reportInfo","request room error","setCustomProfile","setPublishLayer, publish should be single layer","negotiate error, type: error, streamID: ",", re-subscribe","custom","bad response, decryption failure","getAllResponseHeaders","uid","userActionData","can not parse data, ","onmute","addEventListener","audioPktsRcvd","fetchRangePercentH","reconnect stream ","onreadystatechange","stuckLogTimer","wsHandleNegotiate Notify: params:","x5-playsinline","mediaDevices","availableOutgoingBitrate","publish","videoRtt","setOption(options:","token info error: ","init websocket error","request ip info error:","getLayersByStreamInfo","send","setRole:","TypeError","getVideoConstraints","reuse","UserRole","probatorSsrc","stamp","can not stop recording, stream","isInspired","historyReport","[join]: role invalid","selectLayer: layerIndex out of range","replaceTrack","Sender","emit","wsUpdate","removeEventListener","tokenInfo","framesSent","common","AudioWorkletNode","event [","audio test interval error","Audio","serviceID","lastMuteAudio","streams","Services",", requestBody: ","removeAllListener","negotiate error, remote","framesPerSecond","publish respond error, requestID: ","154","closeRtcPeerConn","result","join to session, normal mode","remote pubid:","succeeded","join error,","ondataavailable","published","qosReport","MsgType","wsBaseEvent","stream ","subscribe error,","ended",", muteAudio:","height","time","Play","publishedEx","Date","MixerType","videoJitter","audioLevelLog","sdpAddProbator","publish error, requestID: "," should be a function","emitError","publisher","desc","set same role","startNormalBitrate_time","enabled","callback","unlogTrackInfo","uplink weak","setRole","FpsList","web page respon error: ","pauseAllStreamAudio","outbound-rtp","3343550KlTqXR","offSceenVideo","Request aborted","local","getSenders","setSimulcastLayerEncoding","completed","browser does not support output device selection","setPublishLayer","编码异常","charCodeAt","printLocal","play","fromCharCode","onicecandidate","ispCode","Unsubscribed","peeruserid","before preview","E009","sdk version: ","setMaxListeners","stopMediaTrack","inputBuffer","netWeakChange","undefined","TaskCmd","addModule","AbortError","last","json","event [error]","trackName","video","publish before join","string","commonweb","log","pair","applyConstraints success","userDNS","sdpAddBitrateControl","prototype","inspired stream: ","open screen preview error, ","autoLayout","audioTest","[getDevices]: enableDetail: ","replacePCTrack","Area","jitterBufferDelay","not found","203011","setVideoElementStream","no websocket","unsubscribe error, bad response","userRole","createOffer","HIRTC_WEB_STRATEGY","codec","removeListener","sdpMid","uploadTime",", local publish error,code:","enableDomAutoPlay","bitrateList","applyConstraints fail","sysAudience","browser supported constraints:",",mauth_signature=","pktssent","create session description error, ","src","getAudioTracks","userName","MAuth realm=http://marte3.dit.upm.es,mauth_signature_method=HMAC_SHA1",", detail:","begin recover","updateNetStat","wsHandleStreamUpdated","emitNetworkReport","updateInfo","presenter","active","anonymous","E004","Notify","someoneLeft","connectionState failed ext:","layerindex","join respond error, requestID: ","-streamID-","video-","https://api-gps.hismarttv.com/log/get_js_strategy","recordTest","can not add module to audio worklet,","mediaStuck","onended","ping",", url:","connected","startSpeakTime","layerscount","localMuteAudio","setAudioElementStream","curVideoQuality","print ","onConnectionStateChange","netlevel","cmd","203005","WebSocket","wsHandleUpdate","handleMessage_","wsPublish","trackInfo,oncapturehandlechange:","camera had been preview already"," out of limit","floor","audioElem","firCount","bytesReceived","text","autoplay","host","unpublishEnd","values",", subscribeID:","bwsend","toUpperCase","reconnectingStreams","_hiRtcSDK.getDeviceUsingPermission end","stack error, ","WebPageErr","videoOutList","restartIce","videoinput","ssrc","subType","resetStreamData","selfAESDecrypt","isBindWindowEvent"," play success","createScriptProcessor","reset local description error,","videoNoRcvdTimes","[message] sent a msg to","applyConstraints","getStreamByPubIDorTag","-weak:","StreamType","secure"," error","camera","E000","webRTCSupported","localDescription","video input","wsUpdateLayer","assign","streamNetworkReport","firstDataUploaded","videoReport","set audio output error","startMuteTime",") failed, not function found!","ask for permission error, no valid device,","audioprocess","negotiate error, stream id not found","leaveRoom","audience",", code: ","streamInfo","setDevicePreference","freezeCount","post","groupId","getStreamNetLevel","initBrowserSupported",", msg:","noiseSuppression","remote-candidate","deviceList","publishScreenEx(tag:","setAttribute","replaceStreamTrack","RequestIpInfoErr","9IZwMHo","trackInfo: track is null","unpublishBegin","ERR","detail","a=x-google-flag:conference\r\n","enc","websocket connected,","message","task","signalingState","unsubscribeEnd","setCodecPreferences error:","AllDisabled"," cname:","hidden","record error","sign error, ","chunks","ice connection had been recovered","label","onOpen","data:text/javascript;base64,Y2xhc3MgQXVkaW9MZXZlbFByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7Y29uc3RydWN0b3IoKSB7c3VwZXIoKTt0aGlzLl9sYXN0VXBkYXRlID0gY3VycmVudFRpbWU7fXByb2Nlc3MoaW5wdXRzLCBvdXRwdXRzLCBwYXJhbWV0ZXJzKSB7aWYgKCFpbnB1dHMpIHtyZXR1cm47fWlmIChjdXJyZW50VGltZSAtIHRoaXMuX2xhc3RVcGRhdGUgPj0gMC4xKSB7aWYgKCFpbnB1dHNbMF0gfHwgIWlucHV0c1swXVswXSkge3JldHVybjt9Y29uc3QgYnVmZmVyID0gaW5wdXRzWzBdWzBdO2xldCBtYXggPSBNYXRoLmZsb29yKE1hdGgubWF4LmFwcGx5KE1hdGgsIGJ1ZmZlcikgKiAxMDApO2lmIChtYXggPCAwKSB7bWF4ID0gLW1heDt9dGhpcy5wb3J0LnBvc3RNZXNzYWdlKHthdWRpb0xldmVsOiBtYXh9KTt0aGlzLl9sYXN0VXBkYXRlID0gY3VycmVudFRpbWU7fXJldHVybiB0cnVlO319cmVnaXN0ZXJQcm9jZXNzb3IoJ2F1ZGlvTGV2ZWwnLCBBdWRpb0xldmVsUHJvY2Vzc29yKTs=","getDisplayMedia","wsHandleNotifyWebPage","videoRemoteIn","replace screen track error","peerErrorEvent","media preview audioTrack is not available","videoDelay","substr","videoRemoteInList","targetBitrate","framesDropped","logIndex","audioLevel","videoFps","_hiRtcSDK.getDeviceUsingPermission(audio:","filter","permission","getNetLevel","resetDefaultDevice","record local before preview","Subscriber","screenEnableAudio","Layers","logReport","Content-Type","checkStreamFirstDownload","publish stream error","replaceAll","unpublish",",contentHint:","png","setSenderCodecPreferences","muteStream","totalStuckCount","act","unpublish-","join widthout uName","connect","webkitAudioContext","getMonth","srcObject","auidoTest, levelList:","Invalid serviceID:",", add ice candidate error, ","begin audio test, sampling: ","canvas","audiolevel","localLog","POST",".*\r?\n","countryCode","totalBitrate","DeviceType","timestamp","recordRemote","tag","autoGainControl","[streamUpdated] uid:","replace peer connection audio track error,","interruptionCount","streamInfo.ready:","updateTime","mfsip","cameraExLayers","hirtcwebsdk","reviseStreamDataRejoining","framesDecoded","wsNegotiate","netWeakStats","StreamTrack","videoFPS","audioNoSentTimes","unsubscribe, stream not found","turnPwd","audioRemoteIn","VideoError","mimeType","JoinError","cameraEnableAudio","systemMuteVideo","ConnectionError",",layers:","[printLocalScreenEx]","wrapErrorData","get device list error, ","optimizeDeviceList","3905568JqHNNg","video/h264","https://bas-web.hismarttv.com/1.0/bas/ip/info","restartRtcPeerConn","currentRoundTripTime","recorders",", sdp:","answer","close","sdp add probator error","enableQosReport","keys","printLocalScreenEx","anchor","sender","rejected","203007","ontrack","[websdk] ","open camera before select device","offer","negotiate","share","enableInspire","Track","startLowBitrateTime","msg","a=fmtp:[a-z0-9 -=]*packetization-mode=1;","wsHandleInfoUpdated","canvasInterval","reconnected","joinEnd","publish error, cannot handle seq id ","recordLocal","user rejected the permission application","no audio track, cant set framerate","***","eventBus","media preview videotrack is not available","getTracks","getQosData","audioSource","default","not started recording, ","setCustomProfile(videoEle:","joined","738896hraQPq","sessionStorage","statement","publishEx","#audio","layerIndex","startMixer","toLowerCase","add bitrate control error, no minBitrate","Published","application/json","websocket error,","uninspire stream: ","E003","stringify","deviceId","routineNetworkReport","targetLayerIndex","getDownlinkNetworkReport","drawImage","maxListener","code","userAgent","totalInterruptionDuration","previewEx","object","recordLocalScreenEx","wsHandlePublish","getDeviceList","publisher not found","totalStuckDuration","addTransceiver"," http request:",", levelList:","subscriber error, code not zero, params: ","videoNoSentTimes","room response error, no token","join to session, rejoin mode","someoneJoined","error","203001","Screen","Media","dns","PrintError","all","userID","timeout of ","muteLocalScreenEx","reconnectStream","checkQosDownlinkError","outBandWidth","E011","checkRequirement","RecordError","subscribe(","payloadType","layers",", uid:","allSettled",",kind:","setCore","group","diff=","text/plain;charset=utf-8","wsSender","videoFPSSent","negotiate notify failed, streamInfo.id:","E010","packetsLost","getVideoTracks","resopnse","continueSpeakTime"];return(R=function(){return e})()}const P=navigator.userAgent[e(1057)](),x=!!P[e(1269)](/\(i[^;]+;( U;)? CPU.+Mac OS X/i),A=(()=>{const t=e,r=P[t(1269)](/cpu iphone os (.*?) like mac os/);return r&&typeof r[1]===t(743)?r[1][t(945)]?r[1].replaceAll("_","."):(r[1]=r[1][t(1272)]("_","."),r[1][t(1272)]("_",".")):null})(),O=/safari/.test(P)&&!/chrome/[e(602)](P);let M={ios:x,iosVer:A,android:P[e(1248)](e(1310))>-1||P[e(1248)](e(1364))>-1,androidVer:P[e(1269)](/android (.*?);/),isSafari:O};function N(){const o=e;let n={publicCloud:!0,debug:!1,logSize:2e3,deltaTime:0,serviceID:"",serviceKey:"",forceArea:!1,autoPublishCamera:!1,cameraEnableVideo:!0,cameraEnableAudio:!0,muteCameraVideo:!1,muteCameraAudio:!1,autoPublishScreen:!1,screenEnableVideo:!0,screenEnableAudio:!1,muteScreenVideo:!1,muteScreenAudio:!1,autoSubscribe:!1,autoRecovery:!0,enableQosReport:!1,enableLogUpload:!0,Services:{BasicRoomServiceToken:"https://brs-hirtc.hismarttv.com/v1/auth/token",IpInfoService:e(1006)},requestTimeout:5e3,websocketPingInterval:1e3,qosUploadInterval:5e3,stuckLogInterval:600,networkReportInterval:5e3,cameraLayers:[{width:320,height:180,frameRate:20,targetBw:16e4,layerIndex:0},{width:640,height:360,frameRate:20,targetBw:5e5,layerIndex:1},{width:1280,height:720,frameRate:20,targetBw:11e5,layerIndex:2}],cameraExLayers:[{width:320,height:180,frameRate:20,targetBw:16e4,layerIndex:0},{width:1280,height:720,frameRate:20,targetBw:11e5,layerIndex:1}],screenLayers:[{width:1920,height:1080,frameRate:15,targetBw:15e5,layerIndex:0}],customLayers:[{width:1920,height:1080,frameRate:15,targetBw:15e5,layerIndex:0}],maxListener:10,supported:{},publicIP:"",ispCode:"",countryCode:"",regionCode:"",cityCode:"",hdQualityPriority:!1,enableProbator:!1,leaveBeforeUnload:!0,audioLevelLog:!0,peerErrorEvent:!1,subscribeAutoRecover:!1,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,videoFreezeLog:!1,autoplayFix:!1},i=new T({globalOptions:n}),s=new C({localLog:i}),a=window[o(1237)],c=window[o(1315)]||window[o(956)]||null,d=window[o(1161)]||null,u=window[o(654)]||null,l={};l[o(1041)]=s,l[o(965)]=i,l[o(1408)]=n,l[o(1178)]={retry:0,status:0,roomName:"",userID:"",userName:"",userArea:"",userToken:0,session:"",stunURL:"",turnURL:"",turnUser:"",turnPwd:"",publicIP:"",ispCode:"",countryCode:"",regionCode:"",cityCode:"",userRole:0,ipInfoMaxRetryCount:3,ipInfoRetryCount:0,permission:{audio:!1,video:!1},camera:{local:!0,type:o(861),preview:!1,muteAudio:!1,muteVideo:!1,ready:!1,id:null,pc:null,candidate:[],stream:new MediaStream,audioTrack:null,videoTrack:null,lastRequestID:"",info:{app:"",rtc:"",act:0}},cameraEx:{},screen:{local:!0,type:o(1418),preview:!1,muteAudio:!1,muteVideo:!1,ready:!1,id:null,pc:null,candidate:[],stream:new MediaStream,audioTrack:null,videoTrack:null,lastRequestID:"",info:{app:"",rtc:"",act:0},subType:o(1418)},custom:{local:!0,type:o(1418),preview:!1,muteAudio:!1,muteVideo:!1,ready:!1,id:null,pc:null,candidate:[],stream:null,audioTrack:null,videoTrack:null,lastRequestID:"",info:{app:"",rtc:"",act:0},subType:o(609),label:"media playback"},audioTest:{local:!0,type:o(1229),sampling:200,stream:null,audioLevel:0,levelList:[]},users:{},publishers:{},devices:{audioinput:"",audiooutput:"",videoinput:"",detail:{audioinput:[],audiooutput:[],videoinput:[]},lastVideoinput:""},unableAutoPlay:[],reconnectingStreams:{},network:{const:{rttMin:50,rttMax:200,fractionLostMin:5,fractionLostMax:10,delayMin:80,delayMax:300,jitterMin:80,jitterMax:400,kMinVideoBitrate:6e4,kMinVideoBitrate2:3e5,kMinVideoFrameRate:2,kMaxExpiredNetLevelStatInMs:1e4,kScreencastStreamBWJitterRatio:.4,kNetUpWeakBitrate:6e4,kNetDownWeakLevel:1,kNetDownWeakFps:5,networkQuality:{unknown:0,vbad:1,bad:2,poor:3,good:4,excellent:5}},uplinkStats:{},downlinkStats:{},netWeakStats:{}},wsBaseEvent:{onOpen:null,onClose:null,onMessage:null,onError:null},dType:10,curVideoQuality:2,userActionData:{},stuckData:{},probatorSsrc:1234,isBindWindowEvent:!1,muteAllStreamAudio:!1,peerErrorEvent:{}},l[o(1093)]={},l[o(1496)]=function(){const e=o;l[e(1178)][e(180)]=0,l[e(1178)][e(1354)]=0,l[e(1178)][e(578)]="",l[e(1178)][e(813)]=2,Object[e(834)](l[e(858)]).forEach((t=>{const r=e;l[r(1178)][t].id="",l[r(1178)][t].pc=null,l.core[t][r(1415)]=[],l[r(1178)][t].ready=!1,l[r(1178)][t][r(260)]="",l.core[t].muteAudio=!1,l[r(1178)][t].muteVideo=!1,l[r(1178)][t][r(1055)]=-1})),l[e(1178)].cameraEx={},l[e(1178)][e(1231)]=[],l[e(1178)][e(1200)]={},l[e(1178)][e(425)]={},l[e(1178)][e(613)]={},l[e(1178)].network[e(453)]={},l[e(1178)][e(403)][e(1568)]={},l[e(1178)][e(403)][e(986)]={}},l.setCore=function(e={}){const t=o;!e instanceof Object||Object[t(1015)](e)[t(352)]((r=>{const o=t;l[o(1178)][o(326)](r)&&(l[o(1178)][r]=e[r])}))},l[o(224)]=function(e=""){const t=o;if(e&&l.core.hasOwnProperty(e))return l[t(1178)][e]},l[o(886)]=function(){const e=o;if(navigator[e(624)]&&(!l[e(1408)][e(534)]||0===Object[e(1015)](l.options[e(534)])[e(532)])){let t=navigator.mediaDevices[e(1527)]();t&&Object[e(1015)](t)[e(532)]>0&&(i[e(574)](e(776),t),l.options[e(534)]=t)}},l[o(1219)]=function(e=""){const t=o;return e&&l[t(1408)].supported&&l[t(1408)][t(534)][e]||!1},l[o(503)]=function(){const e=o;n[e(491)]&&!l[e(1178)][e(849)]&&(window[e(616)]("unload",(()=>{l[e(877)]()})),l[e(1178)][e(849)]=!0)},l[o(1345)]=function(e={}){const n=o;e.serviceID&&(i[n(574)](n(728)+t),i.logInfo(n(559)+navigator[n(1072)])),l.initBrowserSupported(),!e instanceof Object||(null!==typeof e.debug&&e.debug&&i[n(574)](n(628)+JSON[n(1064)](e)+")"),Object.keys(e)[n(352)]((t=>{const r=n;r(658)!==t&&r(1149)!=t&&(typeof e[t]===r(1075)?i[r(574)](t+":"+JSON.stringify(e[t])):i[r(574)](t+":"+e[t])),l[r(1408)].hasOwnProperty(t)&&(t==r(661)?Object[r(1015)](e[t])[r(352)]((o=>{const n=r;l.options[t].hasOwnProperty(o)&&(l[n(1408)][t][o]=e[t][o])})):l[r(1408)][t]=e[t])})),(""==l[n(1408)][n(658)]||""==l[n(1408)].serviceKey)&&i[n(1241)](n(960)+l.options[n(658)]+n(418)+l.options[n(1149)]),v.init({publicCloud:l[n(1408)][n(290)]},r),l[n(503)]())},l[o(748)]=function(e=""){const t=o;if(!e)return"";let r=Object[t(1015)](l[t(1093)])||[];for(let o=0,n=r.length;o<n;o++){let n=r[o];if(e[t(1248)](n)>=0){let r=l[t(1093)][n];e.replaceAll?e=e[t(945)](n,r):e=(e=e[t(1272)](n,r))[t(1272)](n,r);break}}return e},l[o(154)]=function(e=o(883),t="",n={},s={},a=E,c=E){const d=o,u={method:e,url:l.userDNS(t),timeout:l[d(1408)].requestTimeout,contentType:d(1060)};s instanceof Object&&Object[d(1015)](s)[d(532)]>0&&(u.headers=s),e===d(452)?u[d(1477)]=n:u.data=JSON[d(1064)](n),r(u)[d(1419)]((e=>{a(e)})).catch((e=>{c(e)})),i[d(574)](e+d(1082)+JSON.stringify(u))},l.Area={Unknown:"0",BeiJing:"1",ShangHai:"2",GuangZhou:"3"},l[o(858)]={Camera:o(861),Screen:o(1418)},l[o(1382)]={Camera:o(861),Screen:o(1418),Custom:"custom"},l[o(285)]={Publisher:o(695),Subscriber:"subscriber"},l[o(677)]={Request:o(1329),Response:"response",Notify:o(509)},l[o(987)]={Audio:o(445),Video:"video"},l[o(970)]={AudioInput:o(1399),VideoInput:o(844),AudioOutput:o(1482)},l[o(1374)]={Audio:o(445),Video:o(741),Screen:o(1418)},l[o(688)]={Live:1,Record:2},l.TaskCmd={Start:o(178),Stop:o(1362),Pause:o(1191),Play:o(720),Update:"update"},l.ErrorCode={PermissionError:o(222),ParamsError:o(862),JoinError:o(1492),PreviewError:o(1446),PublishError:o(1063),SubscribeError:o(793),ConnectionError:"E005",SetDeviceError:"E006",RecordError:o(396),PrintError:o(1159),UpdateInfoErr:o(727),MixerErr:o(1118),WebPageErr:o(1102),RequestIpInfoErr:"E012",SetRoleError:o(1551)},l[o(378)]={P000:"get permission error",E000:o(1442),E001:o(588),E002:o(190),E003:o(944),E004:o(1331),E005:o(1558),E006:o(1301),E007:o(911),E008:o(552),E009:o(575),E010:"mixer task error",E011:"web page task error",E012:o(1388),E013:"role not in same group"},l[o(638)]={anchor:0,audience:1,sysAnchor:2,sysAudience:3},l[o(1534)]={AndroidTv:1,AndroidPhone:2,WinPc:3,Iphone:4,Mac:5,Ipad:6,AndroidPad:7,WinTv:8,TinyApp:9,Web:10},l[o(694)]=function(e="",t=""){const r=o;if(e){let o={desc:""};l[r(378)][e]&&(o[r(696)]=l[r(378)][e]),typeof t===r(743)?t&&(o[r(696)]=o[r(696)]+", "+t):(t[r(696)]&&(t[r(696)]=o[r(696)]+", "+t[r(696)]),o={...t}),i.logError(r(739),e,JSON[r(1064)](o)),s[r(648)](s.Event[r(1089)],e,o)}},l[o(480)]=function(e){const t=o,{type:r,desc:n,subType:i,error:s}=e;let a=0;switch(s[t(340)]){case t(736):a=2001;break;case t(253):a=2002;break;case"NotFoundError":a=2003;break;case t(375):a=2004;break;case"OverconstrainedError":a=2005;break;case t(394):a=2006;break;case t(635):a=2007;break;case t(1563):a=2008;break;case t(908):a=2009;break;case"NotSelectDevice":a=2010;break;case t(993):a=2011}l.emitError(l[t(246)][t(1132)],{type:r,desc:n,subType:i,code:a})},l[o(444)]={Error:o(760),QosEvent:o(1090),UserAction:o(596),mediaStuck:o(818),CustomLog:"customLog"},l.UserAction={Joined:1,Leave:2,Published:3,Unpublished:4,Subscribed:5,Unsubscribed:6,firstDataUploaded:7,firstDataDownloaded:8,toggleMute:9},l[o(436)]={},l[o(490)]={Audio:1,Video:2,Rtc:3},l[o(422)]={Media:{Capturer:1,Encoder:2,Sender:3,Receiver:4,Rtpdemux:5,Decoder:6,Render:7},Rtc:{Token:1,Join:2,Publish:3,Subscribe:4,PublishIce:5,SubscribeIce:6,UplinkWeak:7}},l.triggerLogUpload=function(e,t={}){const r=o;if(l[r(1408)][r(460)])switch(e){case l[r(444)].QosEvent:l.getQosData()[r(1419)]((e=>{const t=r;e.log.length>0&&l[t(941)](e.log,v[t(1134)][t(459)]),l[t(1408)][t(1014)]&&e[t(299)][t(532)]>0&&s[t(648)](s[t(1513)].qosReport,e.report)}));break;case l.LogType.UserAction:const o=l.wrapUserActionData(e,t);l[r(941)](o,v.LOG_TYPE[r(459)]);break;case l[r(444)][r(804)]:const n=l[r(569)](t);l.logReport(n,v[r(1134)][r(459)]);break;case l[r(444)].Error:const i=l[r(1001)](e,t);l.logReport(i,v.LOG_TYPE[r(459)])}},l[o(1171)]=function({streamInfo:e,pair:t,video:r,audio:n,videoCodec:i,audioCodec:s,remoteCandidate:a}){const c=o,d={log:[],report:[]},u=n&&!(e[c(1553)]||e.localMuteAudio),p=r&&!(e[c(1369)]||e[c(1257)]);if(!t)return d;const m={...l[c(1339)]({eventCode:c(205),streamInfo:e}),userid:l[c(1178)][c(1096)],roomid:l.core[c(1351)],serviceid:l.options[c(658)],username:l[c(1178)][c(782)],streamid:e.id,layerindex:e[c(1055)],peeruserid:e.uid,mediatype:-1,codec:-1,ssrc:-1,mute:-1,jitter:-1,pktslost:-1,width:-1,height:-1,fps:-1,pli:-1,fir:-1,cpu:-1,memory:-1,netmode:-1,bwtransmit:-1,bwretransmit:-1,nack:-1,audiolevel:-1,bwrecv:-1,bytesrcvd:-1,pktsrcvd:-1,fpsout:-1,remb:-1,delay:-1,framesdropped:-1,netlevel:-1,weak:-1,codecname:-1};if(a&&(e[c(980)]=a.ip+":"+a[c(262)]),u){const r=l[c(436)][n[c(845)]]?l[c(436)][n.ssrc][c(445)]:{packetsLost:0},o={...m,mediatype:l[c(1374)][c(657)],ssrc:n.ssrc,bwrecv:t[c(497)],codec:s?""+s[c(994)][c(382)]("/")[1]:-1,bytesrcvd:n[c(829)],pktsrcvd:n[c(363)],pktslost:n[c(1119)]-r[c(1119)],delay:1e3*t[c(1008)]+(n[c(1507)]?n.jitterBufferDelay/n.jitterBufferEmittedCount*1e3:0),jitter:1e3*n[c(1544)],audiolevel:n[c(930)],mute:e[c(1553)]||e[c(811)]?1:0,weak:0,netlevel:5};d.log[c(1129)](o)}if(p){const o=l[c(436)][r[c(845)]]?l[c(436)][r[c(845)]][c(741)]:{packetsLost:0,firCount:0,pliCount:0,nackCount:0,framesDropped:0},n={...m,mediatype:e[c(585)]===l.StreamType.Screen?l[c(1374)][c(1091)]:l[c(1374)][c(1429)],ssrc:r[c(845)],bwrecv:t[c(497)],codec:i?""+i.mimeType.split("/")[1]:-1,bytesrcvd:r[c(829)],pktsrcvd:r[c(363)],pktslost:r.packetsLost-o.packetsLost,width:r.frameWidth,height:r[c(161)],fps:r[c(665)],fir:r.firCount-o[c(828)],pli:r[c(1163)]-o[c(1163)],nack:r[c(1127)]-o[c(1127)],delay:1e3*t[c(1008)]+(r.jitterBufferEmittedCount?r.jitterBufferDelay/r[c(1507)]*1e3:0),jitter:1e3*r[c(1544)],mute:e[c(1369)]||e[c(1574)]?1:0,framesdropped:r[c(928)]-o[c(928)],weak:0,netlevel:5},s=l[c(1178)].network[c(1568)][e.id],a=l[c(1178)][c(403)][c(986)][e.id];s&&(n[c(816)]=l[c(885)](e.id,!1),n[c(324)]=a&&a[c(231)]?1:0),d.log[c(1129)](n)}const f={publishID:e[c(530)],subscribeID:e.id,audio:null,video:null};if(u){const e=l.qosHistroyData[n[c(845)]];f[c(445)]={bps:e&&e.audio?Math.floor((n[c(829)]-e[c(445)][c(829)])/(n.timestamp-e[c(445)][c(971)])*1e3):0,audiolevel:Math[c(826)](100*n.audioLevel),codec:s?s.mimeType[c(382)]("/")[1]+"/"+s[c(463)]+" ("+s[c(1106)]+", "+s[c(165)]+")":"",pktslost:n[c(1119)]},l[c(436)][n[c(845)]]={audio:n}}if(p){const o=l.qosHistroyData[r[c(845)]];f.video={width:r.frameWidth,height:r.frameHeight,bps:o&&o[c(741)]?Math[c(826)]((r.bytesReceived-o[c(741)][c(829)])/(r[c(971)]-o[c(741)][c(971)])*1e3):0,fps:r[c(665)],codec:i?i[c(994)].split("/")[1]+"/"+i.clockRate+" ("+i[c(1106)]+", "+i[c(165)]+")":-1,layerindex:e[c(1055)],ssrc:r[c(845)],delay:o&&o[c(741)]?Math[c(826)]((r[c(758)]-o[c(741)][c(758)])/(r.jitterBufferEmittedCount-o[c(741)][c(1507)])*1e3):0,jitter:r[c(1544)],pktslost:r[c(1119)],nack:r[c(1127)],mfsip:a?a.ip+":"+a[c(262)]:"",pli:r[c(1163)],fir:r[c(828)],bwrecv:t[c(497)]},l[c(436)][r[c(845)]]={video:r}}return(f.audio||f[c(741)])&&d[c(299)].push(f),l[c(1100)]({streamInfo:e,pair:t,audioEnable:u,videoEnable:p,audio:n,video:r}),d},l[o(1249)]=function({streamInfo:e,pair:t,videoOutList:r,audioOut:n,videoRemoteInList:i,audioRemoteIn:s,audioSource:a,videoSource:c,videoCodec:d,audioCodec:u,remoteCandidate:p}){const m=o,f={log:[],report:[]},b=(s||n||a)&&!(e[m(1553)]||e.systemMuteAudio),y=r[m(532)]>0&&!(e.muteVideo||e[m(997)]);if(!t)return f;const v={...l[m(1339)]({eventCode:m(1090),streamInfo:e}),userid:l[m(1178)].userID,roomid:l[m(1178)].roomName,username:l[m(1178)][m(782)],serviceid:l.options[m(658)],streamid:e.id,layerindex:e[m(1055)],mediatype:-1,codec:-1,ssrc:-1,mute:-1,rtt:-1,pktslost:-1,width:-1,height:-1,fps:-1,pli:-1,fir:-1,cpu:-1,memory:-1,netmode:-1,bwsend:-1,bwtransmit:-1,bwretransmit:-1,bwtarget:-1,bwactual:-1,bytessent:-1,pktssent:-1,fpscap:-1,nack:-1,encodetime:-1,audiolevel:-1,remb:-1,restecho:-1,restechomax:-1,innoise:-1,outnoise:-1,reqlayerindex:-1,netlevel:-1,weak:-1,codecname:-1};if(p&&(e.mfsip=p.ip+":"+p[m(262)]),b){const t=l[m(436)][n[m(845)]],r=t?t.audioOut:{nackCount:0},o=t&&t[m(992)]?t[m(992)]:{packetsLost:0},i={...v,mediatype:l[m(1374)].Audio,mute:e[m(1553)]?1:0,reqlayerindex:e[m(1055)],netlevel:5,weak:0};a&&(i[m(964)]=a.audioLevel),n&&(i[m(845)]=n[m(845)],i[m(176)]=n.bytesSent,i[m(778)]=n[m(307)],i[m(1476)]=n[m(927)],i.nack=n[m(1127)]-r[m(1127)]),s&&(i[m(845)]=s[m(845)],i[m(836)]=s[m(625)],i[m(1367)]=s[m(1119)]-o[m(1119)],s.roundTripTime&&(i[m(200)]=1e3*s[m(1147)])),u&&(i[m(767)]=""+u[m(994)][m(382)]("/")[1]),f[m(745)].push(i)}y&&r[m(352)](((r,o)=>{const n=m,s=i[n(409)]((e=>e[n(845)]===r.ssrc));if(s&&e[n(1055)]>=o){const i=l.qosHistroyData[r[n(845)]],a=i?i.videoOut:{firCount:0,pliCount:0,nackCount:0},u=i?i[n(920)]:{packetsLost:0},p={...v,layerindex:o,mediatype:e[n(585)]===l[n(858)][n(1091)]?l[n(1374)][n(1091)]:l[n(1374)][n(1429)],mute:e[n(1369)]?1:0,bwtarget:t[n(625)],bwsend:t[n(625)],fpscap:c[n(665)],ssrc:r[n(845)],width:r[n(524)],height:r[n(161)],bytessent:r.bytesSent,pktssent:r[n(307)],fps:r[n(665)],fir:r.firCount-a[n(828)],pli:r.pliCount-a[n(1163)],nack:r[n(1127)]-a[n(1127)],pktslost:s[n(1119)]-u[n(1119)],rtt:1e3*s.roundTripTime,reqlayerindex:e.layerIndex};i&&(p[n(1299)]=(r[n(587)]-i.videoOut[n(587)])/(r[n(971)]-i[n(429)][n(971)]));const m=l[n(1178)][n(403)][n(453)][e.id],b=l[n(1178)][n(403)][n(986)][e.id];m&&(p.netlevel=l[n(885)](e.id,!0),p[n(324)]=b&&b[n(231)]?1:0),d&&(p[n(767)]=""+d[n(994)][n(382)]("/")[1]),l[n(436)][p[n(845)]]={videoOut:r,videoRemoteIn:s,videoSource:c},f.log[n(1129)](p)}}));const g={publishID:e.id,audio:null,video:null};if(b){const e={bps:void 0,audiolevel:void 0,codec:void 0,pktslost:void 0};if(a&&(e[m(964)]=Math[m(826)](100*a[m(930)])),n){const t=l[m(436)][n[m(845)]];!t&&(l[m(436)][n[m(845)]]={}),e[m(1437)]=t&&t[m(1327)]?Math.floor((n[m(1251)]-t.audioOut[m(1251)])/(n[m(971)]-t[m(1327)][m(971)])*1e3):0,l[m(436)][n[m(845)]][m(1327)]=n}s&&(e[m(1367)]=s.packetsLost,l[m(436)][n[m(845)]].audioRemoteIn=s),u&&(e[m(767)]=u[m(994)][m(382)]("/")[1]+"/"+u.clockRate+" ("+u[m(1106)]+", "+u[m(165)]+")"),g[m(445)]=e}if(y){if(i[e.layerIndex]){const o=r[e[m(1055)]],n=i[m(409)]((e=>e[m(845)]===o[m(845)])),s=l[m(436)]["report"+o[m(845)]],a={width:o[m(524)],height:o[m(161)],bps:void 0,fps:o.framesPerSecond,fpscap:c[m(665)],codec:d?d.mimeType[m(382)]("/")[1]+"/"+d[m(463)]+" ("+d[m(1106)]+", "+d.sdpFmtpLine+")":void 0,layerindex:e[m(1055)],ssrc:o[m(845)],rtt:1e3*n.roundTripTime,pktslost:n[m(1119)],nack:o[m(1127)],mfsip:p?p.ip+":"+p[m(262)]:void 0,pli:o[m(1163)],fir:o[m(828)],bwsend:t.availableOutgoingBitrate};s&&(a[m(1437)]=s&&s[m(429)]?Math.floor((o[m(1251)]-s[m(429)].bytesSent)/(o[m(971)]-s[m(429)][m(971)])*1e3):0),l.qosHistroyData[m(299)+o[m(845)]]={videoOut:o,videoRemoteIn:n},g[m(741)]=a}}return(g[m(445)]||g[m(741)])&&f[m(299)][m(1129)](g),l[m(511)]({streamInfo:e,videoOutList:r,audioOut:n,videoRemoteInList:i,videoSource:c,audioEnable:b,videoEnable:y}),f},l[o(1044)]=function(){return new Promise(((e,t)=>{const r=L;let o={log:[],report:[]},n=[];Object[r(834)](l[r(1178)][r(425)])[r(352)]((e=>{const t=r;n[t(1129)](new Promise((r=>{const n=t;if(!e.pc||e.pc.connectionState!==n(808))return r();e.pc[n(1455)]()[n(1419)]((t=>{const i=n,s={streamInfo:e,video:null,audio:null,pair:null,audioCodec:null,videoCodec:null,remoteCandidate:null};t[i(352)]((e=>{const t=i;e[t(585)]===t(1400)&&e[t(1324)]===t(672)?s[t(746)]=e:"inbound-rtp"===e.type?e[t(845)]!==l.core[t(639)]&&(e[t(1502)]===t(741)?e.decoderImplementation!==t(348)&&(s.video=e):s[t(445)]=e):e[t(585)]===t(767)?"audio/opus"===e.mimeType?s.audioCodec=e:e[t(994)]===t(1375)&&(s.videoCodec=e):e.type===t(889)&&e.ip&&-1===e.ip.indexOf(t(1376))&&(s[t(181)]=e)}));const a=l.getQosDownlinkData(s);return a&&(o.log=o.log[i(294)](a[i(745)]),o.report=o[i(299)].concat(a[i(299)])),r()}))})))})),[l.core[r(861)],l[r(1178)][r(1418)]][r(294)](Object[r(834)](l[r(1178)][r(1189)]))[r(352)]((e=>{const t=r;e[t(973)],e.type,e[t(413)]&&e.pc&&e.pc[t(1170)]===t(808)&&n[t(1129)](new Promise((r=>{const n=t;e.pc[n(1455)]().then((t=>{const i=n,s={streamInfo:e,pair:null,videoOutList:[],audioOut:null,videoRemoteInList:[],audioRemoteIn:null,videoSource:null,audioSource:null,videoCodec:null,audioCodec:null,remoteCandidate:null};t[i(352)]((e=>{const t=i;"candidate-pair"===e.type&&e[t(1324)]===t(672)?s.pair=e:e[t(585)]===t(291)?"video"===e[t(1502)]?s.videoRemoteInList.push(e):s.audioRemoteIn=e:"outbound-rtp"===e[t(585)]?e.kind===t(741)?s[t(842)][t(1129)](e):s[t(1327)]=e:e[t(585)]===t(1501)?e.kind===t(741)?s[t(402)]=e:s[t(1045)]=e:"codec"===e[t(585)]?e[t(994)]===t(1539)?s.audioCodec=e:"video/H264"===e[t(994)]&&(s[t(1211)]=e):e.type===t(889)&&e.ip&&-1===e.ip.indexOf(t(1376))&&(s[t(181)]=e)}));const a=l.getQosUplinkData(s);return a&&(o[i(745)]=o[i(745)].concat(a[i(745)]),o[i(299)]=o[i(299)][i(294)](a[i(299)])),r()}))})))})),Promise[r(1095)](n).then((()=>{e(o)}))}))},l[o(511)]=function({streamInfo:e,videoOutList:t,audioOut:r,videoRemoteInList:n,videoSource:i,audioEnable:s,videoEnable:a}){const c=o;if(-1===e[c(1055)])return;const d=l[c(436)][e.id]||(l.qosHistroyData[e.id]={}),u=d.layerIndex!==e[c(1055)];let p=null,m=null,f=null;if(d[c(1055)]=e[c(1055)],r&&s&&(d[c(326)](c(1138))&&!e.muteAudio&&(d[c(1138)]>=r.packetsSent?d[c(989)]?d.audioNoSentTimes++:d.audioNoSentTimes=1:d[c(989)]=0,d[c(989)]>=2&&(m={errorType:l.LogErrorType[c(657)],errorCode:l[c(422)][c(1092)][c(647)],errorDesc:c(1536)})),d.audioPacketsSent=r.packetsSent),e[c(585)]===l[c(858)][c(1091)]){const t=-1===e[c(1055)]?0:e[c(1055)];p=l.options.screenLayers[t]}else{const t=-1===e[c(1055)]?0:e.layerIndex;p=l[c(1408)][e[c(973)]?c(981):c(300)][t]}if(i&&a&&i.framesPerSecond<p[c(477)]/2&&e[c(585)]!==l[c(858)][c(1091)]&&(f={errorType:l[c(490)][c(1429)],errorCode:l[c(422)][c(1092)][c(599)],errorDesc:c(492)}),!f&&a&&n.length>0){let r=0;t[c(352)](((t,o)=>{const n=c;if(0===o){const r="videoEncode"+t[n(845)];if(d[n(326)](r)&&!u){Math[n(826)]((t[n(587)]-d[r][n(587)])/(Date[n(542)]()-d[r][n(971)])*1e3)<p[n(477)]/2&&e[n(585)]!==l.StreamType[n(1091)]&&(f={errorType:l[n(490)].Video,errorCode:l[n(422)].Media.Encoder,errorDesc:n(717)})}else d[r]={};d[r][n(971)]=Date[n(542)](),d[r].framesEncoded=t[n(587)]}r+=t[n(307)]})),!f&&(d[c(326)](c(419))&&(d[c(419)]>=r?d[c(1085)]?d[c(1085)]++:d[c(1085)]=1:d[c(1085)]=0,d[c(1085)]>=2&&(m={errorType:l[c(490)][c(1429)],errorCode:l[c(422)].Media.Sender,errorDesc:"视频无发送数据"})),d.videoPacketsSent=r)}m?(l[c(1196)](l[c(444)][c(1465)],m),l[c(284)](e,l.StreamTrack[c(657)],!0,m)):l[c(284)](e,l[c(987)].Audio,!1),f?(l.triggerLogUpload(l[c(444)][c(1465)],f),l[c(284)](e,l[c(987)].Video,!0,f)):l.emitPeerError(e,l[c(987)][c(1429)],!1)},l[o(1100)]=function({streamInfo:e,pair:t,video:r,audio:n,audioEnable:i,videoEnable:s}){const a=o,c=l.qosHistroyData[e.id]||(l[a(436)][e.id]={});let d=null,u=null;n&&i&&(c.hasOwnProperty("audioPktsRcvd")&&!e.muteAudio&&!e[a(811)]&&(c[a(617)]>=n[a(363)]?c[a(1508)]?c.audioNoRcvdTimes++:c[a(1508)]=1:c[a(1508)]=0,c.audioNoRcvdTimes>=2&&(d={errorType:l.LogErrorType[a(657)],errorCode:l[a(422)][a(1092)][a(398)],errorDesc:a(188)})),c[a(617)]=n[a(363)]),r&&s&&(c[a(326)](a(218))&&!e[a(1369)]&&!e[a(1574)]&&(c.videoPktsRcvd>=r[a(363)]?c[a(853)]?c.videoNoRcvdTimes++:c[a(853)]=1:c[a(853)]=0,c.videoNoRcvdTimes>=2&&(u={errorType:l[a(490)][a(1429)],errorCode:l.LogErrorCode[a(1092)][a(398)],errorDesc:a(1312)})),c[a(218)]=r[a(363)],c.hasOwnProperty(a(1311))&&!e.muteVideo&&!e[a(1574)]&&!u&&c[a(1311)]>=r.framesDecoded&&(u={errorType:l[a(490)][a(1429)],errorCode:l[a(422)][a(1092)].Decoder,errorDesc:a(213)}),c.videoFramesDecoded=r[a(984)]),d?(l[a(1196)](l[a(444)][a(1465)],d),l[a(284)](e,l.StreamTrack[a(657)],!0,d)):l.emitPeerError(e,l[a(987)][a(657)],!1),u?(l.triggerLogUpload(l.LogType.Error,u),l[a(284)](e,l.StreamTrack[a(1429)],!0,u)):l.emitPeerError(e,l.StreamTrack.Video,!1)},l[o(284)]=function(e,t,r,n){const i=o;if(!l[i(1408)][i(922)])return;let a=l[i(1178)][i(922)][e.id],c={streamID:e.id,isAudio:t===l.StreamTrack.Audio,isVideo:t===l[i(987)][i(1429)],isError:r};!a&&(a={},l.core[i(922)][e.id]=a),r?(a[t]=!0,s[i(648)](s[i(1513)].peerError,{...c,...n})):a[t]&&(a[t]=!1,s.emit(s[i(1513)][i(1385)],{...c}))},l[o(1339)]=function({eventCode:e,streamInfo:r}){const n=o;return{logstamp:n(667),version:"1.8",eventcode:e,eventtime:Date.now(),devicetype:l[n(1178)][n(1530)],versionrtc:t,sessionid:l[n(1178)].session,eventtype:e[n(221)](0,3),eventpos:e.substring(e[n(532)]-3,e[n(532)]),peerdevicetype:r&&!r[n(711)]?r[n(1530)]:-1,streamtype:r?r[n(585)]===l.StreamType[n(1372)]?1:2:-1}},l[o(315)]=function(e,t){const r=o,{action:n,streamInfo:i}=t,s={...l[r(1339)]({eventCode:e,streamInfo:i}),userid:l[r(1178)][r(1096)],roomid:l[r(1178)][r(1351)],serviceid:l[r(1408)][r(658)],userevent:n,mediatype:-1,mute:-1,streamid:-1,layerscount:-1,layerindex:-1,netmode:-1,peeruserid:-1,duration:-1,bmcsip:-1};switch(n){case l[r(196)][r(368)]:const e=l[r(1178)][r(613)][r(421)];s[r(551)]=e[r(1035)]-e[r(1140)],delete l[r(1178)][r(613)][r(421)];break;case l[r(196)][r(568)]:break;case l.UserAction.Published:s.streamid=i.id,s[r(810)]=l.getLayersByStreamInfo(i)[r(532)],s[r(797)]=i[r(1055)]||0;const o=l.core[r(613)][r(514)+i.id];s[r(551)]=o[r(1525)]-o[r(1461)],i.muteAudio&&i.muteVideo?delete l[r(1178)][r(613)][r(514)+i.id]:l[r(257)](i);break;case l.UserAction[r(547)]:s[r(360)]=i.id,s[r(810)]=l.getLayersByStreamInfo(i)[r(532)],s[r(797)]=i[r(1055)]||0;const n=l[r(1178)].userActionData[r(953)+i.id];s[r(551)]=n[r(833)]-n[r(897)],delete l[r(1178)].userActionData[r(953)+i.id];break;case l.UserAction[r(601)]:s[r(360)]=i.id,s[r(810)]=i.layers.length,s[r(797)]=i.layerIndex,s[r(725)]=i[r(612)];const a=l[r(1178)][r(613)][r(494)+i[r(530)]];s[r(551)]=a[r(395)]-a[r(156)],i[r(1553)]&&i.muteVideo?delete l[r(1178)].userActionData["subscribe-"+i[r(530)]]:l[r(943)](i);break;case l[r(196)][r(724)]:s[r(360)]=i.id,s.layerscount=i[r(1107)][r(532)],s[r(797)]=i[r(1055)];const c=l[r(1178)].userActionData["unsubscribe-"+i.id];s.duration=c[r(906)]-c.unsubscribeBegin,s[r(725)]=i[r(612)],delete l.core[r(613)][r(1386)+i.id];break;case l[r(196)][r(869)]:s[r(360)]=i.id,s[r(810)]=l[r(632)](i)[r(532)],s[r(797)]=i.layerIndex||0;const d=l[r(1178)][r(613)]["publish-"+i.id];s[r(551)]=d[r(770)]-d[r(1461)],delete l[r(1178)][r(613)][r(514)+i.id];break;case l[r(196)][r(384)]:s.streamid=i.id,s[r(810)]=i.layers[r(532)],s.layerindex=i.layerIndex,s[r(725)]=i.uid;const u=l[r(1178)][r(613)][r(494)+i[r(530)]];s[r(551)]=u[r(482)]-u[r(156)],delete l.core[r(613)]["publish-"+i[r(530)]];break;case l[r(196)][r(258)]:s[r(441)]=t[r(228)],s[r(360)]=i.id,s[r(810)]=l.getLayersByStreamInfo(i)[r(532)],s[r(797)]=i[r(1055)]||0,s.mute=(s.mediatype===l[r(1374)][r(657)]?i[r(1553)]||i.localMuteAudio:i[r(1369)]||i[r(1574)])?1:0,i[r(612)]&&(s.peeruserid=i.uid)}return s},l[o(569)]=function(e){const t=o,r=[];return e[t(352)]((e=>{const o=t,{streamInfo:n}=e,i={...l[o(1339)]({eventCode:e[o(228)]==l[o(1374)][o(657)]?"203005":o(1020),streamInfo:n}),userid:l[o(1178)][o(1096)],roomid:l[o(1178)][o(1351)],serviceid:l[o(1408)][o(658)],username:l.core[o(782)],streamid:n.id,mediatype:e[o(228)],mute:e.mute,peeruserid:n[o(612)],stuckcount:e[o(280)],stuckduration:e.stuckDuration,spanduration:e[o(1142)],playduration:e.playDuration,weakduration:e[o(479)],cpu:-1,memory:-1,netmode:-1};e[o(228)]!==l[o(1374)].Audio&&(i[o(797)]=n[o(1055)]),r[o(1129)](i)})),r},l[o(1001)]=function(e,t){const r=o,{errorType:n,errorCode:s,errorDesc:a,streamInfo:c}=t,d={...l[r(1339)]({eventCode:e,streamInfo:c}),userid:l.core.userID,roomid:l[r(1178)][r(1351)],serviceid:l[r(1408)][r(658)],streamid:c?c.id||c[r(1457)]:-1,peeruserid:c?c[r(711)]?-1:c[r(612)]:-1,errtype:n,errcode:s,errdesc:a,mfsip:c&&c[r(980)]?c[r(980)]:-1,netmode:-1};return l[r(1408)][r(1209)]&&i[r(1241)](r(241)+d[r(1471)]+r(597)+d[r(461)]+", errdesc: "+d[r(166)]),d},l[o(1282)]=function(e){const t=o;!e[t(573)]&&e.pc&&(!l[t(1178)][t(613)][t(514)+e.id]&&(l[t(1178)][t(613)][t(514)+e.id]={}),l[t(1178)][t(613)]["publish-"+e.id].publishBegin=Date.now(),l[t(257)](e))},l[o(257)]=function(e){const t=o;if(!e.pc||e[t(1553)]&&e.muteVideo)return;const r=e.pc[t(712)]();if(!r||0===r.length)return;e[t(573)]=!0;let n=r[0];r.length>1&&r[t(352)]((r=>{const o=t;r[o(1172)]&&(e[o(846)]===l[o(1382)][o(442)]?r[o(1172)][o(1502)]===o(741)&&(n=r):r.track[o(1502)]===(e[o(1369)]||!e[o(1553)]&&-1===e[o(1055)]?o(445):"video")&&(n=r))}));let i=0;const s=setInterval((()=>{const r=t;e[r(1553)]&&-1===e.layerIndex?(i++,i>4&&(clearInterval(s),delete l[r(1178)][r(613)][r(514)+e.id],e[r(573)]=!1)):i<40?(i++,n[r(1455)]()[r(1419)]((t=>{const o=r,i=[];let a=0;t[o(352)]((e=>{const t=o;e[t(585)]===t(707)&&i[t(1129)](e)})),i.forEach((e=>{const t=o;a+=n[t(1172)].kind===t(741)?e[t(652)]:e[t(307)]})),a>0&&(clearInterval(s),l[o(1178)][o(613)][o(514)+e.id][o(770)]=Date[o(542)](),l.triggerLogUpload(l[o(444)][o(196)],{action:l[o(196)][o(869)],streamInfo:e}))}))):(clearInterval(s),l[r(1178)][r(613)][r(514)+e.id][r(770)]=Date[r(542)](),l[r(1196)](l.LogType[r(196)],{action:l[r(196)].firstDataUploaded,streamInfo:e}))}),50)},l.checkStreamFirstDownload=function(e){const t=o;if(!e.pc)return;const r=e.pc[t(438)]();if(!r||0===r[t(532)])return;let n=r[0];r[t(532)]>1&&r[t(352)]((r=>{const o=t;r.track[o(1502)]===(e[o(1369)]?"audio":o(741))&&(n=r)}));let i=0;const s=setInterval((()=>{const r=t;i<10?(i++,n[r(1455)]()[r(1419)]((t=>{const o=r,i=[];let a=0;t[o(352)]((e=>{const t=o;"inbound-rtp"===e[t(585)]&&e.ssrc!==l[t(1178)][t(639)]&&i[t(1129)](e)})),i[o(352)]((e=>{const t=o;a+=n[t(1172)][t(1502)]===t(741)?e.keyFramesDecoded:e[t(363)]})),a>0&&(clearInterval(s),l[o(1178)][o(613)][o(494)+e[o(530)]].downloadTime=Date[o(542)](),l[o(1196)](l[o(444)][o(196)],{action:l[o(196)][o(384)],streamInfo:e}))}))):(clearInterval(s),l[r(1178)][r(613)][r(494)+e[r(530)]][r(482)]=Date[r(542)](),l[r(1196)](l[r(444)][r(196)],{action:l[r(196)].firstDataDownloaded,streamInfo:e}))}),50)},l[o(1268)]=function(e,t,r,n,s,a=!1){const c=o;if(a){if(!l[c(1178)][c(578)]||l.ws&&l.ws[c(1531)]===WebSocket[c(1441)])return void i[c(1241)]("invalid recovery: "+l.core[c(578)]+", "+(l.ws?c(1537)+(l.ws[c(1531)]===WebSocket[c(1441)]):c(762)))}else{if(l[c(1178)].roomName&&l[c(1178)][c(1351)]!==e||l[c(1178)].userID&&l[c(1178)][c(1096)]!==t)return l[c(877)](),l[c(1268)](e,t,r,s,n);if(1===l[c(1178)].status)return i[c(1241)](c(1557)),l[c(694)](l[c(246)][c(995)],"already in room");l.initCore(),l.setCore({roomName:e,userID:t,userName:r,userArea:n,userRole:s})}!l[c(1178)][c(613)][c(421)]&&(l[c(1178)][c(613)][c(421)]={}),l.core.userActionData[c(421)][c(1140)]=Date[c(542)]();let d={reqId:S(),roomName:l[c(1178)][c(1351)]};l.options[c(1540)]?d[c(543)]=l[c(1178)][c(1344)]:(d[c(1453)]=l[c(1178)][c(1453)],d.ispCode=l[c(1178)].ispCode,d.countryCode=l[c(1178)][c(968)],d[c(561)]=l[c(1178)][c(561)],d[c(1242)]=l.core[c(1242)],i[c(574)](c(1332),l[c(1178)][c(1453)],l[c(1178)].ispCode,l.core[c(968)],l[c(1178)][c(561)],l[c(1178)][c(1242)]));let u={Authorization:k(l[c(1178)],l[c(1408)],l[c(965)])};l[c(154)](c(883),l[c(1408)][c(661)][c(355)],d,u,(function(e){const t=c;return e&&e[t(180)]!==t(404)?(i.logError(t(1426)+e[t(1030)]),l.emitError(l[t(246)].JoinError,t(572)),void l[t(1196)](l[t(444)][t(1465)],{errorType:l.LogErrorType[t(1485)],errorCode:l[t(422)][t(1485)].Token,errorDesc:t(572)})):e[t(326)](t(651))&&e[t(651)][t(326)](t(223))?void l[t(1304)](e.tokenInfo.token,a):(i.logError(t(386)),l.emitError(l.ErrorCode[t(995)],t(1086)),void l[t(1196)](l[t(444)].Error,{errorType:l[t(490)][t(1485)],errorCode:l.LogErrorCode[t(1485)][t(412)],errorDesc:"room response error, no token"}))}),(function(o,u,p){const m=c;if(o instanceof Object&&401===o[m(180)]){const c=Date[m(562)](o.getResponseHeader(m(687)))||0;if(c>0){const o=Date[m(542)]();if(Math[m(1392)](c-o-l.options[m(334)])>6e4)return l[m(1408)].deltaTime=c-o,i[m(1366)](m(263)+o+",","server timestamp="+c+",",m(1113)+l[m(1408)].deltaTime),l[m(1268)](e,t,r,n,s,a)}}return i[m(1241)]("request room service error, "+(o[m(249)]||o)+m(662)+JSON[m(1064)](d)),a?l.reconnect():(l[m(1196)](l[m(444)][m(1465)],{errorType:l[m(490)][m(1485)],errorCode:l.LogErrorCode.Rtc.Token,errorCode:"request room error,status: "+o[m(180)]}),l[m(694)](l[m(246)][m(995)],m(604)))}))},l.joinRoomEx=function(e,t,r,n,s,a){const c=o;if(l[c(1178)][c(1431)]=0,l[c(1408)][c(1540)])return i[c(574)](c(1432)+n),this[c(1268)](e,t,r,n,s,a);l[c(147)](e,t,r,s,a)},l[o(147)]=function(e,t,n,s,a){const c=o;let d={msgId:S()};jhkSign(d,{appKey:c(744),postAndJSON:!0});const u={method:"post",url:l[c(748)](l[c(1408)][c(661)].IpInfoService),timeout:l[c(1408)].requestTimeout,contentType:c(1060)};let p={};p[c(589)]=c(744),p["X-Sign-For"]=jhkSign(d,{appKey:"commonweb",postAndJSON:!0}),p instanceof Object&&Object[c(1015)](p)[c(532)]>0&&(u[c(472)]=p),u.data=JSON[c(1064)](d),r(u)[c(1419)]((r=>{!function(r){const o=L;if(r[o(180)]!==o(404)){if(i.logError(o(193)+JSON[o(1064)](r)),l[o(1178)][o(1431)]<l.core[o(424)]){let i=1e3;return 0<l[o(1178)][o(1431)]&&(i=3e3*l.core[o(1431)]),setTimeout((function(){const r=o;l[r(1178)][r(1431)]=l.core[r(1431)]+1,l.requestIpInfo(e,t,n,s,a)}),i),l[o(694)](l[o(246)][o(894)],o(423)+i+o(264)+l.core[o(1431)]+o(887)+r[o(1030)])}return l[o(694)](l[o(246)][o(894)],o(548)+l[o(1178)][o(424)]+o(887)+r[o(1030)])}if(!r[o(326)](o(210)))return l[o(694)](l.ErrorCode[o(998)],"request ip info error, no cityInfo, response:"+JSON[o(1064)](r));if(!(r[o(210)].hasOwnProperty(o(1484))&&r.cityInfo[o(326)](o(723))&&r[o(210)][o(326)](o(968))&&r[o(210)][o(326)](o(561))&&r[o(210)].hasOwnProperty("cityCode")))return l[o(694)](l[o(246)][o(998)],"request ip info error, no cityInfo, response:"+JSON.stringify(r)),l[o(147)](e,t,n,s,a);l.core[o(1453)]=r[o(210)].ipAddr;let c=parseInt(r[o(210)][o(723)]);l[o(1178)][o(723)]=c.toString();let d=parseInt(r.cityInfo[o(968)]);l.core.countryCode=d[o(1214)]();let u=r[o(210)][o(561)],p=r[o(210)][o(1242)];u[o(532)]>=2&&(l[o(1178)].regionCode=parseInt(u.substring(0,2))[o(1214)]()),p[o(532)]>=4&&(l[o(1178)][o(1242)]=parseInt(p.substring(2,4))[o(1214)]()),i[o(574)](o(1561)+JSON[o(1064)](r)),l.joinRoom(e,t,n,l[o(757)][o(325)],s,a)}(r)}))[c(1396)]((r=>{!function(r,o,c){const d=L;if(i[d(1241)](d(631),r,o,c),l[d(1178)][d(1431)]<l[d(1178)][d(424)]){let o=1e3;return 0<l[d(1178)][d(1431)]&&(o=3e3*l.core[d(1431)]),setTimeout((function(){const r=d;l[r(1178)][r(1431)]=l.core[r(1431)]+1,l.requestIpInfo(e,t,n,s,a)}),o),l[d(694)](l[d(246)][d(894)],d(423)+o+d(264)+l[d(1178)].ipInfoRetryCount+d(1222)+JSON.stringify(r))}l[d(694)](l[d(246)][d(894)],d(1407)+l[d(1178)][d(424)]+", err:"+JSON[d(1064)](r))}(r)})),i[c(574)](c(297)+JSON[c(1064)](u))},l.leaveRoom=function(e=!0){const t=o;l[t(806)]&&(clearInterval(l[t(806)]),delete l[t(806)]),l[t(1262)]&&clearTimeout(l.reconnectTimeout),l.ws&&(l.ws[t(1531)]===WebSocket[t(1441)]?l[t(365)]():l.ws[t(1012)](),l[t(1178)].session&&l[t(1196)](l[t(444)][t(196)],{action:l.UserAction[t(568)]})),l[t(1178)][t(180)]=0,e&&(l[t(1178)][t(578)]="",l[t(1178)][t(1096)]="",l[t(1178)].userName="",l[t(1178)][t(1351)]=""),l[t(336)](),l.core[t(1295)]=!1,l[t(1178)][t(1200)]=[],l[t(1178)][t(613)]={},l[t(1178)][t(922)]={},l[t(590)]()},l[o(194)]=function(){const e=o;if(document[e(306)])return document[e(306)][e(780)];try{throw new Error}catch(t){try{let r=t[e(349)][e(1269)](/([^ \n])*([a-z]*:\/\/\/?)*?[a-z0-9\/\\]*\.js/gi)[0];if(r)return["(",")","@"][e(352)]((t=>{r=r[e(945)](t,"")})),r}catch(t){i[e(1366)](e(840)+t)}}let t=document[e(1266)](e(1154));return t.length>0?t[t[e(532)]-1].src:void 0},l[o(1379)]=function(){return new Promise((e=>{const t=L;if(l[t(1449)])e();else if(c)if(l.audioContext=new c,i[t(574)](t(1247)),u){let r=t(917),o=null;o=setTimeout((()=>{const r=t;i[r(1366)](r(591)),e()}),200);try{l.audioContext.audioWorklet[t(735)](r)[t(1419)]((()=>{const r=t;i[r(574)](r(1556)),clearTimeout(o),e()}))[t(1396)]((r=>{const n=t;u=null,i[n(1366)](n(803),r.toString()),clearTimeout(o),e()}))}catch(r){u=null,i[t(1366)]("can not add module to audio worklet,",r[t(1214)]()),clearTimeout(o),e()}}else e();else i[t(1241)](t(556)),e()}))},l[o(636)]=function(e="",t=""){const r=o;if(!l[r(1408)].cameraEnableVideo)return{video:!1};let n={},i=t?r(981):"cameraLayers",s=l[r(1408)][i][r(1445)](-1)[0][r(1562)]||1280,a=l[r(1408)][i][r(1445)](-1)[0][r(683)]||720,c=l[r(1408)][i].slice(-1)[0][r(477)]||30,d={width:s,height:a,aspectRatio:1.7777777777777777,frameRate:{min:c>>1,ideal:c},facingMode:l[r(1178)].camera.facingMode};return M[r(437)]&&delete d[r(477)][r(1143)],Object.keys(d)[r(352)]((e=>{l.getBrowserSupported(e)&&(n[e]=d[e])})),e&&(n[r(1065)]=e),0===Object.keys(n)[r(532)]?{video:!0}:(n[r(1065)]&&l.adaptVideoConstraints(n),{video:n})},l[o(1205)]=function(e=""){const t=o;if(!l[t(1408)][t(996)])return{audio:!1};let r={},n={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0};return Object[t(1015)](n)[t(352)]((e=>{l[t(1219)](e)&&(r[e]=n[e])})),e&&(r.deviceId=e),0===Object[t(1015)](r)[t(532)]?{audio:!0}:(r[t(974)]&&!l.options.autoGainControl&&(r[t(974)]=!1),r.echoCancellation&&!l.options.echoCancellation&&(r.echoCancellation=!1),r[t(888)]&&!l[t(1408)][t(888)]&&(r[t(888)]=!1),{audio:r})},l.adaptVideoConstraints=function(e){const t=o,r=[{name:t(283),width:1920,height:1080,frameRate:30}],n=l.core.devices.detail[t(844)];if(!n||0===n[t(532)])return;const i=l[t(1178)][t(1423)].detail.videoinput[t(409)]((t=>t.id==e.deviceId));i&&r.forEach((r=>{const o=t;-1!==i[o(340)][o(1248)](r.name)&&(e[o(1562)]=r[o(1562)],e[o(683)]=r.height,e[o(477)]={min:r.frameRate>>1,ideal:r[o(477)]})}))},l[o(1523)]=function(e,t,r){const n=o;e?(i[n(574)](n(203)+t+n(1110)+e[n(1502)]+n(947)+e.contentHint+",enabled:"+e[n(699)]+n(1169)+e[n(202)]+",readyState:"+e[n(1531)]),e[n(462)]=t=>{const r=n;i.logWarn(r(823)+e.kind+r(538)+e[r(699)],t)},e.onended=t=>{const r=n;i[r(1366)]("trackInfo,onended:"+e[r(1502)]+",enabled:"+e[r(699)]+r(1439)+e.readyState,t)},e.onmute=t=>{const o=n;i.logWarn("trackInfo,onmute:"+e[o(1502)]+o(538)+e[o(699)]+o(1439)+e.readyState,t),e[o(1502)]===l[o(987)][o(1429)]&&r[o(1218)]&&!r[o(1369)]&&(r[o(997)]=!0,l.wsUpdate(r.id,r.systemMuteVideo,r[o(1553)]))},e[n(510)]=t=>{const o=n;i.logWarn(o(1197)+e[o(1502)]+",enabled:"+e[o(699)],t),e[o(1502)]===l[o(987)].Video&&r[o(1218)]&&!r[o(1369)]&&r[o(997)]&&(r[o(997)]=!1,l[o(649)](r.id,r[o(997)],r[o(1553)]))}):i[n(1366)](n(896))},l[o(701)]=function(e){const t=o;e&&(e[t(462)]=null,e[t(805)]=null,e[t(615)]=null,e.onunmute=null)},l[o(1136)]=async function(e,t){const r=o;i.logInfo(r(932)+e+r(528)+t+")"),l.initBrowserSupported();let n={};e&&(n=Object[r(867)](n,l[r(1205)]())),t&&(n=Object.assign(n,l[r(636)]()));let a=null;try{i[r(574)](r(201)+JSON.stringify(n)+")"),a=await navigator.mediaDevices[r(1352)](n),i[r(574)](r(537))}catch(o){return l[r(318)](!e&&void 0,!t&&void 0),o instanceof Object&&"NotAllowedError"===o[r(340)]?(i[r(1366)](r(1038),e,t),s[r(648)](s[r(1513)][r(934)],e,t,!0,!1)):o instanceof Object&&"NotFoundError"===o.name?(i[r(1366)](r(874),e,t,n),s[r(648)](s[r(1513)].permission,e,t,!1,!1)):o instanceof Object&&o[r(340)]===r(375)?(e&&await l.initAudioContext(),l[r(318)](!!e||void 0,!t&&void 0),i[r(574)](r(311),e,t,n),s[r(648)](s[r(1513)][r(934)],e,t,!0,!0)):(i.logError(r(1460)+o[r(1214)](),n),s[r(648)](s[r(1513)].permission,e,t,!1,!1))}e&&await l.initAudioContext(),s[r(648)](s[r(1513)][r(934)],e,t,!0,!0),l[r(1186)](a),l[r(318)](!!e||void 0,!!t||void 0),i[r(574)](r(839))},l[o(318)]=function(e,t){const r=o;typeof e===r(321)&&(l[r(1178)][r(934)].audio=e),typeof t===r(321)&&(l[r(1178)][r(934)].video=t)},l[o(730)]=function(e){const t=o;e&&(e.stop(),l[t(701)](e),e.kind===l[t(987)][t(657)]&&s[t(648)](s[t(1513)].audioTrackStopped))},l[o(1186)]=function(e){const t=o;e&&e[t(1043)]()[t(352)]((e=>l[t(730)](e)))},l.replaceCustomTrack=function(){const e=o,t=l.core[e(609)],r=t[e(963)],n=l.options.customLayers[0];(n[e(1562)]!==r[e(1562)]||n[e(683)]!==r[e(683)])&&(r[e(892)]("width",n[e(1562)]),r[e(892)](e(683),n[e(683)]));try{t[e(1125)]&&(l[e(730)](t[e(1125)]),t[e(319)][e(1521)](t[e(1125)]));const r=t[e(464)];let o=null;if(o=null==r[e(1347)]?r[e(1303)]():r[e(1347)](),t[e(1125)]=o.getAudioTracks()[0],t[e(1125)]&&(t.stream[e(1378)](t[e(1125)]),t.pc)){t.pc.getSenders().find((t=>"audio"===(t[e(1172)]&&t.track[e(1502)])||!t[e(1172)])).replaceTrack(t.audioTrack)}}catch(t){i[e(1241)](e(921),t[e(1214)]())}},l[o(1526)]=function(){const e=o;l.core[e(609)].videoEnded=!0},l.checkVideoPlay=function(){const e=o,t=()=>{const e=L;l.replaceCustomTrack(),l[e(1178)].custom.videoElem[e(650)](e(220),t)};l.core[e(609)][e(464)]&&l[e(1178)][e(609)].videoEnded&&l[e(1178)][e(609)].videoElem[e(616)](e(220),t),l[e(1178)][e(609)][e(1175)]=!1},l.addVideoEvent=function(e){const t=o;e&&(e.addEventListener("ended",l.markVideoEnded),e.addEventListener(t(720),l[t(581)]))},l[o(471)]=function(e){const t=o;e&&(e[t(650)](t(681),l[t(1526)]),e[t(650)](t(720),l[t(581)]))},l[o(893)]=function(e){const t=o,r={audio:{trackName:t(1125),getTrackFunc:t(781)},video:{trackName:t(1550),getTrackFunc:"getVideoTracks"}};if(!e||Object[t(1015)](r).indexOf(e)<0)return i[t(1366)]("replace stream track, bad track type");let n=r[e][t(740)],s=r[e].getTrackFunc,a=l[t(1178)][t(861)][t(319)][s](),c=a.length>0;if(l.core[t(861)][n])l[t(1178)].camera[t(319)][t(1378)](l[t(1178)].camera[n]),a[t(352)]((e=>{const r=t;l[r(1178)][r(861)][r(319)][r(1521)](e),l.stopMediaTrack(e)}));else for(let e=0,r=a[t(532)];e<r;e++){let r=a[e];e>0&&l.core[t(861)][t(319)][t(1521)](r),l[t(730)](r)}return c},l[o(756)]=async function(e=""){const t=o;if(!(Object[t(834)](l[t(987)])[t(1248)](e)<0)&&l.core.camera.pc)if(e===l[t(987)][t(657)]){if(l[t(1178)][t(861)][t(1125)]){let e=l[t(1178)][t(861)].pc[t(712)]()[t(409)]((e=>e.track&&"audio"===e[t(1172)][t(1502)]));if(e)try{await e[t(646)](l[t(1178)][t(861)].audioTrack)}catch(e){i[t(1241)](t(976),e.toString())}else l[t(305)](l.StreamType[t(1372)],l[t(1178)][t(861)].id),l.wsPublish(l[t(858)][t(1372)],"",l[t(1178)][l[t(858)].Camera][t(1552)]?l[t(1178)][l[t(858)][t(1372)]][t(1552)][t(373)]:"")}}else if(l[t(1178)][t(861)][t(1550)]){let e=l[t(1178)][t(861)].pc[t(712)]()[t(409)]((e=>e[t(1172)]&&e[t(1172)].kind===t(741)));if(e)try{await e[t(646)](l[t(1178)][t(861)].videoTrack)}catch(e){i.logError(t(1506),e.toString())}else l[t(305)](l[t(858)][t(1372)],l.core[t(861)].id),l[t(822)](l[t(858)].Camera,"",l.core[l.StreamType[t(1372)]][t(1552)]?l[t(1178)][l.StreamType[t(1372)]][t(1552)][t(373)]:"")}},l[o(605)]=function(e,t,r){const n=o,i=l[n(1178)][n(609)],s=()=>{const t=n;l.replaceCustomTrack(),e[t(650)]("canplay",s)};r&&l.setOption({customLayers:[...r]}),i[n(464)]===e?(e.pause(),e[n(780)]=t,e.addEventListener("canplay",s)):(i[n(464)][n(1191)](),l[n(471)](i[n(464)]),i[n(1125)]&&l.stopMediaTrack(i[n(1125)]),i[n(464)]=e,l[n(399)](i[n(464)]),e[n(616)](n(220),s),e[n(780)]=t,l.enableDomAutoPlay(e),e[n(202)]=!1)},l[o(507)]=async function(e){const t=o;if(Object[t(834)](l[t(987)]).indexOf(e)<0)return;const r=e+t(1028),n=e+t(155),s=t(452)+I(e)+"Constraints",a=t(452)+I(e)+t(1456),c=e===l[t(987)][t(1429)];let d=!1;const u=l[t(1178)][t(1423)][n];if(!u)return;const p=l[s](u);c&&M.android&&(d=l[t(1178)][t(861)][r]&&"live"===l[t(1178)][t(861)][r][t(1531)],d&&l[t(730)](l[t(1178)][t(861)][r]));try{let e=await navigator[t(624)][t(1352)](p);l.stopMediaTrack(l[t(1178)][t(861)][r]),l[t(1178)][t(861)][r]=e[a]()[0],l.logTrackInfo(l.core[t(861)][r],t(507),l[t(1178)][t(861)])}catch(r){if(l.core[t(1423)][n]="",i[t(1241)](r&&r[t(340)]?r.name:r),c&&M[t(1310)]&&d){const e=l[t(636)](l[t(1178)][t(1423)].lastVideoinput),r=await navigator[t(624)][t(1352)](e);l[t(1178)][t(861)][t(1550)]=r[t(1120)]()[0],l[t(893)](l[t(987)][t(1429)]),l[t(761)](l[t(1178)][t(861)].videoElem,l[t(1178)][t(861)][t(319)]),l[t(1178)][t(861)].id&&await l[t(756)](l[t(987)][t(1429)])}return l[t(694)](l.ErrorCode.SetDeviceError,{deviceType:e===l[t(987)].Audio?l[t(970)][t(232)]:l[t(970)].VideoInput,deviceID:u,desc:t(1255)+e+t(1532)})}e===l[t(987)].Audio?(await l[t(1379)](),l.replaceStreamTrack(e),l[t(1440)](l.StreamType[t(1372)])):(l.replaceStreamTrack(e),l[t(761)](l[t(1178)][t(861)].videoElem,l[t(1178)].camera[t(319)])),l[t(1178)][t(861)].id&&await l[t(756)](e)},l[o(772)]=function(e=null,t=!0,r=!1){const n=o;if(!(e&&e instanceof HTMLElement))return void i.logWarn(n(1285));t&&(e[n(202)]=!0),e[n(1398)]=!1,e[n(1274)]=!0,e[n(831)]=!0,e[n(892)]("webkit-playsinline",""),e[n(892)](n(623),"");const s=()=>{const o=n;i[o(574)](o(t?741:445)+o(1321)+(e.id||"")),!r&&l[o(1208)](e,t),!t&&l[o(593)](e,l[o(1178)][o(1423)][l[o(970)][o(243)]]),e.removeEventListener("loadedmetadata",s)};e[n(616)](n(1518),s)},l.elementPlay=function(e,t){const r=o;e[r(720)]()[r(1419)]()[r(1396)]((o=>{const n=r;l[n(1178)].permission.stream||(i.logError(n(535)+n(t?741:445)+" "+(e.id||"")+", "+o),l.core[n(1231)][n(1129)](e),s[n(648)](s.Event[n(481)]))}))},l.autoplayHack=async function(e,t){const r=o;if(!l[r(1408)].autoplayFix||!e)return void(e&&l.elementPlay(e,t));if(M[r(1497)]){const o=l[r(1178)][r(861)];if(o[r(413)]&&o[r(1125)]&&o.audioTrack[r(1531)]===r(187))return void l[r(1208)](e,t)}const n=l[r(1178)][r(934)];let i=null;try{n[r(319)]?(i=n[r(319)],clearTimeout(n[r(372)])):n[r(445)]&&(i=await navigator.mediaDevices[r(1352)]({audio:!0}),n[r(319)]=i),l[r(1208)](e,t),i&&(n[r(372)]=setTimeout((()=>{const e=r;n[e(319)]=null,l[e(1186)](i)}),3e4))}catch(o){l[r(1208)](e,t)}},l[o(1217)]=async function(e=null,t,r=!1,n=!1){const a=o;if(r||n)r&&l[a(507)](l[a(987)][a(657)])[a(1419)](),n&&l[a(507)](l[a(987)][a(1429)]).then();else if(t){if(l[a(1178)][a(861)][a(413)]&&l[a(1178)][a(861)][a(319)]&&(!e||l[a(1178)][a(861)].videoElem===e))return i[a(1366)](a(1264)),l[a(480)]({type:l[a(858)][a(1372)],desc:a(824),error:{name:a(1563)}});if(!l[a(1408)][a(996)]&&!l[a(1408)].cameraEnableVideo)return l[a(480)]({type:l.StreamType[a(1372)],desc:a(286),error:{name:a(908)}});if(!l[a(1178)].devices[a(1399)]&&!l[a(1178)][a(1423)][a(844)])return l[a(480)]({type:l.StreamType[a(1372)],desc:a(1023),error:{name:a(389)}});e instanceof HTMLElement&&e!==l[a(1178)][a(861)].videoElem&&(l[a(772)](e),l[a(1178)][a(861)].videoElem=e);let t=l[a(1178)][a(1423)][a(844)]?l[a(636)](l.core[a(1423)].videoinput):{video:!1},r=l[a(1178)][a(1423)][a(1399)]?l[a(1205)](l[a(1178)][a(1423)][a(1399)]):{audio:!1},o=!1,n=!1,c=null,d=null;if(t.video){try{let e=await navigator[a(624)][a(1352)](t);l.core[a(861)][a(1550)]=e[a(1120)]()[0],o=!0,l[a(1523)](l.core[a(861)][a(1550)],a(1217),l[a(1178)].camera)}catch(e){i[a(1241)](a(1427)+e[a(1214)](),t),o=!1,c=e}o&&(l[a(893)](l[a(987)][a(1429)]),l.setVideoElementStream(l[a(1178)][a(861)][a(464)],l[a(1178)][a(861)][a(319)]),l.options[a(1279)]&&l[a(1208)](l[a(1178)][a(861)][a(464)],!0))}if(r[a(445)]){try{let e=await navigator[a(624)][a(1352)](r);l[a(1178)][a(861)][a(1125)]=e[a(781)]()[0],n=!0,l[a(1523)](l[a(1178)].camera[a(1125)],a(1217),l.core.camera)}catch(e){i[a(1241)]("open audio input error, "+e[a(1214)](),r),n=!1,d=e}n&&(await l[a(1379)](),l[a(893)](l[a(987)][a(657)]),l[a(1440)](l[a(858)][a(1372)]))}if(n||o)l[a(1178)][a(861)].preview=!0,s.emit(s[a(1513)].camera,!0,n,o,l.core[a(861)][a(319)]);else{let e=[];d&&e[a(1129)](a(431)),c&&e[a(1129)](a(865)),l[a(480)]({type:l[a(858)].Camera,desc:a(1165)+e[a(421)](a(152))+a(860),error:c||d})}}else l[a(1186)](l.core.camera.stream),l[a(305)](l[a(858)].Camera,l[a(1178)][a(861)].id),l[a(1178)][a(861)][a(413)]=!1,s[a(648)](s[a(1513)][a(861)],!1)},l[o(179)]=async function(e=null,t,r,n,a){const c=o;if(a){if(l[c(1178)][c(1189)][t]&&l.core[c(1189)][t][c(413)]&&l[c(1178)].cameraEx[t][c(319)])return s[c(648)](s.Event.cameraEx,a,l[c(1178)][c(1189)][t][c(319)]);!l[c(1178)].cameraEx[t]&&(l[c(1178)][c(1189)][t]={local:!0,tag:t,type:l[c(858)][c(1372)],candidate:[],layerIndex:-1,info:{app:"",rtc:"",act:0}}),e instanceof HTMLElement&&e!==l[c(1178)][c(1189)][t][c(464)]&&(l[c(772)](e),l.core[c(1189)][t][c(464)]=e);let o=l[c(1408)][c(981)][c(1445)](-1)[0][c(1562)],d=l[c(1408)][c(981)].slice(-1)[0].height,u=l[c(1408)][c(981)][c(1445)](-1)[0][c(477)],p={video:{width:{ideal:o},height:{ideal:d},frameRate:{min:u>>1,ideal:u},aspectRatio:1.7777777777777777},audio:{autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0}};r?(p[c(445)][c(1065)]={exact:r},l[c(1178)][c(1189)][t].audio=!0):(delete p[c(445)],l[c(1178)][c(1189)][t][c(445)]=!1),n?(p[c(741)][c(1065)]=n,l[c(1365)](p[c(741)]),l[c(1178)][c(1189)][t][c(741)]=!0):(delete p.video,l[c(1178)][c(1189)][t][c(741)]=!1);try{l.core[c(1189)][t][c(319)]=await navigator[c(624)][c(1352)](p),l.core[c(1189)][t].videoTrack=l[c(1178)][c(1189)][t][c(319)][c(1120)]()[0],n&&l[c(1523)](l[c(1178)][c(1189)][t].stream.getVideoTracks()[0],c(179),l.core[c(1189)][t]),r&&l[c(1523)](l[c(1178)][c(1189)][t][c(319)][c(781)]()[0],c(179),l[c(1178)].cameraEx[t])}catch(e){i[c(1241)](c(433)+e),l.emitPreviewError({type:t,desc:c(171),error:e})}if(await l[c(1379)](),l[c(761)](l[c(1178)][c(1189)][t][c(464)],l.core[c(1189)][t][c(319)]),!l[c(1178)][c(1189)][t][c(413)])return l[c(1178)][c(1189)][t][c(413)]=!0,s[c(648)](s.Event[c(1189)],!0,t)}else l.core[c(1189)][t]&&(l.core[c(1189)][t][c(319)]&&(l[c(1178)][c(1189)][t].stream[c(1043)]()[c(352)]((e=>{const t=c;e[t(805)]=null,l[t(730)](e)})),l[c(1178)].cameraEx[t].ready&&(l[c(668)](l[c(1178)].cameraEx[t]),l.wsUnPublish(l[c(858)][c(1372)],l[c(1178)][c(1189)][t].id,t))),l[c(1178)][c(1189)][t][c(413)]=!1),l.releaseAudioProcessor(l[c(858)][c(1372)]+"-"+t),s[c(648)](s.Event[c(1189)],!1,t)},l.screenPreview=async function(e=null,t){const r=o;if(t){e instanceof HTMLElement&&e!==l.core[r(1418)][r(464)]&&(l[r(772)](e),l[r(1178)][r(1418)][r(464)]=e);let t={audio:l[r(1408)].screenEnableAudio,video:l[r(1408)][r(1294)]};t[r(741)]&&(t.video={frameRate:{ideal:l[r(1408)][r(1355)][0][r(477)]}});try{l[r(1178)][r(1418)][r(319)]=await navigator[r(624)][r(918)](t)}catch(e){return i[r(1241)](r(752)+e),e[r(1214)]()[r(1248)](r(253))>=0?s[r(648)](s.Event.screen,!1):l[r(480)]({type:l.StreamType.Screen,desc:r(1389),error:e})}const o=l[r(1178)].screen[r(319)][r(781)]()[0],n=l[r(1178)][r(1418)][r(319)].getVideoTracks()[0];n[r(805)]=function(){const e=r;l[e(305)](l[e(858)].Screen,l[e(1178)].screen.id),l.core[e(1418)][e(413)]=!1,s.emit(s.Event.screen,!1,l[e(1178)].screen[e(915)]||e(1026))},l.core[r(1418)].label=n[r(1202)]()[r(1334)]||r(1288),l[r(1178)][r(1418)][r(1125)]=o,l[r(1178)].screen[r(1550)]=n,l.setVideoElementStream(l[r(1178)][r(1418)].videoElem,l[r(1178)][r(1418)][r(319)]),l[r(1178)].screen[r(413)]=!0,s[r(648)](s[r(1513)][r(1418)],!0,l.core[r(1418)][r(915)]||r(1026))}else l.core[r(1418)][r(319)]&&(l.stopMediaStream(l[r(1178)][r(1418)][r(319)]),l.wsUnPublish(l[r(858)][r(1091)],l[r(1178)][r(1418)].id)),l[r(1178)][r(1418)][r(413)]=!1,s.emit(s[r(1513)][r(1418)],!1,l.core[r(1418)][r(915)]||r(1026))},l[o(276)]=async function(e=null,t,r){const n=o;if(r){if(l.core[n(1189)][t]&&l[n(1178)][n(1189)][t].preview&&l[n(1178)][n(1189)][t][n(319)])return s.emit(s[n(1513)][n(1210)],r,t);!l[n(1178)][n(1189)][t]&&(l.core.cameraEx[t]={local:!0,audio:l[n(1408)][n(939)],video:l[n(1408)][n(1294)],tag:t,type:l[n(858)].Screen,candidate:[],layerIndex:-1,info:{app:"",rtc:"",act:0}});const o=l[n(1178)][n(1189)][t];e instanceof HTMLElement&&e!==o.videoElem&&(l[n(772)](e),o[n(464)]=e);let a={audio:l.options[n(939)],video:l.options[n(1294)]};a[n(741)]&&(a.video={frameRate:{ideal:l[n(1408)][n(1355)][0][n(477)]}});try{o[n(319)]=await navigator[n(624)][n(918)](a)}catch(e){if(i[n(1241)](n(234)+e),e.toString()[n(1248)](n(253))>=0)return s[n(648)](s[n(1513)].screenEx,!1,t);l[n(480)]({type:t,desc:n(1389),error:e})}o.stream[n(1120)]()[0][n(805)]=function(){const e=n;l[e(305)](l[e(858)].Screen,o.id,o[e(973)]),o[e(413)]=!1,s[e(648)](s[e(1513)][e(1210)],!1,t,o[e(915)]||e(1026))},o[n(915)]=o[n(319)][n(1120)]()[0][n(1202)]().displaySurface||n(1288),l[n(761)](o[n(464)],o[n(319)]),o.preview=!0,s[n(648)](s[n(1513)][n(1210)],!0,t,o[n(915)]||"share")}else{const e=l[n(1178)][n(1189)][t];e&&(e.stream&&(l.stopMediaStream(e[n(319)]),l.wsUnPublish(l[n(858)][n(1091)],e.id,e.tag)),e[n(413)]=!1),l[n(1440)](l[n(858)].Screen+"-"+t),s.emit(s[n(1513)][n(1210)],!1,t)}},l.customPreview=function(e,t,r,n,a){const c=o;let d=l[c(1178)].custom;if(r){if(d[c(413)])return s[c(648)](s[c(1513)][c(741)],r,d[c(319)]);"anonymous"!=e[c(1549)]("crossOrigin")&&e[c(892)](c(1233),c(792)),e[c(780)]=t,d[c(1283)]=e,d.tempMuteVideo=n,d[c(369)]=a,l[c(399)](e),l[c(772)](e),e[c(202)]=a,i[c(574)]("begin waitStreamTimer"),clearInterval(d[c(364)]),e[c(616)](c(220),l[c(329)]),e[c(720)](),d[c(364)]=setTimeout((()=>{const t=c;d[t(464)][t(650)](t(220),l.customCanPlay),l[t(471)](e),l[t(480)]({type:l[t(858)][t(1091)],subType:l[t(1382)].Custom,desc:"capture media stream error, timeout",error:{name:t(993)}})}),5e3)}else{if(!d)return;d[c(464)]&&(d[c(464)][c(1191)](),l[c(471)](d[c(464)])),clearInterval(d.canvasTimer),clearInterval(d.waitStreamTimer),d[c(319)]&&(l[c(1186)](d[c(319)]),l[c(305)](l[c(858)][c(1091)],d.id,"",l[c(1382)].Custom)),l[c(730)](d.audioTrack),l[c(730)](d[c(1550)]),d[c(1125)]=null,d[c(1550)]=null,d[c(413)]=!1,s[c(648)](s[c(1513)].custom,!1,d[c(915)])}},l.customCanPlay=function(){const e=o;let t=l[e(1178)][e(609)];t.tempVideoElem!==t[e(464)]&&(l[e(471)](t[e(464)]),t.videoElem=t.tempVideoElem),t[e(464)][e(650)](e(220),l[e(329)]),clearInterval(t[e(364)]),i[e(574)](e(163));let r=t[e(963)]?t[e(963)]:document[e(391)](e(963)),n=l[e(1408)][e(467)][0];t[e(963)]=r,r.setAttribute("width",n[e(1562)]),r[e(892)](e(683),n[e(683)]);let a=r.getContext("2d");clearInterval(t[e(1151)]),t[e(1151)]=setInterval((function(){const o=e;a[o(1069)](t[o(464)],0,0,r[o(1562)],r[o(683)])}),40);try{l.stopMediaTrack(t[e(1125)]),l[e(730)](t.videoTrack),t[e(1125)]=null,t[e(1550)]=null;let o=null;if(t.stream=new MediaStream,o=typeof t[e(464)].mozCaptureStream===e(733)?t[e(464)][e(1303)]():t[e(464)].mozCaptureStream(),!t[e(369)]&&(t[e(1125)]=o[e(781)]()[0]),!t[e(533)]){let o=r.captureStream(30);t[e(1550)]=o[e(1120)]()[0]}}catch(t){return i[e(1241)](e(1181)+t),l.emitPreviewError({type:l[e(858)][e(1091)],subType:l[e(1382)][e(442)],desc:e(1474),error:{name:"VideoError"}})}t[e(1550)]?t.stream[e(1378)](t[e(1550)]):i[e(1366)](e(1042)),t[e(1125)]?t[e(319)][e(1378)](t.audioTrack):i[e(1366)](e(923)),t.muteVideo=t[e(533)],t[e(1553)]=t[e(369)],t[e(413)]=!0,s[e(648)](s[e(1513)][e(609)],!0,t[e(915)],t[e(319)])},l[o(558)]=function(e,t){return new Promise((r=>{const o=L,n=e[o(464)],s=document[o(391)](o(963));let a=null;if(!s[o(1303)])return i[o(1366)](o(1188)),r();if(l[o(1408)][o(939)])return r();if(!l[o(1178)].camera[o(1125)])return i.logWarn(o(1039)),r();a=l[o(1178)][o(861)][o(1125)][o(1349)](),n[o(616)]("loadedmetadata",(function i(c){const d=o;n[d(650)](d(1518),i);const u=document[d(391)](d(741)),l=s[d(1566)]("2d"),p=c.currentTarget||c[d(1156)],m=p.videoWidth,f=p.videoHeight,b=new MediaStream;s[d(892)](d(1562),m),s[d(892)]("height",f),e[d(1033)]=setInterval((function(){const e=d;l[e(212)](0,0,s[e(1562)],s[e(683)]),l[e(1069)](n,0,0,s[e(1562)],s[e(683)])}),40),b.addTrack(a),b[d(1378)](s[d(1303)](t)[d(1120)]()[0]),u.muted=!0,u[d(958)]=b,u[d(720)](),e[d(319)]=b,e[d(709)]=u,r()}))}))},l[o(950)]=function(e,t,r){const n=o;if(!e[n(319)])return;e[n(319)][n(1043)]()[n(352)]((e=>{e.kind===t&&(e.enabled=!r)}))},l[o(1278)]=function(e="",t={},r=!1,n=""){const i=o;let s=r,a=null,c=!1;a=n===l.SubStreamType.Custom?l[i(1178)][i(609)]:l[i(1178)][e],t[i(326)](i(1553))&&(t[i(1553)]!==a[i(1553)]||r)&&(s=!0,a[i(1553)]=t[i(1553)],l[i(950)](a,l[i(987)][i(657)],t[i(1553)]),!r&&!t[i(1553)]&&(c=!0),l[i(1196)](l.LogType.UserAction,{action:l.UserAction.toggleMute,mediaType:l[i(1374)][i(657)],streamInfo:a})),t[i(326)](i(1369))&&(t[i(1369)]!==a[i(1369)]||r)&&(s=!0,a[i(1369)]=t[i(1369)],l[i(950)](a,l[i(987)][i(1429)],t[i(1369)]),!r&&!t[i(1369)]&&(c=!0),a[i(1369)]&&(a[i(997)]=!1),l[i(1196)](l[i(444)].UserAction,{action:l[i(196)].toggleMute,mediaType:a[i(585)]===l[i(858)].Camera?l[i(1374)].Video:l[i(1374)][i(1091)],streamInfo:a})),s&&a[i(1218)]&&l.wsUpdate(a.id,a.muteVideo,a.muteAudio),c&&l[i(1282)](a)},l.muteLocalStreamEx=function(e="",t={}){const r=o;let n=!1,i=!1,s=l[r(1178)][r(1189)][e];s&&(t[r(326)](r(1553))&&t[r(1553)]!==s.muteAudio&&(n=!0,s.muteAudio=t[r(1553)],l.muteStream(s,l[r(987)][r(657)],t[r(1553)]),!t.muteAudio&&(i=!0),l[r(1196)](l[r(444)][r(196)],{action:l[r(196)][r(258)],mediaType:l[r(1374)][r(657)],streamInfo:s})),t.hasOwnProperty(r(1369))&&t[r(1369)]!==s[r(1369)]&&(n=!0,s[r(1369)]=t[r(1369)],l[r(950)](s,l[r(987)][r(1429)],t[r(1369)]),!t[r(1369)]&&(i=!0),s[r(1369)]&&(s.systemMuteVideo=!1),l.triggerLogUpload(l[r(444)][r(196)],{action:l[r(196)][r(258)],mediaType:s[r(585)]===l.StreamType.Camera?l[r(1374)][r(1429)]:l[r(1374)][r(1091)],streamInfo:s})),n&&s[r(1218)]&&l[r(649)](s.id,s[r(1369)],s[r(1553)]),!s[r(573)]&&s.pc&&i&&(!l[r(1178)].userActionData[r(514)+s.id]&&(l[r(1178)].userActionData[r(514)+s.id]={}),l.core[r(613)][r(514)+s.id][r(1461)]=Date[r(542)](),l.checkStreamFirstUpload(s)))},l[o(345)]=function(e,t={}){const r=o;let n=l.getStreamInfo(e);if(n){let e=!1;t.hasOwnProperty("muteAudio")&&t[r(1553)]!==n[r(811)]&&(e=!0,n[r(811)]=t.muteAudio,l[r(950)](n,l[r(987)][r(657)],t[r(1553)]),l[r(1196)](l[r(444)].UserAction,{action:l[r(196)].toggleMute,mediaType:l.MediaType[r(657)],streamInfo:n})),t[r(326)](r(1369))&&t[r(1369)]!==n.localMuteVideo&&(e=!0,n[r(1574)]=t[r(1369)],l.muteStream(n,l[r(987)].Video,t[r(1369)]),l[r(1196)](l[r(444)][r(196)],{action:l[r(196)][r(258)],mediaType:n[r(585)]===l[r(858)].Camera?l.MediaType[r(1429)]:l[r(1374)][r(1091)],streamInfo:n})),e&&n[r(1218)]&&l[r(649)](n.id,n[r(1574)],n.localMuteAudio)}},l[o(269)]=function(e,t,r=!1){const n=o,a=()=>{const t=L;return l.ws[t(1531)]===WebSocket[t(1441)]&&e[t(260)]&&l[t(1178)][t(578)]};if(typeof e[n(1146)]===n(733)&&(e[n(1146)]=0),!a())return e.retry=0,void i.logInfo(n(261));if(!l[n(1408)][n(1192)]||e[n(1146)]>2||r){const r={...e};return e[n(1146)]=0,e.id&&l[n(199)](e.id),void l[n(694)](l[n(246)][n(458)],{publishID:r[n(530)],subscribeID:r.id,desc:t})}let c=1e3*e[n(1146)];e[n(408)]=setTimeout((()=>{const t=n;if(a()){const r=e.id;i[t(574)](t(523)+e[t(1146)]),l[t(199)](e.id),l[t(1162)](l.core[t(1096)],e.publishID),s[t(648)](s[t(1513)][t(269)],{publishID:e[t(530)],subscribeID:r,desc:t(785)})}}),c),e[n(1146)]++},l[o(1304)]=function(e="",t=!1){const r=o;let n,a;try{let t=JSON.parse(Base64[r(565)](e)),o=t[r(832)][r(382)](":"),i=o[0],s=o[1],c=t[r(168)];n=t[r(495)],s&&"80"!==s&&"443"!==s&&(n=":"+s+n),n=l[r(748)]("wss://"+(c||i)+n),a={name:r(421),type:r(1329),stamp:Date.now(),requestID:S(),content:{id:t[r(1503)],host:t[r(832)],secure:t[r(859)],signature:t[r(1243)],privateID:l[r(1178)][r(1354)],dType:l[r(1178)][r(1530)],quality:l.options[r(288)]?1:2,role:l[r(1178)][r(764)]}}}catch(e){if(t)return l[r(1201)]();i.logError("room service response error, token info error,",e[r(1214)]()),s.emit(s[r(1513)][r(1089)],l.ErrorCode.JoinError,r(1300)),l.triggerLogUpload(l[r(444)][r(1465)],{errorType:l[r(490)][r(1485)],errorCode:l[r(422)].Rtc[r(412)],errorDesc:r(629)+e[r(1214)]()})}l[r(475)](n,a,t)},l[o(475)]=function(e="",t={},r=!1){const n=o;l.ws&&(r&&l.ws.removeEventListener(n(1012),l[n(1178)][n(678)][n(1538)]),l.ws[n(1012)]()),0===l.core.status&&(l[n(1178)][n(1146)]=0,l.core[n(180)]=2);const s=l.core[n(678)];l.ws=new WebSocket(e),l.ws[n(616)](n(579),s[n(916)]=function(){const r=n;i.logInfo(r(902),e),l[r(1178)][r(1146)]=0,l[r(184)](t)}),l.ws[n(616)](n(903),s[n(385)]=function(e){l[n(1133)](e.data)}),l.ws[n(616)](n(1012),s.onClose=function(o){const s=n;i[s(1366)](s(1522)+(o?o[s(1071)]:""));const a=l.core[s(678)];if(l.ws[s(650)](s(579),a[s(916)]),l.ws[s(650)](s(903),a[s(385)]),l.ws.removeEventListener(s(1012),a[s(1538)]),l.ws[s(650)](s(1089),a[s(1319)]),0!==l[s(1178)].status)return 2===l[s(1178)][s(180)]?(l[s(1178)].retry++,void(l.core.retry<=3?(i.logInfo(s(1131)+l[s(1178)].retry),setTimeout((()=>{l[s(475)](e,t,r)}),1e3)):(l[s(1178)][s(180)]=0,l[s(1178)][s(1146)]=0,l.emitError(l[s(246)][s(995)],s(630))))):void(l[s(1408)][s(498)]&&l.ws?l.reconnect():(!l.options[s(498)]&&(i[s(1241)](s(259)),l[s(694)](l[s(246)].ConnectionError)),l[s(877)]()))}),l.ws.addEventListener(n(1089),s[n(1319)]=function(e){const t=n;i[t(1241)](t(1061),e),l.ws.close()})},l[o(337)]=function(){const e=o;return l.ws&&l.ws[e(1531)]===WebSocket.OPEN},l[o(1115)]=function(t={},r=null){const n=o;if(l.ws&&l.ws.readyState===WebSocket[n(1441)]){let r=t;t instanceof Object&&(r=JSON[n(1064)](t),l[n(1408)].debug&&t[n(340)]!==n(806)&&i[n(574)]("[WS-SEND]",r),r=function(t){const r=e;if(!t)return;let o=Base64.encode(t),n=o[r(1248)]("=")<0?0:o.length-o[r(1248)]("=");o=o[r(1272)](/=/g,"");let i=h(1,25),s="";for(let e=0,t=o.length;e<t;e++){let t=o[r(718)](e);s+=43===t||t>=47&&t<=57?String[r(721)](t):t>=65&&t<=90?String[r(721)](t+i>90?t+i-26:t+i):String[r(721)](t+i>122?t+i-26:t+i)}let a=Math.floor(Date.now()/1e3);return a=1e3*a+100*n+i,JSON.stringify({name:r(1414),type:r(1329),stamp:a,content:s})}(r)),l.ws[n(633)](r)}if(r)return r()},l[o(1133)]=function(t=""){const r=o,n={join:l[r(536)],leave:l.wsHandleLeave,publish:l[r(1077)],unpublish:l[r(1416)],subscribe:l[r(316)],unsubscribe:l.wsHandleUnsubscribe,negotiate:l[r(293)],update:l[r(820)],updateSubLayer:l[r(1193)],message:l[r(341)],ping:l.wsHandlePing,startLiveBroadcast:l[r(1519)],stopLiveBroadcast:l[r(1469)],updateInfo:l[r(1291)],updateRoom:l[r(476)],userJoined:l[r(1180)],userLeft:l[r(162)],streamAdded:l[r(1346)],streamRemoved:l[r(1238)],streamUpdated:l.wsHandleStreamUpdated,layerReqChanged:l[r(1360)],mixer:l[r(1479)],webpage:l[r(151)],infoUpdated:l.wsHandleInfoUpdated,roomUpdated:l.wsHandleRoomUpdated,netStatChanged:l[r(518)],updateNetStat:l.wsHandleUpdateNetStat,kick:l[r(420)],role:l[r(1226)]};let s;try{s=JSON.parse(t)}catch(e){return i[r(1241)](r(614)+t+", "+e)}return s&&s[r(326)](r(340))&&s[r(1462)]?"guardian"===s[r(340)]?l[r(1133)](function(t=0,r="",o){const n=e;if(!t||!r)return;let i,s=Math.floor(t%1e3),a=Math[n(826)](s/100),c=Math[n(826)](s%100),d="";for(let e=0,t=r.length;e<t;e++){let t=r[n(718)](e);d+=43===t||t>=47&&t<=57?String[n(721)](t):t>=65&&t<=90?String[n(721)](t-c<65?t-c+26:t-c):String[n(721)](t-c<97?t-c+26:t-c)}for(let e=0;e<a;e++)d+="=";try{i=Base64.decode(d)}catch(e){return o[n(1241)](n(610))}return i}(s[r(640)],s.content,l[r(965)])):n.hasOwnProperty(s.name)?(l[r(1408)][r(1209)]&&s[r(340)]!==r(806)&&i[r(574)](r(1433),t),n[s[r(340)]](s)):i[r(1241)](r(347)+s.name):i[r(1241)](r(227)+t)},l[o(184)]=function(e){l[o(1115)](e)},l[o(536)]=function(e={}){const t=o;if(!e[t(1462)][t(669)])return l[t(1178)][t(180)]=0,l.ws[t(1012)](),l[t(694)](l.ErrorCode[t(995)]),void l.triggerLogUpload(l[t(444)].Error,{errorType:l.LogErrorType[t(1485)],errorCode:l.LogErrorCode[t(1485)][t(1546)],errorDesc:"join respond error, requestID: "+e[t(1394)]});if(0!==e.content[t(669)][t(1071)])return i[t(1241)](t(673),e[t(1462)][t(669)].code,e[t(1462)][t(669)].detail),l[t(1178)].status=0,l.ws[t(1012)](),l[t(694)](l.ErrorCode[t(995)]),void l.triggerLogUpload(l[t(444)][t(1465)],{errorType:l[t(490)][t(1485)],errorCode:l[t(422)][t(1485)][t(1546)],errorDesc:t(798)+e[t(1394)]+t(879)+e[t(1462)][t(669)].code});let r=1===l.core[t(180)];l[t(1178)].status=1,l[t(1111)]({session:e[t(578)],stunURL:e[t(1462)][t(502)],turnURL:e[t(1462)][t(1472)],turnUser:e[t(1462)][t(1475)],turnPwd:e.content.turnPwd,userToken:e[t(1462)][t(1148)],curVideoQuality:e[t(1462)][t(317)]}),l[t(1167)](e.content[t(1200)]||[],e.content[t(637)]),l[t(1509)]();let n=JSON.parse(JSON.stringify(e.content[t(1200)]||[]));r&&(n=n[t(933)]((e=>e[t(1096)]!==l[t(1178)][t(1096)]))),s[t(648)](r?s[t(1513)][t(1034)]:s[t(1513)].joined,n,{mixer:e.content[t(1199)]||[],webpage:e[t(1462)][t(465)]||[]}),l[t(1178)][t(613)][t(421)][t(1035)]=Date[t(542)](),l.triggerLogUpload(l[t(444)][t(196)],{action:l[t(196)][t(368)],reconnected:r}),l[t(1408)].enableLogUpload&&(l[t(583)](),l[t(248)]()),l[t(868)](!0,l[t(1408)][t(1271)])},l.wsPing=function(){const e=o;if(l[e(806)])try{clearInterval(l.ping),delete l[e(806)]}catch(t){i[e(1366)](t)}l[e(806)]=setInterval((()=>{const t=e;l.ws&&l.ws[t(1531)]===WebSocket[t(1441)]&&l[t(1115)]({name:t(806),type:t(1329),requestID:S(),stamp:Date[t(542)]()})}),l.options.websocketPingInterval)},l[o(1570)]=function(e={}){const t=o;let r=e[t(1462)][t(167)];l[t(806)]&&r!==l.options[t(1198)]&&(l[t(1408)][t(1198)]=r,l[t(1509)]()),l[t(1115)]({name:t(806),type:"notify",requestID:e[t(1394)],stamp:Date[t(542)]()})},l.wsLeave=function(){const e=o;l[e(1115)]({name:e(183),type:e(1329),stamp:Date[e(542)](),session:l.core[e(578)],requestID:S(),content:{userID:l[e(1178)][e(1096)],meetingID:l.core[e(1351)]}},(()=>{const t=e;l.ws[t(1012)]()}))},l.wsHandleLeave=function(){},l[o(1180)]=function(e={}){const t=o;if(!e[t(1462)])return;let r=e[t(1462)][t(1096)],n=e[t(1462)][t(1530)];r!==l[t(1178)][t(1096)]&&(l[t(1178)][t(1200)][r]={uid:r,dType:n,streams:[]},s[t(648)](s.Event[t(1088)],e[t(1462)][t(1096)]))},l[o(162)]=function(e={}){const t=o;if(!e[t(1462)])return;let r=e[t(1462)][t(1096)];r!==l[t(1178)].userID&&(l[t(1178)][t(1200)][r]&&(l[t(1178)][t(1200)][r][t(660)].forEach((e=>{const r=t;l[r(1178)][r(425)][e]&&(l[r(1178)][r(425)][e].id&&l[r(1178)][r(425)][e][r(1218)]?l[r(847)](l[r(1178)][r(425)][e],!0):delete l[r(1178)][r(425)][e])})),delete l.core[t(1200)][r]),s[t(648)](s[t(1513)].someoneLeft,e[t(1462)][t(1096)]))},l[o(822)]=function(e="",t="",r="",n=""){const i=o;let s=null;s=t?l[i(1178)].cameraEx[t]:n===l.SubStreamType.Custom?l.core[i(609)]:l[i(1178)][e],""!==r&&(s[i(1552)][i(952)]=1|s[i(1552)][i(952)],s[i(1552)][i(373)]=r||"");let a=0,c=l[i(632)](s);c.forEach((e=>a+=e.targetBw||0)),s[i(1055)]=s[i(585)]===l[i(858)].Screen?0:-1;const d=S();if(l[i(1178)][i(613)][i(514)+d]={publishBegin:Date[i(542)]()},t){if(!s)return;s[i(260)]=d;let r={userID:l[i(1178)][i(1096)],minVideoBw:0,maxVideoBw:a,label:s[i(319)].id,type:e,tag:t||"",video:s.video,audio:s[i(445)],muteVideo:!!s[i(1369)],muteAudio:!!s.muteAudio,layers:c};s[i(1552)][i(952)]>0&&(r[i(1552)]=s[i(1552)].app),l.wsSender({name:i(626),type:i(1329),stamp:Date[i(542)](),session:l.core[i(578)],requestID:s[i(260)],content:r}),s[i(1552)].act=0}else{s.lastRequestID=d;let t={userID:l[i(1178)][i(1096)],minVideoBw:0,maxVideoBw:a,label:s[i(319)].id,type:e,video:!!s[i(1550)],audio:!!s[i(1125)],muteVideo:s[i(1369)],muteAudio:s[i(1553)],layers:c};l.core[e][i(1552)][i(952)]>0&&(t.info=s[i(1552)][i(373)]),l[i(1115)]({name:"publish",type:i(1329),stamp:Date.now(),session:l[i(1178)][i(578)],requestID:s[i(260)],content:t}),s[i(1552)].act=0}},l[o(1077)]=function(e={}){const t=o;if(!e[t(1462)][t(669)]||!e[t(1394)])return i[t(1241)](t(1184)),void l[t(1196)](l[t(444)][t(1465)],{errorType:l[t(490)][t(1485)],errorCode:l[t(422)].Rtc[t(1164)],errorDesc:t(666)+e[t(1394)]});let r=l[t(1565)](e[t(1394)],l[t(285)][t(215)]);if(!r)return i[t(1366)](t(1036)+e[t(405)]),void l.triggerLogUpload(l[t(444)].Error,{errorType:l.LogErrorType.Rtc,errorCode:l[t(422)][t(1485)][t(1164)],errorDesc:"publish error, requestID: "+e.requestID+", no localStream data"});let n=r.type,s=r[t(846)],a=r[t(973)];if(i[t(574)]("wsHandlePublish("+JSON[t(1064)](e)+")"),0!==e[t(1462)][t(669)].code)return i[t(574)](t(1263)+e[t(1462)].result[t(1071)]+t(1177)+a),i.logInfo(t(1284)+(e.content.result[t(1071)],e[t(1462)][t(669)][t(899)])),i.logWarn(t(1569),e[t(1462)][t(669)][t(1071)],e[t(1462)][t(669)].detail),l[t(694)](l[t(246)][t(1183)],{type:n,subType:s,tag:a,desc:t(1448)}),void l[t(1196)](l[t(444)][t(1465)],{streamInfo:r,errorType:l.LogErrorType[t(1485)],errorCode:l[t(422)][t(1485)][t(1164)],errorDesc:t(692)+e.requestID+", code not zero"});r.id&&l[t(1500)](r),r.id=e[t(1462)][t(530)];let c=l[t(632)](r);clearInterval(r[t(1542)]),l[t(1185)](l.StreamRole[t(215)],r,c).then((e=>{l[t(985)](r.id,"offer",e,0)}))},l[o(305)]=function(e="",t="",r="",n=""){const i=o;t&&(!l.core[i(613)][i(953)+t]&&(l[i(1178)][i(613)][i(953)+t]={}),l[i(1178)].userActionData["unpublish-"+t].unpublishBegin=Date[i(542)]());let s=()=>{const o=i;r?l[o(1178)].cameraEx[r]&&l.core[o(1189)][r].id&&l[o(1178)][o(1189)][r].id===t&&(l[o(1178)].userActionData[o(953)+t][o(880)]={...l[o(1178)].cameraEx[r]},l[o(847)](l[o(1178)][o(1189)][r])):n===l[o(1382)][o(442)]?l[o(1178)][o(609)].id&&l[o(1178)][o(609)].id===t&&(l[o(1178)][o(613)][o(953)+t][o(880)]={...l[o(1178)][o(609)]},l[o(847)](l[o(1178)][o(609)])):l.core[e].id&&l[o(1178)][e].id===t&&(l.core[o(613)]["unpublish-"+t][o(880)]={...l[o(1178)][e]},l[o(847)](l[o(1178)][e]))};t||r?l[i(1115)]({name:i(946),type:"request",stamp:Date[i(542)](),session:l[i(1178)][i(578)],requestID:S(),content:{userID:l.core[i(1096)],publishID:t||(n===l[i(1382)][i(442)]?l.core.custom.id:l.core[e].id)}},s):s()},l.wsHandleUnPublish=function(e){const t=o;if(!e.content[t(669)]||!e[t(1394)])return i[t(1241)](t(1182));l[t(1178)][t(613)][t(953)+e[t(1462)][t(530)]].unpublishEnd=Date[t(542)](),l[t(1178)][t(613)][t(953)+e[t(1462)][t(530)]][t(880)]&&l[t(1196)](l[t(444)].UserAction,{action:l[t(196)][t(547)],streamInfo:l[t(1178)][t(613)][t(953)+e[t(1462)].publishID][t(880)]})},l[o(1162)]=function(e,t){const r=o;l[r(1178)][r(425)][t][r(1055)]<0&&(l.core[r(425)][t][r(1055)]=0),!l[r(1178)][r(613)][r(494)+t]&&(l[r(1178)][r(613)][r(494)+t]={}),l[r(1178)].userActionData[r(494)+t][r(156)]=Date.now(),l[r(1178)][r(425)][t][r(260)]=S();let n=l.core[r(425)][t][r(1107)][r(1445)](-1)[0][r(520)]||3e6,i=!1,s=!1,a=0;try{i=l[r(1178)].publishers[t][r(1574)],s=l[r(1178)][r(425)][t][r(811)],a=l[r(1178)][r(425)][t][r(1055)]}catch(e){}let c={name:r(1256),type:"request",stamp:Date.now(),session:l[r(1178)][r(578)],requestID:l.core[r(425)][t].lastRequestID,content:{userID:l[r(1178)][r(1096)],publishID:t,maxVideoBw:n,video:l[r(1178)][r(425)][t][r(741)],audio:l[r(1178)][r(425)][t].audio,muteVideo:i,muteAudio:s,layerIndex:a}};l[r(1115)](c)},l[o(316)]=function(e){const t=o;if(!e[t(1462)][t(669)]||!e[t(1394)])return i[t(1241)](t(1330)),void l.triggerLogUpload(l[t(444)][t(1465)],{errorType:l[t(490)][t(1485)],errorCode:l[t(422)][t(1485)][t(566)],errorDesc:"subscribe error, bad response, params: "+JSON[t(1064)](e)});let r=l[t(1565)](e[t(1394)]);if(!r)return i[t(1366)](t(295)+e.requestID),void l[t(1196)](l[t(444)][t(1465)],{errorType:l[t(490)][t(1485)],errorCode:l.LogErrorCode[t(1485)][t(566)],errorDesc:t(1358)+JSON.stringify(e)});if(0!==e[t(1462)][t(669)][t(1071)])return i[t(1366)](t(680),e[t(1462)].result[t(1071)],e[t(1462)].result.detail),l[t(269)](r,t(1157)),void l.triggerLogUpload(l[t(444)][t(1465)],{streamInfo:r,errorType:l[t(490)][t(1485)],errorCode:l[t(422)][t(1485)].Subscribe,errorDesc:t(1084)+JSON[t(1064)](e)});let n=e[t(1462)][t(530)],s=e[t(1462)][t(1457)];l[t(1178)].publishers[n].id=s,l.createRtcPeerConn(l.StreamRole[t(938)],l[t(1178)][t(425)][n]).then((e=>{const r=t;e&&l[r(985)](s,r(1024),e)}))},l.wsUnsubscribe=function(e="",t=null){const r=o,n=l[r(1512)](e),i=l[r(1178)][r(425)][n];i&&(l[r(1178)][r(613)][r(1386)+e]={unsubscribeBegin:Date[r(542)](),streamInfo:{...i}}),l[r(1115)]({name:r(1548),type:r(1329),stamp:Date[r(542)](),session:l.core[r(578)],requestID:S(),content:{userID:l[r(1178)][r(1096)],subscribeID:e}},(()=>{const o=r;i&&i.id===e&&l[o(847)](i),t instanceof Function&&t()}))},l[o(211)]=function(e){const t=o;if(!e[t(1462)][t(669)]||!e[t(1394)])return i[t(1241)](t(763));l[t(1178)][t(613)]["unsubscribe-"+e[t(1462)].subscribeID]&&(l[t(1178)][t(613)][t(1386)+e[t(1462)][t(1457)]].unsubscribeEnd=Date[t(542)](),l[t(1196)](l[t(444)].UserAction,{action:l.UserAction[t(724)],streamInfo:l[t(1178)][t(613)]["unsubscribe-"+e.content[t(1457)]].streamInfo}))},l[o(985)]=function(e,t,r,n=3e6,i=null){const s=o;if(!r)return;let a={name:s(1025),type:s(1329),stamp:Date[s(542)](),session:l[s(1178)].session,requestID:S(),content:Object[s(867)]({userID:l[s(1178)][s(1096)],streamID:e,type:t,sdp:r,maxVideoBw:n},i)};"renego"===t&&(l[s(1178)][s(838)][a[s(1394)]]=e),l[s(1115)](a)},l[o(293)]=function(e={}){const t=o;i[t(574)](t(287)+e[t(585)]+t(332)+JSON[t(1064)](e));let r=e[t(585)];if([l[t(677)][t(1516)],l[t(677)][t(794)]][t(1248)](r)<0)return i.logError(t(362)),void l[t(1196)](l[t(444)][t(1465)],{errorType:l[t(490)][t(1485)],errorCode:l.LogErrorCode[t(1485)][t(566)],errorDesc:"negotiate error, bad msg type, params: "+JSON.stringify(e)});let n=e.content[t(1494)],a=e[t(1394)];if(!n)return n=l[t(1178)][t(838)][a],n?l[t(1099)](n):(i[t(1366)](t(876)),void l[t(1196)](l[t(444)][t(1465)],{errorType:l[t(490)].Rtc,errorCode:l[t(422)].Rtc[t(566)],errorDesc:"negotiate error, stream id not found, params: "+JSON[t(1064)](e)}));a&&delete l.core[t(838)][a];let c=l[t(1174)](n);if(!c)return l[t(1196)](l[t(444)][t(1465)],{errorType:l[t(490)].Rtc,errorCode:l[t(422)].Rtc[t(566)],errorDesc:t(244)+JSON.stringify(e)}),i[t(1366)](t(1541)+n);if(r===l[t(677)][t(794)]){if(i[t(574)](t(622)+JSON[t(1064)](e)),e[t(1462)][t(585)]===t(1218)){let e=!!c[t(1218)];if(c.ready=!0,e)i[t(574)](n,t(914));else if(c[t(711)])c[t(973)]?c[t(585)]===l.StreamType[t(1372)]?s[t(648)](s[t(1513)][t(686)],n,c[t(973)]):s[t(648)](s[t(1513)][t(549)],n,c[t(973)]):c[t(846)]===l[t(1382)].Custom?s[t(648)](s.Event[t(1390)],n,c.type,c[t(915)]):s.emit(s.Event[t(675)],n,c[t(585)],c[t(915)]),l.muteLocalStream(c.type,{muteAudio:c[t(1553)],muteVideo:c[t(1369)]},!0,c[t(846)]),l.core.muteAllStreamAudio&&(c[t(659)]=c[t(1553)],c.tag?l.muteLocalStreamEx(c.tag,{muteAudio:!0}):l[t(1278)](c[t(585)],{muteAudio:!0},!1,c[t(846)])),l.core[t(613)]["publish-"+c[t(260)]]&&(l[t(1178)][t(613)][t(514)+c.id]={publishBegin:l[t(1178)][t(613)][t(514)+c[t(260)]][t(1461)],publishEnd:Date[t(542)]()},delete l[t(1178)][t(613)]["publish-"+c[t(260)]]),l[t(1196)](l[t(444)][t(196)],{action:l.UserAction[t(1059)],streamInfo:c});else{let e=l[t(1512)](n);if(!c.pc)return void l[t(269)](c,t(1353)+e+t(1158)+c.ready);c[t(1146)]=0,s[t(648)](s.Event.subscribed,n,e,c[t(973)]),c.weak&&l[t(518)]({content:{streamID:n,weak:!0}}),l[t(1178)][t(1295)]&&(c[t(1533)]=c.localMuteAudio,l[t(345)](n,{muteAudio:!0})),l[t(1178)][t(613)][t(494)+e][t(395)]=Date[t(542)](),l[t(1196)](l[t(444)].UserAction,{action:l[t(196)][t(601)],streamInfo:c}),l[t(1196)](l[t(444)][t(196)],{action:l[t(196)][t(258)],mediaType:l.MediaType.Audio,streamInfo:c}),l[t(1196)](l[t(444)][t(196)],{action:l[t(196)].toggleMute,mediaType:c[t(585)]===l[t(858)][t(1372)]?l.MediaType[t(1429)]:l[t(1374)][t(1091)],streamInfo:c})}return}if(e[t(1462)][t(585)]===t(252))return i[t(1366)](t(1117)+c.id+", params:"+JSON.stringify(e)),l.restartRtcPeerConn(c),void l[t(1196)](l[t(444)][t(1465)],{streamInfo:c,errorType:l[t(490)][t(1485)],errorCode:c[t(711)]?l[t(422)][t(1485)][t(1164)]:l.LogErrorCode.Rtc[t(566)],errorDesc:"negotiate error, type: failed, streamID: "+n+t(1216)+a});if("error"===e.content[t(585)])return i[t(1366)]("negotiate notify error, params:"+JSON.stringify(e)),l[t(1099)](n),void l.triggerLogUpload(l[t(444)][t(1465)],{streamInfo:c,errorType:l[t(490)][t(1485)],errorCode:c[t(711)]?l[t(422)][t(1485)][t(1164)]:l[t(422)][t(1485)][t(566)],errorDesc:t(607)+n+t(1216)+a})}if(r===l[t(677)][t(1516)]&&0!==e[t(1462)][t(669)][t(1071)]){let r=e.content[t(669)][t(1071)],o=e[t(1462)][t(669)].detail,s=c.type,d=c.subType,u=c.tag,p=u?s+"-"+u:s,m=c.publishID,f=c.id;return c[t(711)]?(l.wsUnPublish(s,f,u,d),i[t(1366)]("negotiate error, local",p,r+" "+o),i.logInfo(t(978)+c[t(1218)]),l[t(694)](l[t(246)][t(1183)],{type:s,subType:d,tag:u,publishID:f,desc:"exT:"+p+t(771)+r+t(784)+o})):(i[t(1366)](t(664),m,r+" "+o),l[t(269)](c,t(417),!0)),c.id="",void l[t(1196)](l[t(444)][t(1465)],{streamInfo:c,errorType:l[t(490)][t(1485)],errorCode:c[t(711)]?l[t(422)][t(1485)][t(1164)]:l.LogErrorCode.Rtc[t(566)],errorDesc:t(1308)+n+", requestID: "+a+t(879)+r+", detail: "+o})}let d=c.pc,u=e[t(1462)].sdp,p=c[t(1415)];if(r===l[t(677)][t(794)]&&e[t(1462)][t(585)]===t(1011)&&u){if(!c.pc)return void l[t(269)](c,t(1353)+c[t(530)]+t(1158)+c.ready);l[t(1559)](d,u)[t(1419)]((e=>{const r=t;e&&l.triggerLogUpload(l[r(444)][r(1465)],{streamInfo:c,errorType:l[r(490)][r(1485)],errorCode:c.local?l[r(422)][r(1485)][r(1164)]:l.LogErrorCode.Rtc[r(566)],errorDesc:r(1487)+e[r(1214)]()+", sdp:"+u})}))}if(p&&p[t(532)]>0){let e=p[t(1265)]();l[t(985)](n,"candidate","a="+e[t(1273)],0,{sdpMLineIndex:e.sdpMLineIndex,sdpMid:e[t(769)]})}},l[o(1346)]=function(e){const t=o;let r=e[t(1462)][t(1096)],n=e[t(1462)][t(319)];!l[t(1178)].users[r]&&(i[t(1366)](t(323)),l.core[t(1200)][r]={uid:r,streams:{}}),l.core.users[r][t(660)].push(n.publishID),l.core[t(425)][n[t(530)]]=Object[t(867)]({uid:r,dType:l[t(1178)][t(1200)][r].dType,local:!1,ready:!1,localMuteAudio:!1,localMuteVideo:!1,candidate:[]},n),s[t(648)](s.Event.streamAdded,r,n)},l[o(1238)]=function(e={}){const t=o;let r=e[t(1462)][t(1096)],n=e[t(1462)][t(530)];if(r===l[t(1178)].userID)Object[t(834)](l.StreamType).forEach((e=>{const r=t;l[r(1178)][e].id===n&&(l.closeRtcPeerConn(l.core[e]),l[r(1178)][e].id="",l[r(1178)][e][r(1415)]=[],l[r(1178)][e][r(1218)]=!1,l[r(822)](e,"",l[r(1178)][e][r(1552)]?l[r(1178)][e][r(1552)].app:"",l.core[e][r(846)]))}));else{if(!l[t(1178)].users[r]||l[t(1178)][t(1200)][r][t(660)].indexOf(n)<0)return;l.core[t(425)][n]&&l[t(1178)].publishers[n].id&&l[t(199)](l[t(1178)][t(425)][n].id),l[t(847)](l[t(1178)].publishers[n],!0),s[t(648)](s[t(1513)][t(1529)],r,n)}},l[o(649)]=function(e="",t=!1,r=!1){const n=o;l[n(1115)]({name:n(1150),type:n(1329),stamp:Date[n(542)](),session:l[n(1178)].session,requestID:S(),content:{userID:l[n(1178)][n(1096)],streamID:e,muteVideo:t,muteAudio:r}})},l[o(820)]=function(e){},l[o(866)]=function(e="",t=0){const r=o;l[r(1115)]({name:r(206),type:"request",stamp:Date[r(542)](),session:l[r(1178)][r(578)],requestID:S(),content:{userID:l[r(1178)][r(1096)],streamID:e,layerIndex:t}})},l[o(1193)]=function(e={}){},l[o(1360)]=function(e={}){const t=o;let r=e.content[t(1494)];if(l[t(1178)][t(861)].id===r)l[t(1178)][t(861)][t(1055)]=e[t(1462)][t(1055)],l[t(713)](l[t(1178)][t(861)],l[t(1408)][t(300)],e[t(1462)][t(1055)]),l.routineCheckStreamFirstUpload(l[t(1178)].camera);else if(l[t(1178)][t(1418)].id===r)l[t(1178)][t(1418)][t(1055)]=e[t(1462)][t(1055)],l.routineCheckStreamFirstUpload(l[t(1178)][t(1418)]);else if(l[t(1178)][t(609)].id===r)l[t(1178)].custom[t(1055)]=e[t(1462)][t(1055)],l[t(1282)](l[t(1178)][t(609)]);else{let o=Object[t(834)](l[t(1178)].cameraEx)[t(409)]((e=>e.id===r));if(!o)return;o[t(1055)]=e[t(1462)].layerIndex,o[t(585)]===l[t(858)][t(1372)]&&l[t(713)](o,l[t(1408)].cameraExLayers,e[t(1462)][t(1055)]),l[t(1282)](o)}},l[o(787)]=function(e){const t=o;let r=e[t(1462)].publishID,n=e[t(1462)].muteVideo,a=e[t(1462)].muteAudio;l[t(1178)].publishers[r]?(l[t(1178)][t(425)][r][t(1553)]!==a&&(l[t(1178)][t(425)][r][t(1553)]=a,i.logInfo("[streamUpdated] uid:"+l[t(1178)][t(425)][r][t(612)]+t(1466)+r+", muteAudio:"+a),s[t(648)](s.Event[t(595)],l[t(1178)][t(425)][r][t(612)],r,l[t(987)].Audio,a)),l[t(1178)][t(425)][r][t(1369)]!==n&&(l[t(1178)][t(425)][r][t(1369)]=n,i.logInfo(t(975)+l[t(1178)][t(425)][r].uid+t(1466)+r+", muteVideo:"+n),s[t(648)](s[t(1513)][t(595)],l[t(1178)][t(425)][r][t(612)],r,l[t(987)].Video,n))):i[t(1366)](t(225)+r+", params:"+JSON[t(1064)](e))},l[o(1141)]=function(e){const t=o;l[t(1115)]({name:t(789),type:t(1329),stamp:Date.now(),session:l[t(1178)][t(578)],requestID:S(),content:{streams:e}})},l.wsHandleUpdateInfo=function(e){const t=o;let r=e[t(1462)].result;(!r||0!==r[t(1071)])&&i[t(1366)](t(370),r[t(899)])},l[o(1032)]=function(e){const t=o;if(e[t(1462)][t(660)]&&e.content[t(660)].length>0){let r=JSON[t(562)](JSON[t(1064)](e.content[t(660)]));s[t(648)](s[t(1513)][t(343)],r)}},l[o(1413)]=function(e="",t=null){const r=o;l.wsSender({name:"message",type:r(1329),stamp:Date.now(),session:l[r(1178)][r(578)],requestID:S(),content:{userID:l[r(1178)][r(1096)],userList:t,msgType:t?"multicast":r(1495),dataType:"string",data:e}})},l.wsHandleMessage=function(e={}){const t=o;if(e[t(585)]===t(509)){let r=e[t(1462)][t(1096)],o=e[t(1462)][t(450)];s.emit(s[t(1513)][t(903)],r,o)}},l[o(251)]=function(e,t,r,n,i,s,a,c,d,u){const p=o;let m={name:p(1199),type:p(1329),stamp:Date[p(542)](),session:l.core[p(578)],requestID:S(),content:{cmd:t,task:e}};r&&(m[p(1462)][p(585)]=r),n&&(m[p(1462)].layout=n),i&&(m[p(1462)][p(1200)]=i),s&&(m.content[p(598)]=s),a&&(m[p(1462)][p(700)]=a),(c||d||u)&&(m[p(1462)].autoInsertScreen=c||!1,m[p(1462)][p(219)]=d||!1,m[p(1462)][p(753)]=u||!1),l[p(1115)](m)},l[o(1479)]=function(e){const t=o;if(e[t(585)]===t(509))return l[t(546)](e);let r=e[t(1462)][t(669)]&&0===e[t(1462)][t(669)][t(1071)],n=e[t(1462)][t(904)]||"",i=e[t(1462)][t(817)]||"";return r?n?s[t(648)](s.Event.mixerTask,l[t(1178)][t(1096)],n,i):void 0:l[t(694)](l.ErrorCode[t(1240)],{taskID:n,cmd:i})},l[o(546)]=function(e){const t=o;let r=e[t(1462)];if(!r)return;let n=r.uid,i=r[t(904)],a=r.cmd,c=r[t(598)],d=r[t(1200)],u=r[t(1425)],p=r[t(700)],m=r.autoInsertScreen,f=r[t(219)],b=r[t(753)];i&&(a===l[t(734)][t(339)]?s[t(648)](s[t(1513)][t(157)],n,i,a,d,u,c,p,m,f,b):a===l[t(734)].Update?s.emit(s[t(1513)][t(157)],n,i,a,d,u):s[t(648)](s[t(1513)][t(157)],n,i,a))},l[o(1393)]=function(e,t,r,n,i,s,a,c,d,u){const p=o;let m={name:p(465),type:p(1329),stamp:Date[p(542)](),session:l[p(1178)][p(578)],requestID:S(),content:{task:e,cmd:t}};r&&(m[p(1462)].type=r,m[p(1462)].bps=n,m.content[p(388)]=i,m[p(1462)][p(1562)]=s,m.content[p(683)]=a,m[p(1462)].url=c,m[p(1462)][p(598)]=d,m[p(1462)][p(700)]=u),l.wsSender(m)},l[o(151)]=function(e){const t=o;if(e[t(585)]===t(509))return l[t(919)](e);let r=e.content[t(669)]&&0===e[t(1462)].result.code,n=e[t(1462)][t(904)]||"",a=e[t(1462)].cmd||"";return r?n?s.emit(s[t(1513)][t(1402)],l[t(1178)][t(1096)],n,a):void 0:(i.logError(t(705)+JSON[t(1064)](e)),l[t(694)](l.ErrorCode[t(841)],{taskID:n,cmd:a}))},l[o(919)]=function(e){const t=o;let r=e[t(1462)][t(904)]||"",n=e[t(1462)][t(817)]||"",s=e[t(1462)][t(1071)],a=e[t(1462)][t(899)];return i[t(1241)](t(1517)+JSON[t(1064)](e)),l[t(694)](l[t(246)][t(841)],{taskID:r,cmd:n,code:s,desc:a})},l[o(1535)]=function(){const e=o;let t={name:e(586),type:e(1329),stamp:Date[e(542)](),session:l.core[e(578)],requestID:S(),content:{quality:l.options[e(288)]?1:2}};l.wsSender(t)},l[o(476)]=function(e){const t=o;!(e[t(1462)]&&e.content[t(669)]&&0===e[t(1462)].result[t(1071)])&&(l[t(1408)][t(288)]=!l[t(1408)][t(288)]),s[t(648)](s[t(1513)][t(1246)],{hdQualityPriority:l.options[t(288)]})},l[o(600)]=function(e){const t=o;if(e[t(1462)]&&e[t(1462)][t(317)]){const r=e.content[t(317)];l[t(1178)][t(813)]!==r&&(l[t(1178)][t(813)]=e[t(1462)][t(317)],l[t(1178)][t(861)].pc&&l[t(713)](l[t(1178)][t(861)],l.options.cameraLayers,l[t(1178)][t(861)][t(1055)]||0),Object[t(834)](l[t(1178)][t(1189)])[t(352)]((e=>{const r=t;e.pc&&l[r(713)](e,l[r(1408)][r(981)],e[r(1055)]||0)})))}},l.wsUpdateNetStat=function(e,t,r){const n=o;i[n(574)](n(1338)+e+n(799)+t+n(857)+r);const s={name:n(786),type:"request",stamp:Date[n(542)](),session:l[n(1178)].session,requestID:S(),content:{userID:e,streamID:t,weak:r}};l[n(1115)](s)},l[o(390)]=function(){},l[o(518)]=function(e){const t=o,{streamID:r,weak:n}=e[t(1462)],s=l[t(1174)](r);if(i.logInfo("[wsHandleNetStatChanged] msgtype:"+e[t(585)]+", params:"+JSON[t(1064)](e)),s&&!s[t(1369)]){s[t(585)]!==l[t(858)][t(1091)]&&(s[t(1280)]=n),s[t(324)]=n;let e=l.core[t(403)][t(986)][r];!e&&(e={id:r,level:1e-9},l[t(1178)][t(403)][t(986)][r]=e),e[t(1313)]=!0,l.emitNetworkReport()}},l.wsHandleKick=function(e){const t=o,{by:r,uid:n,ip:a,code:c,detail:d}=e.content;i.logInfo("kick: "+JSON[t(1064)](e[t(1462)])),l[t(1115)]({name:t(242),type:"response",stamp:Date[t(542)](),session:l[t(1178)].session,requestID:S()}),l.leaveRoom(),s[t(648)](s[t(1513)].kick,r,n,c,d)},l[o(1443)]=function(e){const t=o;l.wsSender({name:t(1195),type:t(1329),stamp:Date[t(542)](),session:l[t(1178)][t(578)],requestID:S(),content:{role:e}})},l[o(1226)]=function(e){},l[o(1185)]=async function(e="",t={},r=[]){const n=o;let s={iceServers:[{urls:[l[n(1178)].stunURL]}],iceTransportPolicy:n(1095),iceCandidatePoolSize:0};l[n(1178)][n(1472)]&&s[n(440)][n(1129)]({urls:[l[n(1178)][n(1472)]],username:l.core[n(1475)],credential:l[n(1178)][n(991)]}),t.pc=new RTCPeerConnection(s),t.pc[n(722)]=e=>l.onIceCandidate(t,e),t.pc.oniceconnectionstatechange=e=>l.onIceStateChange(t,e),t.pc[n(217)]=e=>l[n(815)](t,e),e===l[n(285)][n(215)]?t[n(585)]!==l.StreamType[n(1372)]||t.tag?t.stream&&(t.subType===l.SubStreamType[n(442)]&&!t[n(1125)]&&t.pc[n(1081)](n(445),{direction:n(267),streams:[t[n(319)]]}),t[n(319)][n(1043)]()[n(352)]((e=>{const r=n;t.pc.addTrack(e,t[r(319)])}))):(t.audioTrack&&t.pc.addTrack(t.audioTrack,t[n(319)]),t[n(1550)]&&t.pc[n(1378)](t[n(1550)],t[n(319)]),l[n(949)](t.pc)):t.pc[n(1021)]=async function(e){const r=n;if(e[r(1172)]&&(t[r(319)]=e[r(660)][0],e[r(1172)][r(1502)]===l[r(987)][r(1429)]&&t.video&&(l[r(761)](t[r(464)],t[r(319)]),l[r(1309)](t[r(464)],!0)),e.track[r(1502)]===l[r(987)][r(657)]&&t.audio)){if(t[r(319)]=e[r(660)][0],!t[r(326)](r(827))){let e=document[r(391)](r(445));e.id=t[r(530)]+r(1054),t.audioElem=e}l[r(812)](t.audioElem,new MediaStream([e[r(1172)]])),l[r(772)](t.audioElem,!1,l.options[r(1279)]),l[r(1309)](t.audioElem,!1)}};try{let o={};if(e===l[n(285)][n(215)])o=await t.pc.createOffer(),o.sdp=l[n(749)](o.sdp,r),o[n(1273)]=l[n(504)](o.sdp,r);else{if(t.pc[n(1081)]&&l[n(1408)][n(506)])t.pc[n(1081)](n(445),{direction:n(1333)}),t.pc.addTransceiver(n(741),{direction:n(1333)}),t.pc.addTransceiver("video",{direction:n(1333)}),l.setReceiverCodecPreferences(t.pc),o=await t.pc[n(765)](),o.sdp=l[n(691)](o.sdp);else{let e={offerToReceiveAudio:t[n(445)],offerToReceiveVideo:t[n(741)]};l[n(322)](t.pc),o=await t.pc[n(765)](e)}i[n(574)](n(571)+JSON.stringify(o))}return await t.pc[n(229)](o),e===l[n(285)][n(215)]&&(l[n(1135)](t.pc,r),r&&1==r[n(532)]&&l.setSingleLayerConfig(t.pc,r[0])),o[n(1273)]}catch(e){return i[n(1241)](n(779)+e),l.triggerLogUpload(l[n(444)].Error,{streamInfo:t,errorType:l[n(490)][n(1485)],errorCode:t[n(711)]?l.LogErrorCode[n(1485)].Publish:l.LogErrorCode.Rtc[n(566)],errorDesc:n(256)+e+n(580)+(t.id||t[n(1457)])}),null}},l[o(668)]=function(e){const t=o,r=e.pc;try{r&&r[t(905)]!==t(274)&&(r[t(722)]=null,r[t(282)]=null,r.onconnectionstatechange=null,r[t(1012)]()),e.pc=null}catch(e){i.logError("close peer conn error, "+e)}},l[o(1007)]=function(e){const t=o;if(e.pc){let r=e.id||e[t(530)];if(i.logInfo(r,"prepare ice reconnection"),e.pc[t(843)]instanceof Function)try{e.pc[t(843)](),i[t(574)](r,t(185)),e[t(1415)]=[],l.onIceNegotiationNeeded(e)}catch(e){i[t(1366)](t(358),e[t(1214)]())}else e.id&&l[t(199)](e.id,(()=>{const r=t;l[r(1162)](e[r(1096)],e[r(530)])}))}},l[o(1559)]=async function(e,t){const r=o;try{t=l[r(564)](e,t);let o=new RTCSessionDescription({sdp:t,type:r(1011)});await e[r(1571)](o)}catch(e){return i.logError(r(1487)+e+r(1010)+t),e}},l[o(949)]=function(e=null){const t=o;e&&e[t(268)]()[t(352)]((e=>{const r=t;if(r(247)in e&&e[r(1018)]&&e[r(1018)][r(1172)]){let t=e[r(1018)].track[r(1502)];let o=RTCRtpSender[r(298)](t)[r(380)][r(933)]((e=>{const t=r;let o=e[t(994)][t(1057)](),n=e[t(165)];return o===t(1005)&&n&&n[t(1248)](t(1204))>=0&&n[t(1248)]("packetization-mode=1")>=0||o===t(192)||"audio/opus"===o}));if(o&&o[r(532)]>0)try{e[r(247)](o)}catch(e){i[r(1366)](r(907),e[r(1214)]())}}}))},l.setReceiverCodecPreferences=function(e=null){const t=o;e&&e[t(268)]().forEach((e=>{const r=t;if(r(247)in e&&e[r(1126)]&&e[r(1126)].track){let t=e.receiver.track[r(1502)];let o=RTCRtpSender.getCapabilities(t)[r(380)][r(933)]((e=>{const t=r;let o=e[t(994)][t(1057)]();return o===t(1005)||o===t(1539)||o===t(1348)}));o&&o[r(532)]>0&&e[r(247)](o)}}))},l[o(564)]=function(e,t){const r=o;let n=!0;e&&e.localDescription&&e[r(864)][r(585)]===r(1024)&&(n=e[r(864)].sdp[r(1248)](r(304))<e[r(864)][r(1273)][r(1248)](r(432)));let i=t,s=i.indexOf(r(304)),a=i[r(1248)]("m=video"),c=i.length,d=i[r(221)](0,s<a?s:a),u=i[r(221)](s,s<a?a:c),l=i[r(221)](a,s<a?c:s);return i=d+(n?u+l:l+u),i},l[o(749)]=function(e="",t=[]){const r=o;let n=e;try{const o=Math[r(826)](t[0].targetBw/1e3*.5);return o?(e[r(1269)](new RegExp(r(1031),"g"))[r(352)]((t=>{const n=r;e=e[n(1272)](t,t+n(189)+o+";")})),e):(i[r(1366)](r(1058)),n)}catch(e){return i.logWarn(r(449),e[r(1214)]()),n}},l[o(504)]=function(e="",t=[]){const r=o;let n=t.length;if(n<=1)return e;if(null!==e[r(1269)](new RegExp("a=ssrc-group:SIM","g")))return e;let s=e[r(1269)](/a=ssrc-group:FID ([0-9]*) ([0-9]*)\r?\n/);if(!s||s[r(532)]<=0)return e;let a=e;try{const t=parseInt(s[1],10),o=parseInt(s[2],10),i=e[r(1269)](new RegExp("a=ssrc:"+s[1]+r(1293)))[1],a=e[r(1269)](new RegExp("a=ssrc:"+s[1]+r(1493)))[1],c=e.match(new RegExp(r(470)+s[1]+r(1128))),d=c&&c[1]?c[1]:"",u=e[r(1269)](new RegExp(r(470)+s[1]+r(1370))),p=u&&u[1]?u[1]:"";e[r(1269)](new RegExp(r(470)+s[1]+r(967),"g"))[r(352)]((t=>{e=e.replace(t,"")})),e[r(1269)](new RegExp("a=ssrc:"+s[2]+r(967),"g")).forEach((t=>{e=e[r(1272)](t,"")}));const m=[t],f=[o];for(let e=1;e<n;e+=1)m.push(t+1e3*e),f[r(1129)](o+1e3*e);let b,y,v=l.sdpAddSIM(m);for(let e=0;e<m[r(532)];e+=1)b=m[e],y=f[e],v+=l[r(1341)](b,y);for(let e=0;e<m.length;e+=1)b=m[e],y=f[e],v+=l.sdpAddLayer(i,a,d,p,b,y);return v+=r(900),e[r(1272)](s[0],v)}catch(e){return i.logWarn(r(1124),e[r(1214)]()),a}},l[o(691)]=function(e=""){const t=o,r=e;try{const r=t(1498),o=(t(296),e[t(1269)](/a=group:BUNDLE ([0-9\ ]*)\r?\n/)),n=o[0][t(382)](" "),i=(e=e.replace(o[0],o[0][t(1272)](" "+n[n[t(532)]-1]," "+r+"\r\n")))[t(1270)](t(432));let s=e.substring(i,e[t(532)]);return e=e.substring(0,i),s=s.replace(s[t(1269)](/a=mid:[0-9]*\r?\n/)[0],"a=mid:"+r+"\r\n"),e+s}catch(e){return i[t(1366)](t(1013),e.toString()),r}},l[o(478)]=function(e){const t=o;let r=t(554);return e[t(352)]((e=>{r+=" "+e})),r+"\r\n"},l[o(1341)]=function(e,t){return o(427)+e+" "+t+"\r\n"},l.sdpAddLayer=function(e,t,r,n,i,s){const a=o;return a(470)+i+a(909)+e+"\r\n"+(a(470)+i+a(328)+t)+"\r\n"+(r?"a=ssrc:"+i+a(1298)+r+"\r\n":"")+(n?a(470)+i+a(435)+n+"\r\n":"")+(a(470)+s+a(909)+e)+"\r\n"+(a(470)+s+a(328)+t)+"\r\n"+(r?a(470)+s+" mslabel:"+r+"\r\n":"")+(n?a(470)+s+a(435)+n+"\r\n":"")},l[o(1135)]=function(e,t=[]){const r=o;if(!e||!t||t[r(532)]<=1)return;let n=[];for(let e=0;e<t[r(532)];e+=1)n[e]=t[e][r(520)];e[r(712)]()[r(352)]((e=>{const t=r;e.track&&"video"===e.track.kind&&l[t(1520)](e,n)}))},l[o(1403)]=function(e,t){const r=o;e[r(712)]()[r(352)]((e=>{const o=r;if(e[o(1172)]&&"video"===e[o(1172)][o(1502)]){const r=e.getParameters();let n=t[o(520)]||15e5,s=t[o(477)]||15;r[o(379)][0][o(182)]=n,r.encodings[0][o(407)]=s,e[o(474)](r).then()[o(1396)]((e=>{i[o(1241)]("set one layer bitrate error, "+e)}))}}))},l[o(1520)]=function(e,t=[]){const r=o;if(!(e.getParameters instanceof Function&&e[r(474)]instanceof Function))return void i.logError("cannot set simulcast layers bitrate, getParameters or setParameters is not available");if(!t||t[r(532)]<=1)return;const n=e.getParameters();for(let e=0;e<t[r(532)];e++)n[r(379)][e]&&(n[r(379)][e][r(182)]=t[e],n[r(379)][e][r(791)]=!1);e[r(474)](n)[r(1419)]()[r(1396)]((e=>{i[r(1241)]("sett simulcast layer bitrate error, "+e)}))},l.setSimulcastLayerEncoding=function(e,t=[],r=-1){const n=o,s=e.pc;if(!s)return;if(!t||t.length<=1)return;let a=s[n(712)]();if(0===a[n(532)])return;const c=1===l[n(1178)][n(813)];let d=0,u=r;if(c&&(d=t[n(1486)]((e=>e[n(1562)]*e.height>=230400)),-1===d?(d=t[n(532)]-1,u=d):d>r&&(u=d)),-1===r){const t=l.core.network.netWeakStats[e.id];t&&t.isWeak&&(t[n(1313)]=!0,t[n(231)]=!1,l[n(351)]()),d=r,u=r}e[n(1055)]=u;for(let e=0;e<a.length;e++)if(a[e][n(1172)]&&a[e].track[n(1502)]===n(741)){let r=a[e];if(!(r[n(1438)]instanceof Function&&r.setParameters instanceof Function)){i[n(1366)]("cannot set simulcast layers encoding, getParameters or setParameters is not available");break}let o=r[n(1438)](),s=t.length-1;u>s&&(u=s),t.forEach((e=>{const t=n;o[t(379)][e[t(1055)]]&&(o[t(379)][e[t(1055)]].active=e.layerIndex>=d&&e[t(1055)]<=u)})),r[n(474)](o)[n(1419)]()[n(1396)]((e=>{const t=n;i[t(1241)](t(237)+e)}));break}},l[o(1459)]=async function(e,t){const r=o;try{if(t.candidate){let o={sdpMid:"0"===t[r(1415)][r(769)]?"audio":r(741),sdpMLineIndex:t[r(1415)].sdpMLineIndex,sdp:t[r(1415)][r(1415)]};e[r(1415)][r(1129)](o)}}catch(t){i[r(1241)](r(679)+e.id+r(961)+t)}},l[o(1254)]=function(e){const t=o;let r=e.pc;if(r)if(typeof e[t(1146)]===t(733)&&(e[t(1146)]=0),r[t(1463)]===t(252)||"disconnected"===r.iceConnectionState||r[t(1463)]===t(274)){let o=e[t(530)]||e.id;if(i[t(1366)](o,t(1391),r[t(1463)]),e[t(1218)]&&e.retry,l.ws&&l.ws[t(1531)]===WebSocket[t(1441)]){if(i[t(574)]("streamInfo.ready:"+e[t(1218)]),e.local){const r={...e};l[t(847)](e),l[t(694)](l[t(246)][t(1183)],{type:r[t(585)],subType:r[t(846)],tag:r[t(973)],publishID:r.id,desc:"onIceStateChange ext:"+(r[t(973)]?r[t(973)]:r[t(585)])+t(1158)+r[t(1218)]}),e[t(1146)]=0}else e[t(1218)]?l.subscribeRecover(e,t(1353)+e[t(530)]+t(1158)+e[t(1218)]):l[t(668)](e);r.iceConnectionState===t(252)&&l[t(1196)](l[t(444)].Error,{streamInfo:e,errorType:l[t(490)][t(1485)],errorCode:e[t(711)]?l[t(422)][t(1485)][t(1473)]:l[t(422)][t(1485)][t(1395)],errorDesc:t(1166)})}}else r[t(1463)]===t(714)&&(e.retry=0)},l.onConnectionStateChange=function(e,t){const r=o,n=e.pc;if(n&&n[r(1170)]===r(252)){const o=e[r(530)]||e.id;if(i.logWarn(o,r(512),n[r(1170)]),l.ws&&l.ws[r(1531)]===WebSocket[r(1441)]){if(i[r(574)](r(978)+e[r(1218)],t),e[r(711)]){const t={...e};l[r(847)](e),l[r(694)](l[r(246)][r(1183)],{type:t[r(585)],subType:t[r(846)],tag:t.tag,publishID:t.id,desc:r(1223)+t.type+r(1158)+t[r(1218)]}),e[r(1146)]=0}else l[r(269)](e,"onConnectionStateChange ext:"+e[r(530)]+r(1158)+e.ready);l.triggerLogUpload(l[r(444)][r(1465)],{streamInfo:e,errorType:l.LogErrorType.Rtc,errorCode:e[r(711)]?l[r(422)][r(1485)].PublishIce:l[r(422)][r(1485)].SubscribeIce,errorDesc:"connection state: failed"})}}},l[o(1276)]=function(e){const t=o;let r=!0,n=e[t(530)],s=e.id;if(!e[t(711)]&&!l[t(1178)].publishers.hasOwnProperty(n)&&(r=!1),r){let r=[],o="";e.pc.createOffer({offerToReceiveAudio:1,offerToReceiveVideo:1})[t(1419)]((n=>{const s=t;if(e[s(711)]){let t=e[s(585)],o=e.tag;r=o?l[s(1408)][s(981)]:l.options[t+s(940)],n[s(1273)]=l[s(504)](n[s(1273)],r)}return o=n[s(1273)],i.logInfo("offer:"+JSON[s(1064)](n)),e.pc[s(229)](n)}))[t(1419)]((()=>{const n=t;e.local&&(l.setSimulcastLayerConfig(e.pc,r),l[n(713)](e,r,e.layerIndex||0)),l[n(985)](s,"renego",o)}))[t(1396)]((e=>{const r=t;i.logWarn(r(852),e[r(1214)]())}))}},l.failCheck=function(e){const t=o;e[t(1542)]=setInterval((()=>{const r=t;if(e.pc)if(e.pc[r(1170)]===r(252)){if(clearInterval(e.failCheck),l.ws&&l.ws.readyState===WebSocket[r(1441)]){const t={...e};l[r(847)](e),t[r(711)]?l[r(694)](l[r(246)][r(1183)],{type:t[r(585)],subType:t[r(846)],tag:t[r(973)],publishID:t.id,desc:r(796)+t[r(585)]+", ready:"+t[r(1218)]}):l.emitError(l[r(246)].SubscribeError,{publishID:t[r(530)],subscribeID:t.id,desc:r(796)+t[r(530)]+r(1158)+t.ready}),e[r(1146)]=0}}else-1!==["connected",r(714),r(274)][r(1248)](e.pc.iceConnectionState)&&clearInterval(e[r(1542)]);else clearInterval(e.failCheck)}),2e3)},l[o(487)]=void 0,l.onDeviceChange=function(){const e=o;console.error(e(1343)),!l[e(487)]&&(l[e(487)]=setTimeout((()=>{const t=e;s[t(648)](s[t(1513)][t(367)]),l[t(487)]=void 0}),500))},l[o(1296)]=async function(e,t){const r=o,n=[];return t[r(352)]((t=>{const o=r;n[o(1129)]((()=>new Promise((r=>{const n=o;if(e==l[n(987)].Video){const e=l[n(1178)][n(1423)][n(899)].videoinput.find((e=>e.id===t.id));if(e&&e.capabilities)t[n(563)]=e[n(563)],r();else{const e={video:{deviceId:{exact:t.id}}};navigator[n(624)][n(1352)](e)[n(1419)]((e=>{const o=n;e[o(1043)]().forEach((e=>{const r=o;e.kind===l[r(987)].Video&&(t[r(563)]=e[r(298)]()),e[r(1362)]&&e.stop()})),r()}))[n(1396)]((()=>{r()}))}}}))))})),((e,t=10,r)=>new Promise(((o,n)=>{const i=L,s=[...e],a=s[i(532)]<t?s[i(532)]:t,c=s[i(313)](0,a),d=new Array(e[i(532)]);let u=!1,l=a,p=0;const m=()=>{const t=i;if(r){const o=((e[t(532)]-(l+s[t(532)]))/e[t(532)])[t(1434)](2);r({loaded:o})}},f=(e,t)=>{const r=i;e()[r(1419)]((e=>{const n=r;u||(d[t]=e,s[n(532)]>0?(f(s[n(1265)](),++p),m()):(l--,m(),0===l&&o(d)))}))[r(1396)]((e=>{u||(u=!0,n({index:t,error:e}))}))};c[i(352)](((e,t)=>{p=t,f(e,t)}))})))(n,M[r(1310)]?1:10)},l.resetDefaultDevice=function(e={}){const t=o;let r=0,n=!1,i=!1;if(l[t(1178)].devices[t(1399)]&&(r++,n=!0),l[t(1178)][t(1423)][t(844)]&&(r++,i=!0),1===r){if(n&&void 0===e[t(1399)][t(409)]((e=>e.id===l[t(1178)][t(1423)][t(1399)])))return l.setDevicePreference(l[t(970)][t(232)],"");if(i&&void 0===e[t(844)][t(409)]((e=>e.id===l[t(1178)][t(1423)][t(844)])))return l[t(881)](l[t(970)][t(366)],"")}else if(2===r){let r=void 0===e[t(1399)][t(409)]((e=>e.id===l[t(1178)][t(1423)].audioinput)),o=void 0===e[t(844)].find((e=>e.id===l.core[t(1423)][t(844)]));if(r&&o)return l.core.devices.audioinput="",l[t(881)](l[t(970)][t(366)],"");if(r)return l[t(881)](l[t(970)][t(232)],"");if(o)return l[t(881)](l[t(970)][t(366)],"")}},l[o(1003)]=async function(e,t){const r=o;let n=l[r(1178)][r(1423)][r(899)],i=n[r(1399)][r(933)]((t=>void 0===e[r(1399)].find((e=>e.id===t.id)))),a=n[r(844)][r(933)]((t=>void 0===e.videoinput.find((e=>e.id===t.id))));if(i[r(532)]>0){let t=n[r(844)].filter((e=>{const t=r;return e[t(1112)]&&void 0!==i[t(409)]((r=>r[t(1112)]===e[t(1112)]))}));e[r(844)]=e[r(844)][r(933)]((e=>{const o=r;return void 0===t.find((t=>t[o(340)]===e[o(340)]))}))}if(a[r(532)]>0){let t=n[r(1399)][r(933)]((e=>{const t=r;return e[t(1112)]&&void 0!==a[t(409)]((r=>r[t(1112)]===e.group))}));e[r(1399)]=e[r(1399)].filter((e=>{const o=r;return void 0===t.find((t=>t[o(340)]===e.name))}))}t&&await l[r(1296)](l.StreamTrack.Video,e[r(844)]),l[r(936)](e),l[r(1178)].devices[r(899)]=e,s[r(648)](s.Event[r(890)],e)},l[o(1078)]=async function(e){const t=o,r=Object[t(834)](l[t(970)]),n={},s={};r.forEach((e=>{s[e]=[],n[e]={}})),navigator[t(624)][t(485)]!==l[t(1343)]&&(navigator[t(624)][t(485)]=l.onDeviceChange);let a=[];try{a=await navigator[t(624)].enumerateDevices()}catch(e){return i.logError(t(1002)+e)}a.forEach((function(e){const r=t;if(e[r(1065)]&&s[e.kind])if(e.deviceId===r(1046))n[e[r(1502)]]={id:e.deviceId,name:e[r(915)]||e[r(1502)]+":"+e[r(1065)][r(925)](0,8),group:e[r(884)],selected:!1};else if(e[r(1065)]!==r(1328)){const t={id:e[r(1065)],name:e[r(915)]||e[r(1502)]+":"+e.deviceId[r(925)](0,8),group:e[r(884)]};""!==n[e[r(1502)]].group&&e[r(884)]===n[e[r(1502)]][r(1112)]?(n[e.kind][r(266)]=!0,s[e[r(1502)]][r(170)](t)):s[e[r(1502)]][r(1129)](t)}})),r.forEach((e=>{const r=t;!n[e].selected&&n[e].id&&(delete n[e][r(266)],s[e][r(170)](n[e]))})),l[t(1003)](s,e)[t(1419)]()},l[o(254)]=function(e){return new Promise(((t,r)=>{const o=L,n=l[o(1178)].devices[o(899)][o(1399)],i=l[o(1178)][o(1423)][o(899)][o(1482)],s=l[o(1178)][o(1423)][o(899)].videoinput;let a=null;if(a=s[o(409)]((t=>t.id===e)),a)if(a.capabilities)t(JSON[o(562)](JSON[o(1064)](a)));else{const e={video:{deviceId:{exact:a.id}}};navigator[o(624)][o(1352)](e)[o(1419)]((e=>{const r=o;e[r(1043)]().forEach((e=>{const t=r;e[t(1502)]===l[t(987)][t(1429)]&&(a[t(563)]=e[t(298)]()),l[t(730)](e)})),t(JSON[r(562)](JSON[r(1064)](a)))}))[o(1396)]((()=>{const e=o;t(JSON[e(562)](JSON[e(1064)](a)))}))}else a=n[o(409)]((t=>t.id===e)),a?t(JSON.parse(JSON[o(1064)](a))):(a=i.find((t=>t.id===e)),a?t(JSON.parse(JSON[o(1064)](a))):r(o(195)))}))},l.setDevicePreference=function(e="",t=""){const r=o;if(l[r(1178)][r(1423)][r(326)](e)&&l[r(1178)][r(1423)][e]!==t)if(e===l[r(970)][r(366)]&&(l.core[r(1423)][r(737)+e]=l[r(1178)][r(1423)][e]),l[r(1178)][r(1423)][e]=t,e===l[r(970)][r(243)])Object.values(l[r(1178)][r(425)])[r(352)]((e=>{e[r(827)]&&l.setElementSinkId(e.audioElem,t)}));else if(l.core[r(861)][r(413)]){let t=e===l[r(970)][r(232)],o=!t;l[r(1217)](null,!0,t,o)[r(1419)]()}},l[o(716)]=function(e,t){const r=o;let n=null;if(e===l[r(858)][r(1372)])n=l[r(1178)][r(861)],l[r(1408)][r(300)]=[t];else{if(!l[r(1178)][r(1189)][e])return void i.logWarn(r(1412));n=l.core.cameraEx[e],l[r(1408)][r(981)]=[t]}n[r(1107)]=[t],n.pc&&n[r(1550)]&&(n[r(1550)][r(855)]({width:{ideal:t.width},height:{ideal:t[r(683)]}})[r(1419)]((()=>{const e=r;i.logInfo(e(747))})).catch((e=>{const t=r;i[t(1241)](t(774),e)})),l[r(1403)](n.pc,t))},l[o(761)]=function(e,t){const r=o;if(!(e&&e instanceof HTMLElement))return!1;try{return e[r(958)]=t,e[r(1398)]=!1,e[r(202)]=!0,e[r(1491)]=()=>{const t=r;e.onplay=null,i[t(574)](e.id+t(850))},!0}catch(e){return i[r(1241)](r(289)+e),!1}},l[o(812)]=function(e,t){const r=o;if(e&&e instanceof HTMLElement)try{e[r(958)]=t,e[r(1398)]=!1,e[r(1491)]=()=>{const t=r;e[t(1491)]=null,i[t(574)](e.id+t(850))}}catch(e){i[r(1241)](r(1260)+e)}},l[o(593)]=function(e,t){const r=o;e&&t&&(e instanceof HTMLElement&&typeof e.sinkId!==r(733)?e[r(1430)](t).then()[r(1396)]((e=>{const o=r;let n=e;e?(n=e.name===o(394)?o(1564)+e:e[o(903)],i.logError(n)):(i[o(1241)](e),n=o(871)),l[o(694)](l[o(246)][o(1232)],{deviceType:l[o(970)][o(243)],deviceID:t,desc:n})})):(i[r(1241)](r(486)),l[r(694)](l.ErrorCode[r(1232)],{deviceType:l[r(970)][r(243)],deviceID:t,desc:r(715)})))},l[o(1512)]=function(e=""){const t=o;if(!e)return e;let r=e[t(382)]("-");return r[t(313)](0,r[t(532)]-1)[t(421)]("-")},l[o(1174)]=function(e=""){const t=o;if(e===l.core[t(861)].id)return l[t(1178)][t(861)];if(e===l[t(1178)][t(1418)].id)return l.core[t(1418)];if(e===l[t(1178)].custom.id)return l[t(1178)][t(609)];if(l[t(1178)].publishers.hasOwnProperty(e))return l[t(1178)].publishers[e];{let r=l[t(1512)](e);return l.core.publishers[r]?l[t(1178)][t(425)][r]:Object[t(834)](l[t(1178)][t(1189)]).find((t=>t.id===e))||null}},l.getStreamInfoByRequestID=function(e="",t=l.StreamRole[o(938)]){const r=o;if(e){if(t===l.StreamRole.Subscriber){let t=Object[r(834)](l[r(1178)].publishers);for(let o=0,n=t[r(532)];o<n;o++)if(t[o][r(260)]===e)return t[o];return null}return l[r(1178)][r(861)][r(260)]===e?l[r(1178)][r(861)]:l.core.screen[r(260)]===e?l[r(1178)][r(1418)]:l[r(1178)].custom.lastRequestID===e?l[r(1178)][r(609)]:Object[r(834)](l[r(1178)].cameraEx)[r(409)]((t=>t[r(260)]===e))}},l[o(856)]=function(e){const t=o;let r=l.core[t(425)][e];return!r&&Object[t(834)](l[t(1178)][t(425)])[t(352)]((o=>{o[t(973)]===e&&(r=o)})),r},l.getLayersByStreamInfo=function(e){const t=o,{tag:r,type:n,subType:i,local:s}=e;if(!s)return e[t(1107)];let a=[];return a=r?n===l[t(858)][t(1372)]?l.options.cameraExLayers:l.options.screenLayers:n===l[t(858)][t(1372)]?l[t(1408)][t(300)]:i===l.SubStreamType.Custom?l.options[t(467)]:l[t(1408)][t(1355)],a},l[o(198)]=function(e){const t=o;i[t(574)](t(670)),Object[t(834)](l[t(858)])[t(352)]((e=>{const r=t;l[r(1178)][e].id&&l[r(1178)][e][r(1218)]&&(l.resetStreamData(l[r(1178)][e]),l[r(822)](e,"",l.core[e][r(1552)]?l[r(1178)][e].info[r(373)]:"",l[r(1178)][e][r(846)]))})),e.forEach((e=>{const r=t;l[r(1178)][r(1200)][e.userID]?(e[r(660)][r(352)]((t=>{const o=r;l.core[o(1200)][e[o(1096)]].streams.indexOf(t[o(530)])<0?(l[o(1178)][o(1200)][e[o(1096)]][o(660)][o(1129)](t.publishID),l[o(1178)][o(425)][t[o(530)]]=Object.assign({uid:e[o(1096)],dType:e[o(1530)],local:!1,ready:!1,localMuteAudio:!1,localMuteVideo:!1,candidate:[]},t)):(l.core[o(425)][t.publishID][o(1369)]!==t[o(1369)]&&(l.core[o(425)][t.publishID][o(1369)]=t.muteVideo),l[o(1178)][o(425)][t[o(530)]][o(1553)]!==t.muteAudio&&(l.core[o(425)][t[o(530)]][o(1553)]=t[o(1553)]),l[o(1178)][o(425)][t.publishID].ready&&(l[o(847)](l[o(1178)][o(425)][t[o(530)]]),l[o(1162)](e[o(1096)],t[o(530)])))})),l.core[r(1200)][e.userID][r(660)].forEach((t=>{const o=r;!e.streams[o(409)]((e=>e[o(530)]===t))&&l[o(847)](l[o(1178)][o(425)][t],!0)}))):(l.core[r(1200)][e[r(1096)]]={uid:e[r(1096)],dType:e.dType,streams:[]},e[r(660)][r(352)]((t=>{const o=r;l[o(1178)].users[e[o(1096)]].streams.push(t[o(530)]),l.core[o(425)][t[o(530)]]=Object[o(867)]({uid:e.userID,dType:e[o(1530)],local:!1,ready:!1,localMuteAudio:!1,localMuteVideo:!1,candidate:[]},t)})))}))},l[o(983)]=function(e){const t=o;i[t(574)](t(1087));let r=[];e[t(352)]((e=>{const o=t;e.userID===l[o(1178)].userID?(Object[o(834)](l[o(858)])[o(352)]((t=>{const r=o;if(l[r(1178)][t].id&&l[r(1178)][t][r(1218)]){let o=e[r(660)][r(409)]((e=>e[r(530)]===l[r(1178)][t].id));o?([r(808),r(714)][r(1248)](l[r(1178)][t].pc[r(1463)])<0?l[r(1007)](l[r(1178)][t]):(l[r(1178)][t][r(1553)]!==o[r(1553)]||l[r(1178)][t][r(1369)]!==o[r(1369)])&&l[r(649)](o[r(530)],l.core[t][r(1369)],l[r(1178)][t][r(1553)]),e[r(660)]=e[r(660)][r(933)]((e=>e.publishID!==l.core[t].id))):(l[r(847)](l[r(1178)][t]),l.wsPublish(t,"",l[r(1178)][t].info?l[r(1178)][t][r(1552)][r(373)]:"",l[r(1178)][t][r(846)]))}})),e[o(660)][o(352)]((e=>{const t=o;l[t(305)](e[t(585)],e[t(530)])})),r=e.subStreams||[]):l[o(1178)][o(1200)][e.userID]?(e[o(660)][o(352)]((t=>{const r=o;l.core[r(1200)][e[r(1096)]][r(660)].indexOf(t[r(530)])<0?(l[r(1178)][r(1200)][e[r(1096)]][r(660)][r(1129)](t[r(530)]),l.core.publishers[t[r(530)]]=Object[r(867)]({uid:e.userID,dType:e[r(1530)],local:!1,ready:!1,localMuteAudio:!1,localMuteVideo:!1,candidate:[]},t)):(l[r(1178)][r(425)][t[r(530)]][r(1369)]!==t[r(1369)]&&(l[r(1178)].publishers[t[r(530)]][r(1369)]=t[r(1369)]),l[r(1178)].publishers[t[r(530)]][r(1553)]!==t.muteAudio&&(l.core[r(425)][t[r(530)]][r(1553)]=t.muteAudio))})),l.core[o(1200)][e[o(1096)]].streams[o(352)]((t=>{const r=o;!e[r(660)][r(409)]((e=>e.publishID===t))&&l[r(847)](l[r(1178)].publishers[t],!0)}))):(l[o(1178)][o(1200)][e.userID]={uid:e[o(1096)],dType:e[o(1530)],streams:[]},e[o(660)][o(352)]((t=>{const r=o;l[r(1178)].users[e[r(1096)]][r(660)].push(t[r(530)]),l.core.publishers[t[r(530)]]=Object[r(867)]({uid:e[r(1096)],local:!1,ready:!1,localMuteAudio:!1,localMuteVideo:!1,candidate:[]},t)})))})),r[t(352)]((e=>{const r=t;l[r(1178)].publishers[e[r(530)]]?l[r(1178)][r(425)][e[r(530)]].id&&l[r(1178)][r(425)][e.publishID].ready&&l[r(1178)][r(425)][e[r(530)]].id===e[r(1457)]&&([r(808),r(714)][r(1248)](l[r(1178)][r(425)][e[r(530)]].pc.iceConnectionState)<0?l[r(1007)](l[r(1178)].publishers[e.publishID]):((e[r(1553)]!==l[r(1178)][r(425)][e[r(530)]].localMuteAudio||e[r(1369)]!==l.core.publishers[e[r(530)]][r(1574)])&&l[r(649)](e[r(1457)],l[r(1178)].publishers[e[r(530)]][r(1574)],l[r(1178)][r(425)][e[r(530)]].localMuteAudio),e[r(1055)]!==l.core.publishers[e[r(530)]].layerIndex&&l[r(866)](e[r(1457)],l[r(1178)].publishers[e[r(530)]][r(1055)]))):l[r(199)](e[r(1457)])})),Object[t(1015)](l.core.users)[t(352)]((r=>{const o=t;!e[o(409)]((e=>e[o(1096)]===r))&&(l[o(1178)][o(1200)][r].streams[o(352)]((e=>{const t=o;l[t(1178)].publishers[e]&&l[t(1178)][t(425)][e].id&&l[t(847)](l[t(1178)][t(425)][e],!0)})),delete l[o(1178)][o(1200)][r])}))},l.reviseStreamData=function(e=[],t=!1){const r=o;if(!(e&&e instanceof Array&&0!==e[r(532)])){if(t)return;e=[]}let n=JSON[r(562)](JSON[r(1064)](e));return t?l[r(983)](n):l[r(198)](n)},l[o(1099)]=function(e){const t=o;e&&delete l[t(1178)][t(838)][e];let r=l.getStreamInfo(e);if(r)if(r.local){i[t(574)](t(619)+e+t(1406));let o=r[t(585)],n=r.tag||"",s=r[t(1552)]?r.info[t(373)]:"";l[t(305)](o,r.id,r[t(973)],r[t(846)]),l[t(822)](o,n,s,r[t(846)])}else i[t(574)](t(619)+e+t(608)),l[t(199)](r.id,(()=>{const e=t;l[e(1162)](r[e(1096)],r.publishID)}));else i[t(1241)](t(619)+e+t(1305))},l.cleanStreamData=function(e=!1){const t=o;l[t(847)](l[t(1178)][t(861)]),l[t(1178)][t(861)][t(1369)]=!1,l[t(1178)].camera.muteAudio=!1,l[t(847)](l[t(1178)][t(1418)]),l[t(1178)][t(861)][t(1369)]=!1,l.core[t(861)].muteAudio=!1,l[t(1178)][t(1189)]={},!e&&(Object[t(834)](l[t(1178)][t(425)])[t(352)]((e=>l[t(847)](e))),l[t(1178)][t(425)]=[],l.historyReport={video:{},audio:{},enableInspire:!1,options:{activeDuration:1800,inactiveDuration:1500}},l[t(436)]={},l[t(1178)].network[t(453)]={},l[t(1178)].network[t(1568)]={},l[t(1178)][t(403)][t(986)]={})},l[o(847)]=function(e,t=!1){const r=o;if(!e)return;clearInterval(l[r(1542)]),l[r(668)](e),t&&(l.core[r(1200)][e[r(612)]]&&(l[r(1178)][r(1200)][e[r(612)]].streams=l.core.users[e[r(612)]].streams[r(933)]((t=>t!==e[r(530)]))),l.core[r(425)][e[r(530)]]&&delete l[r(1178)].publishers[e[r(530)]]),l[r(1500)](e);let n=e[r(711)]?e[r(973)]?e[r(585)]+"-"+e[r(973)]:e[r(585)]:e[r(530)];l.releaseAudioProcessor(n),e.id="",e.ready=!1,e[r(1415)]=[],e[r(1552)]={app:"",rtc:"",act:0},e[r(1146)]=0,e[r(573)]=!1,e[r(260)]="",e[r(408)]&&clearTimeout(e[r(408)]),e[r(827)]&&(e[r(827)][r(1491)]=null,l[r(275)](e[r(827)])),e[r(464)]&&(e[r(464)][r(1491)]=null,l[r(275)](e[r(464)]))},l[o(1500)]=function(e){const t=o,r=l[t(1178)][t(403)],n=l[t(643)];if(r[t(453)][e.id]&&delete r.uplinkStats[e.id],r[t(1568)][e.id]&&delete r[t(1568)][e.id],r.netWeakStats[e.id]){const o=r[t(986)][e.id];o&&(o.isWeak||e[t(324)])&&(o[t(1313)]=!0,o[t(231)]=!1,e[t(324)]=!1,l[t(351)]()),delete r[t(986)][e.id]}n[t(445)][e.id]&&delete n[t(445)][e.id],n[t(741)][e.id]&&delete n[t(741)][e.id],delete l[t(436)][e.id]},l[o(590)]=function(){const e=o;clearInterval(l[e(1340)]),clearInterval(l[e(870)]),clearInterval(l.networkReport),clearInterval(l[e(1187)]),clearInterval(l[e(621)]),clearInterval(l[e(1178)][e(754)][e(146)])},l[o(275)]=function(e){const t=o;for(let r=0;r<l[t(1178)][t(1231)][t(532)];r++)if(l[t(1178)].unableAutoPlay[r]===e){l[t(1178)][t(1231)].splice(r,1);break}},l[o(1201)]=function(){const e=o;if(0===l[e(1178)].status)return;let t=l[e(1178)][e(1146)],r=1e4;0===t?r=0:t<5&&(r=1e3<<t-1),i[e(574)]("websocket disconnected, retry",++l.core[e(1146)],r),s.emit(s[e(1513)][e(1554)],l[e(1178)].retry),l[e(1262)]=setTimeout((()=>{const t=e;l[t(1268)](l[t(1178)][t(1351)],l[t(1178)][t(1096)],l[t(1178)][t(782)],l[t(1178)][t(1344)],l[t(1178)].userRole,!0)}),r)},l.historyReport={video:{},audio:{},enableInspire:!1,options:{activeDuration:1500,inactiveDuration:1500}},l[o(1281)]=function(){const e=o;let t=l.core.audioTest;t[e(236)]&&(!u&&t[e(236)][e(327)](l[e(1449)][e(560)]),t[e(1045)][e(327)](t[e(236)]),delete t[e(236)],delete t[e(1045)]),t.stream=null},l[o(1440)]=function(e=""){const t=o;Object[t(1015)](l[t(643)].audio)[t(352)]((r=>{const o=t;if(""===e||e===r){let e=l[o(643)][o(445)][r];e&&e[o(236)]&&(!u&&e[o(236)].disconnect(l[o(1449)][o(560)]),e[o(1045)][o(327)](e[o(236)]),delete e[o(236)]),delete l[o(643)][o(445)][r]}}))};class p extends u{constructor(e,t){const r=o;super(e,r(930)),this[r(1494)]=t,this[r(262)].onmessage=this[r(821)][r(153)](this),this.index=0}[o(821)](e){const t=o;try{e[t(450)][t(930)]?(l[t(643)][t(445)][this[t(1494)]]?l[t(643)][t(445)][this.streamID][t(930)]=e[t(450)][t(930)]||0:this[t(1494)]===l[t(1178)][t(754)][t(585)]&&(l[t(1178)].audioTest[t(930)]=e.data.audioLevel),this[t(1215)]=0):0===e[t(450)][t(930)]&&(this[t(1215)]>=5?(l[t(643)][t(445)][this[t(1494)]]?l[t(643)][t(445)][this[t(1494)]][t(930)]=0:this[t(1494)]===l[t(1178)].audioTest[t(585)]&&(l.core[t(754)][t(930)]=0),this.index=0):this.index++)}catch(e){i[t(574)](this[t(1494)],e[t(1214)]())}}}return l[o(1350)]=function(){const e=o,t=[0,1,2,3,4,4,5,5,5,5,6,6,6,6,6,7,7,7,7,8,8,8,9,9,9,9,9,9,9,9,9,9,9],r=(e,t,r)=>{const o=L,n=Date[o(542)]();e[o(930)]>8&&!e.muteAudio&&r?(0===e[o(809)]&&(e.startSpeakTime=n),e[o(1122)]=n,e.startMuteTime=0):(0===e.startMuteTime&&(e[o(872)]=n),n-e[o(872)]>t?(e.isInspired&&(i[o(574)](o(1062)+e.publishID+", type: "+e.type+o(1228)+e[o(711)]),e[o(642)]=!1),e[o(809)]=0,e[o(1122)]=0,e[o(872)]=0):e.startSpeakTime>0&&(e[o(1122)]=n))},n=e=>{e=e>=100?99:e;return 10*t[Math[L(826)](33*e/100)]};Object[e(834)](l[e(1178)][e(425)]).forEach((t=>{const o=e;if(!t.pc||"connected"!==t.pc[o(1170)])return;let s=t[o(530)],a=t.type;!l[o(643)].audio[s]&&(l[o(643)].audio[s]={audioLevel:0,levelList:[],isInspired:!1,local:!1,muteAudio:t[o(1553)],publishID:s,type:a,startSpeakTime:0,startMuteTime:0,continueSpeakTime:0,startVoiceMax:0,continueVoiceMax:0});const c=l.historyReport[o(445)][s];if(l.audioContext&&t[o(319)]&&t.stream[o(781)]()[o(532)]>0&&!c.audioProcessor){let e,r=l[o(1449)][o(1220)](t[o(319)]);u?(e=new p(l[o(1449)],s),r[o(955)](e)):(e=l[o(1449)].createScriptProcessor(4096,1,1),r[o(955)](e),e[o(955)](l[o(1449)][o(560)]),e[o(616)]("audioprocess",(e=>{const t=o;let r=e[t(731)][t(428)](0);try{c.audioLevel=Math.floor(100*Math.max[t(1297)](Math,r))}catch(e){i[t(574)](s,e[t(1214)]())}}))),c.audioSource=r,c[o(236)]=e,c.stream=t[o(319)]}t.muteAudio?c[o(930)]=0:l[o(643)][o(1027)]&&(c[o(930)]=n(c[o(930)])),c.levelList[o(1129)](c[o(930)]),c[o(1267)][o(532)]>=20&&(l[o(1408)].audioLevelLog&&i[o(574)](o(671)+s+", levelList:",c[o(1267)]),c[o(1267)]=[]),l[o(643)][o(1027)]&&r(c,l[o(643)][o(1408)].inactiveDuration,!!t.pc)})),[l[e(1178)][e(861)],l[e(1178)][e(1418)],l[e(1178)][e(609)]][e(294)](Object.values(l[e(1178)][e(1189)]))[e(352)]((t=>{const o=e;if(!t[o(413)])return;let s=t[o(585)],a=t[o(973)],c=a?s+"-"+a:s;!l.historyReport[o(445)][c]&&(l[o(643)][o(445)][c]={audioLevel:0,levelList:[],isInspired:!1,local:!0,muteAudio:t.muteAudio,publishID:t.id,type:c,startSpeakTime:0,startMuteTime:0,continueSpeakTime:0});const d=l[o(643)][o(445)][c];if(!d[o(236)]&&l[o(1449)]&&t.stream&&t[o(319)][o(781)]()[o(532)]>0){let e,r=l.audioContext.createMediaStreamSource(t.stream);u?(e=new p(l[o(1449)],c),r[o(955)](e)):(e=l[o(1449)][o(851)](4096,1,1),r[o(955)](e),e[o(955)](l.audioContext[o(560)]),e[o(616)](o(875),(e=>{const t=o;let r=e[t(731)][t(428)](0);if(r)try{d[t(930)]=Math[t(826)](100*Math[t(1179)][t(1297)](Math,r))}catch(e){i[t(574)](c,e[t(1214)]())}}))),d[o(1045)]=r,d[o(236)]=e}l.historyReport[o(1027)]&&(d[o(930)]=n(d[o(930)])),d[o(1267)][o(1129)](d[o(930)]),d.levelList[o(532)]>=20&&(l.options[o(690)]&&i.logInfo(o(209)+c+o(1083),d[o(1267)]),d[o(1267)]=[]),l[o(643)][o(1027)]&&r(d,l[o(643)][o(1408)][o(1322)],!!t.pc)}));const a=l.historyReport[e(445)],c={remote:[],local:[]};if(l.historyReport.enableInspire){const t=l[e(643)].options[e(1277)];let r=0,o=null,n=null;c.inspiredStream=null,Object[e(1015)](a)[e(532)]>0&&(Object[e(1015)](a)[e(352)]((s=>{const c=e,d=a[s];!n&&d.isInspired?n=d:n&&d[c(642)]&&i[c(1366)](c(1357)+d[c(530)]);let u=0;d[c(809)]>0&&(u=d[c(1122)]-d.startSpeakTime),(0===r&&u>t||r>d.startSpeakTime&&u>t)&&(r=d[c(809)],o=d)})),!n&&o&&(n=o,n[e(642)]=!0,n[e(872)]=0,i[e(574)](e(751)+n[e(530)]+", type: "+n[e(585)]+e(1228)+n[e(711)]+e(582)+(n.continueSpeakTime-n[e(809)]))),Object[e(1015)](a)[e(352)]((t=>{const r=e,o=a[t],n={publishID:o[r(530)],type:o.type,audioLevel:o.audioLevel,isInspired:o[r(642)]};o[r(642)]&&(c[r(1383)]=n),o[r(711)]?c.local[r(1129)](n):c[r(1371)][r(1129)](n)})),s[e(648)](s.Event[e(1340)],c))}else Object[e(1015)](a).length>0&&(Object.keys(a)[e(352)]((t=>{const r=e,o=a[t],n={publishID:o.publishID,type:o[r(585)],audioLevel:o[r(930)]};o.local?c[r(711)][r(1129)](n):c[r(1371)].push(n)})),s[e(648)](s[e(1513)][e(1340)],c))},l[o(381)]=function(e,t,r,n,s){const a=o;if(!l[a(1449)]&&i[a(1366)](a(354)),!t)return l[a(1440)](),clearInterval(l[a(1340)]),void delete l[a(1340)];l.audioReport||(l.historyReport[a(1027)]=n,s&&(l.historyReport[a(1408)]=s),l[a(1340)]=setInterval(l.routineAudioReport,r))},l.streamAudioTest=function(e,t,r){const n=o,s=l[n(1178)].audioTest;if(!e)return clearInterval(s.auidoInterval),s[n(930)]=0,s[n(1267)]=[],void(s[n(319)]&&l[n(1281)]());s[n(319)]=t,l[n(1379)](),i[n(574)](n(962)+r),s[n(146)]=setInterval(l[n(172)],r)},l[o(172)]=function(){const e=o,t=[0,1,2,3,4,4,5,5,5,5,6,6,6,6,6,7,7,7,7,8,8,8,9,9,9,9,9,9,9,9,9,9,9],r=l[e(1178)].audioTest;if(!r.audioProcessor&&l[e(1449)]&&r[e(319)]&&r[e(319)].getAudioTracks()[e(532)]>0){let t,o=l[e(1449)][e(1220)](r[e(319)]);u?(t=new p(l.audioContext,r.type),o[e(955)](t)):(t=l.audioContext[e(851)](4096,1,1),o.connect(t),t.connect(l[e(1449)].destination),t[e(616)]("audioprocess",(t=>{const o=e;let n=t[o(731)].getChannelData(0);if(n)try{r[o(930)]=Math.floor(100*Math.max[o(1297)](Math,n))}catch(e){i[o(574)](sid,e[o(1214)]())}}))),r[e(1045)]=o,r[e(236)]=t}r.audioLevel=(e=>{e=e>=100?99:e;return 10*t[Math.floor(33*e/100)]})(r[e(930)]),r[e(1267)][e(1129)](r[e(930)]),r[e(1267)].length>=20&&(i[e(574)](e(959),r[e(1267)]),r[e(1267)]=[]),s[e(648)](s.Event[e(754)],{audioLevel:r[e(930)],type:r[e(585)]})},l[o(1555)]=function(e=!0,t="",r,n={}){const i=o;let s=l[i(643)][i(741)][t];!s&&(s={timestamp:r.timestamp,bytesSent:0,framesSent:0,framesEncoded:0});let a=r.timestamp-s.timestamp;n[i(521)]=r[i(524)]||0,n[i(529)]=r[i(161)]||0;let c=i(149)+(e?i(1510):"Received");n[i(1213)]=w(r[c],s[c],a,8);let d=i(988)+i(e?1510:1478),u=i(1505)+i(e?1510:1478);n[d]=w(r[u],s[u],a,1e3);let p=i(988)+i(e?359:1464),m=i(1505)+(e?"Encoded":i(1464));n[p]=w(r[m],s[m],a,1e3)},l.setStreamReport=function(e=!0,t="",r){const n=o;!l[n(643)][n(741)][t]&&(l[n(643)][n(741)][t]={}),l[n(643)].video[t][n(971)]=r.timestamp;let i=n(149)+(e?"Sent":n(1478));l[n(643)].video[t][i]=r[i];let s=n(1505)+(e?n(1510):"Received");l[n(643)][n(741)][t][s]=r[s];let a="frames"+n(e?359:1464);l[n(643)][n(741)][t][a]=r[a]},l.routineVideoReport=function(){const e=o;let t={remote:[],local:[]},r=[];Object[e(834)](l[e(1178)][e(425)])[e(352)]((o=>{const n=e;r[n(1129)](new Promise((e=>{const r=n;if(!o.pc||o.pc[r(1170)]!==r(808))return e();o.pc[r(1455)]()[r(1419)]((n=>{const i=r;let s=o.publishID,a={publishID:o[i(530)],type:o.type};return n[i(352)]((e=>{const t=i;e[t(585)]===t(1573)&&e[t(1502)]===t(741)&&e[t(845)]!==l[t(1178)][t(639)]&&(l[t(1555)](!1,o[t(530)],e,a),l[t(415)](!1,o[t(530)],e))})),t.remote[i(1129)](a),!l[i(643)][i(741)][s]&&(l[i(643)][i(741)][s]={}),!l[i(643)].video[s][i(603)]&&(l[i(643)][i(741)][s][i(603)]={bitrateList:[],FpsList:[]}),l[i(643)][i(741)][s][i(603)][i(773)][i(1129)](a[i(1213)]),l.historyReport.video[s][i(603)][i(704)][i(1129)](a.videoFPSReceived),l[i(643)][i(741)][s].reportInfo[i(773)][i(532)]>=20&&(l[i(643)][i(741)][s].reportInfo[i(773)]=[],l[i(643)][i(741)][s][i(603)][i(704)]=[]),e()}))})))})),[l[e(1178)].camera,l[e(1178)].screen,l[e(1178)].custom][e(294)](Object[e(834)](l[e(1178)].cameraEx))[e(352)]((o=>{const n=e;let i=o[n(973)],s=o[n(585)],a=i?s+"-"+i:s;o[n(413)]&&o.pc&&"connected"===o.pc[n(1170)]&&r[n(1129)](new Promise((e=>{const r=n;o.pc.getStats()[r(1419)]((n=>{const i=r;let s=o.id,c={publishID:o.id,type:a,videoFrameWidth:0,videoFrameHeight:0,videoBitrate:0,videoFPSSent:0,videoFPSEncoded:0},d=[];n.forEach((e=>{const t=L;"outbound-rtp"===e.type&&e[t(1502)]===t(741)&&d[t(1129)](e)})),d.sort(((e,t)=>e[i(161)]-t.frameHeight));for(let e=o[i(1055)];e>=0;e--){let t=d[e];if(t&&t[i(1251)]){l.getStreamReport(!0,a,t,c),l.setStreamReport(!0,a,t);break}}return t[i(711)][i(1129)](c),!l.historyReport[i(741)][s]&&(l.historyReport[i(741)][s]={}),!l[i(643)][i(741)][s][i(603)]&&(l[i(643)].video[s][i(603)]={bitrateList:[],FpsList:[]}),l.historyReport[i(741)][s][i(603)][i(773)][i(1129)](c[i(1213)]),l.historyReport[i(741)][s][i(603)][i(704)][i(1129)](c[i(1116)]),l.historyReport[i(741)][s][i(603)][i(773)][i(532)]>=20&&(l[i(643)][i(741)][s][i(603)][i(773)]=[],l.historyReport[i(741)][s].reportInfo[i(704)]=[]),e()}))})))})),Promise[e(1095)](r)[e(1419)]((()=>{const r=e;Object.keys(t)[r(532)]>0&&s[r(648)](s[r(1513)][r(870)],t)}))},l[o(1236)]=function(e,t){const r=o;e?l[r(870)]||(l.videoReport=setInterval(l[r(250)],t)):l[r(870)]&&(clearInterval(l[r(870)]),delete l[r(870)])},l[o(788)]=function(){const e=o,t=l[e(1178)][e(403)],r=t.uplinkStats,n=t[e(1568)];t[e(1458)];const i={local:[],remote:[],level:0};l.emitNetWeakReport(),Object[e(1015)](r).forEach((t=>{const r=e,o=l[r(1174)](t);i[r(711)].push({level:l[r(885)](t,!0),publishID:o.id})})),Object[e(1015)](n).forEach((t=>{const r=e,o=l[r(1174)](t);i[r(1371)][r(1129)]({level:l.getStreamNetLevel(t,!1),subscribeID:o.id,publishID:o[r(530)]})})),i[e(448)]=l[e(935)](),s.emit(s[e(1513)][e(145)],i)},l[o(351)]=function(){const e=o,t=l[e(1178)].network[e(986)],r={local:[],remote:[]};Object[e(1015)](t).forEach((o=>{const n=e,i=t[o],s=l.getStreamInfo(o);i&&s&&i[n(1313)]&&(i.isChange=!1,s.local?(r[n(711)].push({weak:!!i[n(231)],publishID:s.id}),i[n(231)]&&l[n(1196)](l.LogType[n(1465)],{errorType:l[n(490)][n(1485)],errorCode:l[n(422)].Rtc.UplinkWeak,errorDesc:n(702)})):r[n(1371)][n(1129)]({weak:!!i[n(231)],remoteWeak:!!s[n(324)],subscribeID:s.id,publishID:s[n(530)]}),l[n(513)](l[n(1178)][n(1096)],s.id,!!i[n(231)]))})),(r.local[e(532)]>0||r.remote[e(532)]>0)&&s.emit(s[e(1513)][e(732)],r)},l[o(583)]=function(){const e=o;clearInterval(l[e(1187)]),l[e(1187)]=setInterval((()=>{const t=e;l[t(1196)](l[t(444)].QosEvent)}),l[e(1408)][e(1547)])},l[o(248)]=function(){const e=o,t=100;let r=0,n=0,a=0;function c(t){const r=e;l[r(1408)][r(1504)]&&t[r(352)]((e=>{const t=r;if(e[t(228)]===l[t(1374)].Video||e[t(1444)]===l[t(1374)][t(1091)]){const{streamInfo:r}=e;i.logInfo("stuckData:"+e.mediaType+"-"+e[t(1142)]+"-"+e.playDuration+"-"+e[t(479)]+"-"+e[t(245)]+"-"+e.stuckDuration+t(1145)+!document[t(910)]+","+r[t(984)]+"-"+r.totalFreezesDuration+"-"+r[t(882)]),e.stuckDuration/e[t(301)]>.19&&!e.streamInfo[t(410)]&&(e[t(880)][t(410)]=!0,s[t(648)](s[t(1513)][t(410)]))}}))}function d(t,r,o){const n=e,i=typeof t[n(977)]===n(1123)?t[n(977)]:r[n(280)],s=typeof t[n(1073)]===n(1123)?t[n(1073)]:r.stuckDuration,a=Date[n(542)](),c={streamInfo:o,mediaType:r[n(585)],stuckCount:i-r[n(280)],stuckDuration:s-r[n(577)],spanDuration:a-r[n(684)],playDuration:r[n(301)],weakDuration:r[n(479)],mute:r[n(301)]?0:1};return r[n(280)]=i,r.stuckDuration=s,r[n(684)]=a,r[n(301)]=0,r[n(479)]=0,c}clearInterval(l.stuckLogTimer),l[e(621)]=setInterval((()=>{const o=e;if(document[o(910)]){r=0,n=0;const e=[];Object[o(834)](l[o(1178)][o(425)]).forEach((t=>{const r=o;if(l[r(1178)].stuckData[t.id]){const o=l[r(1178)].stuckData[t.id],n=Date[r(542)](),i=15e3;n-o[r(445)].time>=i&&e[r(1129)](d({interruptionCount:0,totalInterruptionDuration:0},o.audio,t)),n-o[r(741)][r(684)]>=i&&e.push(d({interruptionCount:o[r(741)][r(951)],totalInterruptionDuration:o.video[r(1080)]},o[r(741)],t)),delete l.core[r(177)][t.id]}})),e.length>0&&(l[o(1196)](l.LogType.mediaStuck,e),c(e))}else{let e=!1,i=!1;r++,r>=6&&(e=!0,r=0),n++,n>=300&&(i=!0,n=0),a++;const s=[],u=[];Object[o(834)](l.core.publishers)[o(352)]((r=>{const c=o;!l[c(1178)].stuckData[r.id]&&(l[c(1178)][c(177)][r.id]={audio:{stuckCount:0,stuckDuration:0,weakDuration:0,time:Date[c(542)](),type:l[c(1374)][c(657)],playDuration:0,playTime:Date[c(542)]()},video:{initTime:Date[c(542)](),stuckCount:0,stuckDuration:0,weakDuration:0,time:Date[c(542)](),type:r.type===l[c(858)][c(1372)]?l[c(1374)][c(1429)]:l[c(1374)][c(1091)],gapList:[],framesDecoded:0,beginStuckTime:0,lastIntervalTime:Date.now(),totalStuckCount:0,totalStuckDuration:0,playDuration:0,playTime:Date.now()}});const p=l[c(1178)][c(177)][r.id];r[c(1530)]===l.PlatformType[c(1261)]&&r[c(585)]===l[c(858)][c(1091)]&&(a>=12?(a=0,e=!0):e=!1),u.push(new Promise((o=>{const a=c;if(!r.pc||"connected"!==r.pc[a(1170)]||!r[a(1218)]||!l[a(337)]())return o();r.pc[a(1455)]()[a(1419)]((c=>{const u=a;c[u(352)]((o=>{const a=u;if(o[a(585)]===a(1573)&&o[a(1502)]===a(445)){const e=Date[a(542)]();!(r[a(1553)]||r[a(811)])&&(p.audio[a(301)]+=e-p[a(445)][a(356)]),p.audio[a(356)]=e,i&&s[a(1129)](d(o,p[a(445)],r))}else if(o[a(585)]===a(1573)&&o[a(1502)]===a(741)){const c=p[a(741)],u=r.muteVideo||r[a(1574)];if("number"===typeof o.framesDecoded&&o.framesDecoded>0){c[a(1290)][a(1129)]({mute:u,framesDecoded:o.framesDecoded});const i=l[a(1178)][a(403)][a(986)][r.id],s=i&&i[a(231)]||r[a(324)],d=Date[a(542)]();if(!u){const e=d-c[a(356)];c[a(301)]+=e,s&&(c[a(479)]+=e)}if(c[a(356)]=d,e){if(u||s)c[a(401)]&&c[a(499)]&&(c[a(1080)]+=c[a(499)]-c[a(401)]),c[a(401)]=0;else{if(o.framesDecoded<=c[a(984)]){if(!c[a(401)]){c[a(401)]=c[a(499)],c[a(951)]++;const e=c.gapList[a(313)](0,c[a(1290)][a(532)]-6);e&&e.forEach((e=>{const r=a;!e[r(245)]&&c[r(984)]===e.framesDecoded&&(c.beginStuckTime-=t)}))}}else if(c[a(401)]){c[a(1080)]+=c[a(499)]-c[a(401)];c[a(1290)][a(313)](c[a(1290)][a(532)]-6,c[a(1290)][a(532)]-1)&&c[a(1290)].forEach((e=>{const r=a;!e.mute&&c[r(984)]===e[r(984)]&&(c[r(1080)]+=t)})),c[a(401)]=0}r[a(882)]=o[a(882)],r[a(1245)]=o[a(1245)],r[a(984)]=o[a(984)]}c[a(525)]&&(c.totalStuckCount=0,c[a(1080)]=0,Date.now()-c[a(525)]>400&&(c.initTime=null)),o.interruptionCount=c[a(951)],o.totalInterruptionDuration=c[a(1080)],c[a(984)]=o[a(984)],c.lastIntervalTime=Date.now()}n>12&&c.gapList[a(532)]>0&&c[a(1290)][a(1265)]()}i&&(c.beginStuckTime&&(c[a(1080)]+=c[a(499)]-c[a(401)],c[a(401)]=0,o[a(1073)]=c[a(1080)]),s[a(1129)](d(o,c,r)),c.gapList=[])}})),o()}))[a(1396)]((e=>{o()}))})))})),u[o(532)]>0&&Promise[o(1095)](u)[o(1419)]((()=>{const e=o;i&&s[e(532)]>0&&(l[e(1196)](l[e(444)][e(804)],s),c(s))}))}}),t)},l[o(539)]=function(e,t,r){let o=0;return o=e<=t?1:e>=r?0:1-(e-t)/(r-t),o},l.fetchRangePercentH=function(e,t,r){let o=0;return o=e<=t?0:e>=r?1:(e-t)/(r-t),o},l[o(331)]=function(e){const t=o;let r,n=0;return r=e.tag?JSON.parse(JSON[t(1064)](l[t(1408)][t(981)])):JSON[t(562)](JSON[t(1064)](l[t(1408)][e[t(585)]+t(940)])),r[t(313)](e[t(1055)]+1,r[t(532)]-e[t(1055)]-1),r[t(352)]((e=>{n+=e[t(520)]})),n},l.getLayerBw=function(e,t){const r=o;let n;return n=e[r(973)]?JSON[r(562)](JSON[r(1064)](l[r(1408)].cameraExLayers)):JSON[r(562)](JSON[r(1064)](l[r(1408)][e[r(585)]+r(940)])),n[t][r(520)]},l.getNetworkMinBw=function(e,t){const r=o,{kMinVideoBitrate:n,kMinVideoBitrate2:i}=l[r(1178)][r(403)][r(1458)];let s=Math[r(826)](e===l.StreamType.Screen?t/4:t/3);return s>i?s=i:s<n&&(s=n),s},l[o(935)]=function(){const e=o,t=l.core[e(403)],r=Object[e(1015)](t[e(453)]),n=Object[e(1015)](t[e(1568)]);if(0===r[e(532)]&&0==n[e(532)]||!l.ws||l.ws[e(1531)]!==WebSocket[e(1441)])return 0;let i=1,s=0,a=!1;r[e(532)]>0&&(i=0,r[e(352)]((r=>{const o=e,n=t[o(453)][r],c=t[o(986)][r];n[o(1553)]&&n[o(1369)]||(s++,(!c||!c[o(231)])&&(i+=n[o(448)]),!n[o(1369)]&&(a=!0))})));let c=1,d=0,u=!1;n[e(532)]>0&&(c=0,n[e(352)]((r=>{const o=e,n=t[o(1568)][r],i=t[o(986)][r];n.muteAudio&&n[o(1369)]||(d++,(!i||!i[o(231)])&&(c+=n[o(448)]),!n[o(1369)]&&(u=!0))})));let p=1;0==s&&0==d?p=0:s>0&&d>0?a&&u?p=(i+c)/(s+d):u?!a&&(p=c/d):p=i/s:s>0?p=i/s:d>0&&(p=c/d);let m=0;return(s>0||d>0)&&(m=Math[e(826)](4*p+1.5)),m},l.getStreamNetLevel=function(e,t,r=!1){const n=o,i=l[n(1178)][n(403)],s=l[n(1174)](e),a=t?i[n(453)][e]:i[n(1568)][e],c=i.netWeakStats[e];let d=0;return!r&&(c&&c[n(231)]||s&&s[n(324)])?d=1:a&&a[n(448)]&&(d=Math[n(826)](4*a.level+1.5)),d},l[o(1314)]=function({streamInfo:e,pair:t,videoOutList:r,audioOut:n,videoRemoteInList:i,audioRemoteIn:s}){const a=o,c=l.core.network[a(453)][e.id],{rttMin:d,rttMax:u,kMinVideoBitrate:p,kMinVideoBitrate2:m,fractionLostMin:f,fractionLostMax:b}=l[a(1178)][a(403)][a(1458)],y=l[a(331)](e),v={id:e.id,type:e[a(585)],muteAudio:e[a(1553)],muteVideo:e[a(1369)],timestamp:t?t[a(971)]:Date.now(),level:0,outBandWidth:y};if(-1===e[a(1055)])return v[a(448)]=1,v;if(!t)return c;let g=l[a(150)](e[a(585)],l[a(1259)](e,0));if(v.outBandWidth=t[a(625)],r.splice(e[a(1055)]+1,r.length-e[a(1055)]-1),i[a(313)](e[a(1055)]+1,i.length-e[a(1055)]-1),s&&(v.audioRtt=s[a(1147)],v.audioPktsLost=s[a(1119)]),n&&(v[a(320)]=n.packetsSent),i&&i[a(532)]>0){const e=i[i[a(532)]-1];v[a(627)]=e[a(1147)],v.videoPktsLost=0,i[a(352)]((e=>v.videoPktsLost+=e.packetsLost))}if(r&&r[a(532)]>0){const e=r[r[a(532)]-1];v.videoPktsSent=0,v[a(1424)]=0,r[a(352)]((e=>{const t=a;v[t(594)]+=e.packetsSent,v[t(1424)]+=e[t(1251)]})),v[a(652)]=e.framesSent,c&&(v[a(931)]=v.framesSent<c[a(652)]||v[a(652)]-c[a(652)]>100?15:Math[a(826)]((v.framesSent-c[a(652)])/(v[a(971)]-c[a(971)])*1e3),v[a(1101)]=Math.floor(8*(v[a(1424)]-c[a(1424)])/(v[a(971)]-c.timestamp)*1e3),v[a(1317)]&&c[a(1317)]<v[a(1317)]&&(v[a(1101)]-=Math[a(826)](1200*(v[a(1317)]-c[a(1317)])*8/(v.timestamp-c[a(971)])*1e3)))}if(!c)return v[a(448)]=0,v;let h=1,S=1,w=1,I=1,E=1;if(s&&!v[a(1553)]){v[a(344)]&&(S=l.fetchRangePercentL(v[a(344)],d,u));const e=v.audioPktsSent-c[a(320)],t=v[a(1524)]-c[a(1524)];if(e>0&&t>0){const r=t/e*100;I=l.fetchRangePercentL(r,f,b)}}if(i&&i[a(532)]>0&&!v[a(1369)]){v.videoRtt&&(w=l.fetchRangePercentL(v.videoRtt,d,u));const e=v[a(594)]-c[a(594)],t=v.videoPktsLost-c[a(1317)];if(e>0&&t>0){const r=t/e*100;E=l[a(539)](r,f,b)}}return!v.muteVideo&&y>0&&v[a(1101)]&&i&&i[a(532)]>0&&r&&r[a(532)]>0&&(h=l.fetchRangePercentH(v[a(1101)],g,y)),v[a(1553)]&&v.muteVideo?v[a(448)]=0:v.muteAudio||v[a(1369)]?v[a(1553)]?v[a(448)]=.1*w+.2*E+.7*h:v[a(1369)]&&(v[a(448)]=.5*S+.5*I):v[a(448)]=.1*(S+w)+.1*(I+E)+.6*h,v},l[o(1068)]=function({streamInfo:e,pair:t,video:r,audio:n}){const i=o,s=l[i(1178)].network[i(1568)][e.id],{delayMin:a,delayMax:c,jitterMin:d,jitterMax:u,kMinVideoFrameRate:p}=l.core[i(403)][i(1458)],m=e[i(1107)][e[i(1055)]],f=l[i(150)](e[i(585)],e[i(1107)][0][i(520)]),b={};if(b.id=e.id,b[i(585)]=e[i(585)],b.muteAudio=e[i(1553)]||e[i(811)],b[i(1369)]=e[i(1369)]||e.localMuteVideo||e[i(1280)],b[i(971)]=t?t[i(971)]:Date[i(542)](),b[i(448)]=0,b.inBandWidth=m[i(520)],!t)return s;if(n&&(b[i(1212)]=1e3*t[i(1008)]+(n.jitterBufferEmittedCount?n[i(758)]/n[i(1507)]*1e3:0),b[i(406)]=1e3*n.jitter,b[i(617)]=n[i(363)],b[i(1524)]=n[i(1119)]),r&&(b[i(924)]=1e3*t[i(1008)]+(r.jitterBufferEmittedCount?r.jitterBufferDelay/r.jitterBufferEmittedCount*1e3:0),b[i(1361)]=(r[i(1454)]-r[i(984)]-r[i(928)])/r[i(665)]*1e3,b.videoJitter=1e3*r[i(1544)],b.videoPktsRcvd=r.packetsReceived,b[i(1317)]=r.packetsLost,b[i(1454)]=r[i(1454)],b[i(1514)]=r[i(829)],s&&s[i(1514)]&&(b[i(1275)]=Math.floor(8*(b.videoBytesReceived-s.videoBytesReceived)/(b[i(971)]-s[i(971)])*1e3))),!s)return b.level=0,b;r&&(b[i(931)]=Math[i(826)]((b[i(1454)]-s[i(1454)])/(b[i(971)]-s.timestamp)*1e3));let y=1,v=1,g=1,h=1;return n&&!b[i(1553)]&&(v=l.fetchRangePercentL(b[i(1212)],a,c),g=l[i(539)](b[i(406)],d,u)),r&&!b[i(1369)]&&(l[i(539)](b[i(924)],a,c),l[i(539)](b[i(689)],d,u),m[i(520)]>0&&b[i(1275)]&&(y=l[i(618)](b[i(1275)],f,m.targetBw)),r[i(665)]>0&&(h=l[i(618)](b.videoFps,p,m[i(477)]))),b.muteAudio&&b[i(1369)]?b[i(448)]=0:b[i(1553)]||b.muteVideo?b.muteAudio?b.level=.8*y+.2*h:b[i(1369)]&&(b[i(448)]=.5*v+.5*g):b[i(448)]=.1*v+.1*g+.1*h+.7*y,b},l[o(169)]=function(e,t){const r=o,n=l[r(1178)][r(403)][r(986)],{kNetUpWeakBitrate:i,networkQuality:s,kNetDownWeakFps:a}=l.core.network[r(1458)],c=Date[r(542)](),d=l.getStreamNetLevel(e.id,e[r(711)],!0),u=t[r(931)],p=e[r(711)]?t[r(1101)]:t[r(1275)],m=15e3,f=l.options[r(1271)]+500;let b=null;function y(e){const t=r;e[t(277)]=0,e.averageBitrate=0,e.totalBitrate=0,e.totalVideoFps=0,e[t(240)]=0}0!==d&&(n[e.id]?b=n[e.id]:(b={id:e.id,averageBitrate:0,totalBitrate:0,sampleNum:0,updateTime:0,startLowBitrateTime:0,startNormalBitrateTime:0,isWeak:!1},n[e.id]=b),b[r(979)]=c,e[r(1369)]||e[r(1574)]?(b[r(1029)]=0,b[r(698)]=0,y(b)):(e[r(711)]?d<=s[r(1470)]&&!b[r(231)]?0===b[r(1029)]&&(b.startLowBitrateTime=c,y(b)):d>s[r(1470)]&&b[r(231)]&&0===b[r(1387)]&&(b[r(1387)]=c,y(b)):(d<=s[r(1452)]||u<=a)&&!b.isWeak?0===b.startLowBitrateTime&&(b.startLowBitrateTime=c,y(b)):d>s[r(1452)]&&u>a&&b[r(231)]&&0===b[r(1387)]&&(b.startNormalBitrateTime=c,y(b)),b[r(1029)]>0&&(b[r(240)]++,b[r(969)]+=p,b.totalVideoFps+=u,b[r(397)]=b[r(969)]/b[r(240)],b[r(277)]=b[r(443)]/b.sampleNum,e.local?d>s[r(1470)]?(b[r(1029)]=0,y(b)):c-b[r(1029)]+f>m&&(b[r(1029)]=0,y(b),!b[r(231)]&&(b.isWeak=!0,b[r(1313)]=!0)):d>s.vbad&&u>a?(b[r(1029)]=0,y(b)):c-b.startLowBitrateTime+f>m&&(b[r(1029)]=0,y(b),!b.isWeak&&(b[r(231)]=!0,b[r(1313)]=!0))),b[r(1387)]>0&&(b[r(240)]++,b.totalBitrate+=p,b[r(443)]+=u,b.averageBitrate=b.totalBitrate/b.sampleNum,b.averageVideoFps=b[r(443)]/b.sampleNum,e[r(711)]?d<=s[r(1470)]?(b[r(1387)]=0,y(b)):c-b[r(1387)]+f>m&&(b[r(1387)]=0,y(b),b.isWeak&&(b[r(231)]=!1,b[r(1313)]=!0)):d<=s[r(1452)]||u<=a?(b[r(1387)]=0,y(b)):c-b.startNormalBitrateTime+f>m&&(b.startNormalBitrate_time=0,y(b),b[r(231)]&&(b[r(231)]=!1,b[r(1313)]=!0)))))},l[o(1066)]=function(){const e=o,t=[];Object.values(l.core[e(425)])[e(352)]((e=>{t.push(new Promise((t=>{const r=L;if(!e.pc||e.pc[r(1170)]!==r(808))return t();e.pc[r(1455)]()[r(1419)]((o=>{const n=r,i={streamInfo:e,video:null,audio:null,pair:null};o[n(352)]((e=>{const t=n;e[t(585)]===t(1400)&&e[t(1324)]===t(672)?i[t(746)]=e:"inbound-rtp"===e[t(585)]&&e[t(845)]!==l.core[t(639)]&&(e[t(1502)]===t(741)?e[t(468)]!==t(348)&&(i.video=e):i[t(445)]=e)}));const s=l[n(1068)](i);return s&&(l[n(1178)][n(403)][n(1568)][e.id]=s,i.video&&l[n(169)](e,l[n(1178)][n(403)][n(1568)][e.id])),t()}))})))}));[l[e(1178)][e(861)],l[e(1178)][e(1418)],l[e(1178)][e(609)]][e(294)](Object[e(834)](l[e(1178)].cameraEx))[e(352)]((r=>{const o=e;r[o(413)]&&r.pc&&r.pc[o(1170)]===o(808)&&t.push(new Promise((e=>{const t=o;r.pc[t(1455)]()[t(1419)]((o=>{const n=t,i={streamInfo:r,pair:null,videoOutList:[],audioOut:null,videoRemoteInList:[],audioRemoteIn:null};o.forEach((e=>{const t=L;e[t(585)]===t(1400)&&e.state===t(672)?i[t(746)]=e:e.type===t(291)?"video"===e.kind?i[t(926)].push(e):i[t(992)]=e:e.type===t(707)&&(e.kind===t(741)?i[t(842)][t(1129)](e):i[t(1327)]=e)}));const s=l.getUplinkNetworkReport(i);return s&&(l.core[n(403)][n(453)][r.id]=s,l.updateNetWeakStats(r,s)),e()}))})))})),Promise[e(1095)](t)[e(1419)]((()=>{l[e(788)]()}))},l.streamNetworkReport=function(e,t){const r=o;clearInterval(l[r(145)]),delete l[r(145)],e&&(l[r(145)]=setInterval(l[r(1066)],t))},l[o(1009)]={},l[o(522)]=function(e=!0,t="",r=!0,n="",s){const c=o;let u;if(e){if(u=n?l[c(1178)][c(1189)][n]:l[c(1178)][t],!u[c(413)]||!u.stream)return i[c(1366)](c(469),t,c(726)),l[c(694)](l[c(246)][c(1104)],c(937))}else{if(u=l[c(1174)](t),!u)return i[c(1366)](c(1405),t,c(759)),l.emitError(l[c(246)][c(1104)],c(1567));if(!u[c(1218)])return i.logWarn(c(469),t,c(584)),l[c(694)](l[c(246)].RecordError,"record remote before ready")}let p=n?t+"-"+n:t;if(!r)return l[c(1009)][p]?(l.recorders[p][c(226)].stop(),l[c(1009)][p][c(1160)]=s,l[c(1009)][p][c(292)]):(i.logError("can not stop recording, stream",p,"not found"),l[c(694)](l.ErrorCode[c(1104)],c(1047)+p));{if(l[c(1009)][p])return;if(!d)return;let e={chunks:[],recorder:new d(u[c(319)])};e[c(292)]=new Promise((t=>{e[c(500)]=t})),e[c(226)][c(674)]=t=>{const r=c;e[r(913)][r(1129)](t[r(450)])},e[c(226)][c(1221)]=function(){const t=c;let r=new File([new Blob(e[t(913)],{type:e[t(226)][t(994)]})],t(800)+Date[t(542)]()+t(174),{type:e[t(226)][t(994)]});e[t(913)]=[],delete l[t(1009)][p],e[t(1160)]&&a&&a(r),e[t(500)](r)},e[c(226)][c(178)](),l[c(1009)][p]=e}},l[o(802)]=function(e=!0,t="",r=!0,n=""){const s=o;let c,u=1;if(c=l[s(1174)](t),!c[s(1218)])return;let p=n?t+"-"+n:t;if(r){if(l[s(1009)][p])return;if(!d)return;let e={chunks:[],type:c[s(585)],index:u++};e[s(226)]=new d(c.stream,{}),e[s(226)][s(674)]=t=>{const r=s;e[r(913)][r(1129)](t[r(450)])},e[s(226)].onstop=function(){const t=s;if(a){let r=new File([new Blob(e.chunks,{type:e.recorder.mimeType})],t(800)+e.type+"-"+Date[t(542)]()+"-"+e[t(1215)]+t(174),{type:e.recorder.mimeType});a(r)}e[t(913)]=[]},e.recorder.onerror=function(e){const t=s;console[t(1089)](t(802),e)},e[s(226)][s(178)](),l[s(1009)][p]=e}else{if(!l.recorders[p])return i[s(1241)]("can not stop recording, stream",p,s(759)),l[s(694)](l[s(246)].RecordError,s(1047)+p);l[s(1009)][p][s(226)][s(1362)](),delete l.recorders[p]}},l.print=function(e=!0,t="",r=""){const n=o;let s;if(e)if(l.core.cameraEx[r]&&l[n(1178)][n(1189)][r][n(413)]&&l[n(1178)][n(1189)][r].videoElem)s=l.core[n(1189)][r][n(464)];else{if(!(l[n(1178)][t]&&l.core[t].preview&&l[n(1178)][t][n(464)]))return i.logError(n(411)),l[n(694)](l[n(246)][n(1094)],n(814)+(r?t+"-"+r:t)+n(466));s=l[n(1178)][t][n(464)]}else{let e=l.getStreamInfo(t);if(!e||!e.ready||!e.videoElem)return i.logError(n(1528)),l[n(694)](l.ErrorCode.PrintError,n(271)+t);s=e[n(464)]}let a=document[n(391)]("canvas");return a.width=s[n(1428)]||640,a[n(683)]=s[n(1252)]||360,a[n(1566)]("2d").drawImage(s,0,0,a[n(1562)],a[n(683)]),a[n(540)](n(948))},l[o(1199)]=function(e="",t="",r,n,i,s,a,c,d,u){l[o(251)](e,t,i,r,n,d,u,a,s,c)},l[o(1543)]=function(e,t,r,n,i,s,a,c,d,u){l[o(1393)](e,t,r,n,i,s,a,c,d,u)},l[o(346)]=async function(){const t=o;i[t(574)](t(489)+l[t(1178)].unableAutoPlay[t(532)]);const r=l[t(1178)].unableAutoPlay,n=[];l.core[t(1231)]=[],r[t(352)]((e=>{const r=t;e&&e[r(958)]&&e[r(958)][r(791)]?n[r(1129)](new Promise(((t,o)=>{const n=r;e[n(720)]().then((()=>{t(e)}))[n(1396)]((()=>{i[n(1241)]("elem play fail:"+e.id),o(e)}))}))):l[r(1178)].unableAutoPlay[r(1129)](e)})),(t=>{const r=e;return Promise&&Promise.allSettled?Promise[r(1109)](t):new Promise((e=>{const o=r;if(0===t[o(532)])return e([]);const n=new Array(t[o(532)]);let i=t[o(532)];const s=()=>{i--,0===i&&e(n)};t[o(352)](((e,t)=>{const r=o;e[r(1419)]((e=>{const o=r;n[t]={status:o(567),value:e},s()})).catch((e=>{const o=r;n[t]={status:o(1019),reason:e},s()}))}))}))})(n)[t(1419)]((e=>{const r=t;let o=!1;e[r(352)]((e=>{const t=r;e.status===t(1019)&&(o=!0,l.core[t(1231)][t(1129)](e[t(439)]))})),o&&(i.logError(r(1490)+l[r(1178)].unableAutoPlay[r(532)]),setTimeout((()=>{const e=r;s[e(648)](e(481))}),1e3))}))},l[o(451)]=async function(e){const t=o;let r=t(451),n=null;if(e){if(l[t(1009)][r])return void i.logError("recordScreen has already start, sid:"+r);if(!d)return void i[t(1241)](t(434));try{let e={audio:l[t(1408)].screenEnableAudio,video:l[t(1408)][t(1294)]};e[t(741)]&&(e[t(741)]={frameRate:{ideal:l[t(1408)].screenLayers[0][t(477)]}}),n=await navigator[t(624)].getDisplayMedia(e)}catch(e){if(i[t(1241)](t(752)+e),e[t(1214)]()[t(1248)](t(253))>=0)return s[t(648)](s.Event[t(1418)],!1);l.emitPreviewError({type:l.StreamType[t(1091)],desc:t(1384),error:e})}let c={audioBitsPerSecond:128e3,videoBitsPerSecond:25e5,mimeType:t(1417)};let e={chunks:[],recorder:new d(n,c),stream:n};e[t(226)][t(674)]=r=>{const o=t;e[o(913)][o(1129)](r[o(450)])},e.recorder[t(1221)]=function(){const o=t;a&&a(new File([new Blob(e[o(913)],{type:e[o(226)][o(994)]})],o(800)+Date.now()+".webm",{type:e[o(226)][o(994)]})),e.chunks=[],delete e[o(319)],delete l[o(1009)][r]},e[t(226)][t(178)](),l[t(1009)][r]=e}else{if(!l[t(1009)][r])return i[t(1241)](t(641),r,t(759)),l.emitError(l[t(246)][t(1104)],t(1047)+r);l.recorders[r].recorder[t(1362)](),l[t(1186)](l[t(1009)][r].stream)}},l[o(941)]=async(e={},t)=>{const n=o;if(null===e)return;e instanceof Array?e[n(352)]((e=>{Object[n(1015)](e).forEach((t=>{(void 0===e[t]||null===e[t]||""===e[t])&&(e[t]=-1)}))})):e instanceof Object&&Object[n(1015)](e)[n(352)]((t=>{(void 0===e[t]||null===e[t]||""===e[t])&&(e[t]=-1)}));const i=e=>new Promise(((t,o)=>{const n=L,i={url:e[n(1323)],timeout:e[n(372)],method:e[n(531)]};e[n(531)]===n(452)?i[n(1477)]=e[n(1477)]:i.data=e[n(450)],r(i)[n(1419)]((e=>{t(e)}))[n(1396)]((e=>{200===e[n(180)]?t():o(e)}))}));if(e instanceof Array&&e[n(532)]>4){const r=Math[n(312)](e[n(532)]/4);for(let o=0;o<r;o++){let s=e[n(1445)](4*o,o!==r-1?4*o+4:e[n(532)]);v[n(299)](i,s,t)}}else v.report(i,e,t)},l[o(1103)]=function(){const e=o,t={webSocketSupported:!(!window[e(819)]||typeof window[e(819)]!==e(1224)),webRTCSupported:!(!window[e(1207)]||typeof window[e(1207)]!==e(1224)),mediaDevicesSupported:!!navigator.mediaDevices,h264DecodeSupported:!1};if(t[e(863)]){const r=RTCRtpReceiver[e(298)](e(741)),o=t=>{const r=e;return t[r(380)][r(933)]((e=>{const t=r;return e[t(994)][t(1057)]()===t(1005)}))||[]};t[e(376)]=o(r)[e(532)]>0}return t},l[o(703)]=function(e){const t=o;if(l[t(1178)][t(764)]!==e)if(l[t(1178)][t(578)]){const r=[l[t(638)][t(1017)],l[t(638)][t(878)]],o=[l[t(638)][t(1488)],l[t(638)][t(775)]];r[t(1239)](l[t(1178)].userRole)&&r[t(1239)](e)||o[t(1239)](l[t(1178)][t(764)])&&o[t(1239)](e)?(l.wsRole(e),l.cleanStreamData(!0),l.setCore({userRole:e})):l[t(694)](l.ErrorCode.SetRoleError)}else l[t(1111)]({userRole:e});else i[t(1366)](t(697))},l[o(706)]=function(){const e=o;l[e(1178)].session&&!l.core.muteAllStreamAudio?(l[e(1178)].muteAllStreamAudio=!0,l[e(1178)][e(861)][e(659)]=l[e(1178)].camera[e(1553)],l.core[e(861)].pc&&l.muteLocalStream(l[e(858)].Camera,{muteAudio:!0}),l[e(1178)][e(1418)][e(659)]=l[e(1178)][e(1418)][e(1553)],l[e(1178)][e(1418)].pc&&l[e(1278)](l[e(858)][e(1091)],{muteAudio:!0}),l[e(1178)][e(609)][e(659)]=l.core[e(609)].muteAudio,l[e(1178)][e(609)].pc&&l.muteLocalStream(l.StreamType[e(1091)],{muteAudio:!!l[e(1178)][e(609)][e(659)]},!1,l[e(1382)][e(442)]),Object[e(1015)](l[e(1178)][e(1189)])[e(352)]((t=>{const r=e;l[r(1178)][r(1189)][t][r(659)]=l[r(1178)][r(1189)][t][r(1553)],l[r(1178)][r(1189)][t].pc&&l[r(557)](t,{muteAudio:!0})})),Object.keys(l[e(1178)].publishers)[e(352)]((t=>{const r=e;l.core[r(425)][t][r(1533)]=l[r(1178)][r(425)][t][r(811)],l.muteRemoteStream(t,{muteAudio:!0})}))):i[e(1366)]("pause audio fail, session: "+!!l.core[e(578)]+e(1572)+l[e(1178)][e(1295)])},l[o(527)]=function(){const e=o;l[e(1178)][e(578)]&&l[e(1178)][e(1295)]?(l.core[e(1295)]=!1,l[e(1278)](l[e(858)][e(1372)],{muteAudio:!!l[e(1178)][e(861)].lastMuteAudio}),l.muteLocalStream(l[e(858)][e(1091)],{muteAudio:!!l[e(1178)][e(1418)][e(659)]}),l[e(1278)](l[e(858)][e(1091)],{muteAudio:!!l[e(1178)].custom[e(659)]},!1,l[e(1382)].Custom),Object[e(1015)](l[e(1178)][e(1189)])[e(352)]((t=>{const r=e;l.muteLocalStreamEx(t,{muteAudio:!!l[r(1178)].cameraEx[t].lastMuteAudio})})),Object.keys(l.core[e(425)])[e(352)]((t=>{const r=e;if(l[r(345)](t,{muteAudio:!!l.core.publishers[t][r(1533)]}),M[r(1310)]){const e=l[r(1178)][r(425)][t].audioElem;e&&(e.pause(),setTimeout((()=>{e[r(720)]()}),50))}}))):i.logWarn(e(1307)+!!l[e(1178)][e(578)]+e(1572)+l.core[e(1295)])},l.destroy=function(){const e=o;s.destroy(),l[e(1217)](null,!1),l[e(308)](null,!1),Object[e(834)](l[e(1178)][e(1189)])[e(352)]((t=>{const r=e;t[r(585)]===l.StreamType[r(1372)]?l[r(179)](null,t[r(973)],"","",!1):l[r(276)](null,t.tag,!1)})),l[e(335)](null,"",!1),l[e(877)](!0)},l.selfAESDecrypt=function(e=""){const t=o;if(e&&typeof e===t(743)&&!(e[t(532)]<45))try{let r=CryptoJS[t(901)].Utf8[t(562)](Base64[t(565)](e[t(925)](0,22))),o=CryptoJS[t(901)][t(1337)][t(562)](Base64[t(565)](e[t(925)](22,22))),n=e.substr(44);for(let e=0,r=(4-n[t(532)]%4)%4;e<r;e++)n+="=";return CryptoJS.AES.decrypt(n,r,{iv:o})[t(1214)](CryptoJS[t(901)][t(1337)])}catch(e){i[t(1241)](t(1326)+e)}},l}function j(){const r=e;let o=N(),n=o[r(965)],i=o[r(1041)];return{version:t,logs:function(e=!1){const t=r;return n[t(309)](o[t(1178)],e)},setDNS:function(e=[]){const t=r;n[t(574)](t(416)+JSON[t(1064)](e||[])+")"),0!==e[t(532)]&&e[t(352)]((e=>{const r=t;e.domain&&e.ip&&(o[r(1093)][e.domain]=e.ip)}))},init:function(e={}){o.setOption(e)},addListener:i[r(544)][r(153)](i),on:i[r(544)][r(153)](i),removeListener:i[r(768)].bind(i),removeAllListener:i[r(663)][r(153)](i),askForPermission:function(e=!1,t=!1){const i=r;if(n.logInfo(i(1342)+e+i(528)+t+")"),!e&&!t)return o.emitError(o[i(246)][i(1489)],i(1410));o[i(1136)](e,t).then()},join:function(e,t,i="",s=o[r(757)].BeiJing,a){const c=r;return n.logInfo(c(570)+e+", uid:"+t+c(392)+i+c(483)+s+", role:"+a+")"),e&&t&&typeof e===c(743)&&typeof t===c(743)?(void 0===a&&(a=o[c(1178)][c(764)]),typeof a!==c(1123)||void 0===Object[c(834)](o[c(638)])[c(409)]((e=>e===a))?o[c(694)](o[c(246)][c(1489)],c(644)):((!i||typeof i!==c(743))&&(n.logWarn(c(954)),i=""),void o[c(496)](e,t,i,s,a))):o[c(694)](o[c(246)].ParamsError,c(570)+e+c(1108)+t+", uName:"+i+" , area:"+s+")")},leave:function(){const e=r;n[e(574)]("leave()"),o[e(877)]()},preview:function(e=null,t=o[r(858)][r(1372)],i=!0){const s=r;if(n[s(574)](s(330)+(e?e.id:"")+", streamType:"+t+s(265)+i+")"),Object.values(o[s(858)])[s(1248)](t)<0)return o[s(694)](o.ErrorCode[s(1489)],s(413));t===o[s(858)][s(1372)]?o[s(1217)](e,i)[s(1419)]():o[s(308)](e,i)[s(1419)]()},previewEx:function(e=null,t,i,s,a){const c=r;return n[c(574)]("previewEx(vodeo.id:"+(e?e.id:"")+c(1177)+t+c(214)+i+c(1325)+s+c(265)+a+")"),t?!a||i||s?void o[c(179)](e,t,i,s,a):o.emitError(o[c(246)][c(1489)],"previewEx"):o.emitError(o[c(246)][c(1489)],c(1074))},previewScreenEx:function(e=null,t,i){const s=r;if(n[s(574)](s(1176)+(e?e.id:"")+s(1177)+t+s(265)+i+")"),!t)return o.emitError(o[s(246)].ParamsError,s(1250));o[s(276)](e,t,i)},previewCustom:function(e=null,t="",i=!0,s=!1,a=!1){const c=r;if(n[c(574)]("previewCustom(videoElement:"+!!e+c(807)+t+c(265)+i+", muteVideo:"+s+c(682)+a),i){if(!(e&&e instanceof HTMLElement))return o[c(694)](o.ErrorCode.ParamsError,c(414));if(!t||"string"!==typeof t)return o[c(694)](o[c(246)][c(1489)],c(473))}o[c(335)](e,t,i,s,a)},setCustomProfile:function(e,t,i){const s=r;return n[s(574)](s(1048)+!!e+s(233)+t+s(999)+(i?JSON[s(1064)](i):"")),e instanceof HTMLElement?t&&typeof t===s(743)?o.core[s(609)][s(413)]?void o[s(605)](e,t,i):o[s(694)](o[s(246)][s(1489)],"setCustomProfile: custom not preview yet"):o[s(694)](o.ErrorCode[s(1489)],"setCustomProfile: url error"):o[s(694)](o[s(246)].ParamsError,s(374))},publish:function(e=o[r(858)][r(1372)],t=""){const i=r;return n[i(574)]("publish(streamType:"+e+i(550)+JSON[i(1064)](t)+")"),Object[i(834)](o.StreamType).indexOf(e)<0?o[i(694)](o[i(246)][i(1489)],i(626)):typeof t!==i(743)?o[i(694)](o[i(246)][i(1489)],i(1139)):o[i(1178)][i(578)]?o.core[i(764)]===o.UserRole[i(878)]||o[i(1178)][i(764)]===o.UserRole[i(775)]?(n[i(1241)](i(204)),o[i(694)](o[i(246)][i(1183)],i(204))):o[i(1178)][e].preview?e===o[i(858)].Screen&&o[i(1178)][i(609)].id?(n[i(1241)]("custom sharing, can not publish"),o[i(694)](o[i(246)][i(1183)],"custom sharing, can not publish")):void o[i(822)](e,"",t):(n[i(1241)](i(1481)),o[i(694)](o[i(246)][i(1183)],i(1481))):(n.logError(i(742)),o[i(694)](o.ErrorCode.PublishError,"publish before join"))},publishEx:function(e,t=""){const i=r;return n[i(574)](i(1468)+e+i(550)+JSON[i(1064)](t)+")"),e?typeof t!==i(743)?o[i(694)](o[i(246)][i(1489)],i(353)):o[i(1178)][i(578)]?o[i(1178)][i(764)]===o.UserRole[i(878)]||o[i(1178)][i(764)]===o.UserRole[i(775)]?(n[i(1241)](i(204)),o[i(694)](o[i(246)].PublishError,i(204))):o[i(1178)][i(1189)][e]&&o[i(1178)][i(1189)][e].preview?void o[i(822)](o[i(858)][i(1372)],e,t):(n[i(1241)](i(273)),o[i(694)](o[i(246)].PublishError,i(1481))):(n[i(1241)]("publishEx before join"),o.emitError(o[i(246)].PublishError,i(742))):o[i(694)](o[i(246)][i(1489)],i(1053))},publishScreenEx:function(e,t=""){const i=r;return n[i(574)](i(891)+e+i(550)+JSON[i(1064)](t)+")"),e?"string"!==typeof t?o[i(694)](o[i(246)][i(1489)],i(545)):o[i(1178)][i(578)]?o.core.userRole===o[i(638)][i(878)]||o[i(1178)][i(764)]===o[i(638)][i(775)]?(n[i(1241)](i(204)),o.emitError(o[i(246)][i(1183)],i(204))):o[i(1178)].cameraEx[e]&&o[i(1178)][i(1189)][e].preview?void o[i(822)](o[i(858)][i(1091)],e,t):(n[i(1241)](i(1287)),o[i(694)](o[i(246)].PublishError,i(1481))):(n.logError(i(400)),o[i(694)](o[i(246)][i(1183)],"publish before join")):o[i(694)](o[i(246)][i(1489)],"publishScreenEx")},publishCustom:function(e=""){const t=r;return n[t(574)](t(238)+JSON[t(1064)](e)+")"),typeof e!==t(743)?o[t(694)](o[t(246)].ParamsError,t(1320)):o[t(1178)][t(578)]?o[t(1178)][t(764)]===o[t(638)][t(878)]||o[t(1178)].userRole===o[t(638)][t(775)]?(n[t(1241)](t(204)),o.emitError(o[t(246)].PublishError,t(204))):o[t(1178)][t(609)][t(413)]?o[t(1178)][t(1418)].id?(n.logError("screen sharing, can not publish"),o[t(694)](o.ErrorCode[t(1183)],"screen sharing, can not publish")):void o[t(822)](o[t(858)].Screen,"",e,o[t(1382)].Custom):(n[t(1241)]("publish before preview"),o[t(694)](o[t(246)][t(1183)],t(1481))):(n[t(1241)](t(742)),o[t(694)](o[t(246)].PublishError,t(742)))},unpublish:function(e=o[r(858)][r(1372)]){const t=r;if(n[t(574)]("unpublish(streamType:"+e+")"),Object[t(834)](o.StreamType).indexOf(e)<0)return o[t(694)](o[t(246)][t(1489)],t(946));o[t(305)](e,o[t(1178)][e].id)},unpublishEx:function(e=""){const t=r;if(n[t(574)](t(1480)+e+")"),!e)return o.emitError(o[t(246)][t(1489)],t(1511));o.core.cameraEx[e]&&o[t(305)](o[t(858)][t(1372)],o[t(1178)].cameraEx[e].id,e)},unpublishScreenEx:function(e){const t=r;if(n[t(574)](t(302)+e+")"),!e)return o.emitError(o[t(246)].ParamsError,"unpublishScreenEx");o[t(1178)][t(1189)][e]&&o.wsUnPublish(o[t(858)][t(1091)],o.core[t(1189)][e].id,e)},unpublishCustom:function(){const e=r;n[e(574)](e(505)),o.wsUnPublish(o.StreamType.Screen,o.core.custom.id,"",o[e(1382)][e(442)])},subscribe:function(e=null,t="",i="",s,a,c){const d=r;if(n[d(574)](d(1105)+(e?e.id:"")+d(1421)+t+d(447)+i+d(493)+s+d(682)+a+d(1363)+c+")"),!t||!i)return o.emitError(o[d(246)][d(1489)],"subscribe");const u=o[d(856)](i);if(!u||u.uid!==t)return n[d(1241)](d(1079),t,i),o.emitError(o[d(246)].SubscribeError,d(1079));i=u[d(530)],e instanceof HTMLElement&&e!==o[d(1178)][d(425)][i][d(464)]&&(o[d(772)](e),o.core[d(425)][i][d(464)]=e),o[d(1178)][d(425)][i].id?n[d(1366)](i+d(1515)):(typeof s===d(1123)&&s>=0?(s>u[d(1107)][d(532)]-1&&(s=u[d(1107)].length-1),o[d(1178)].publishers[i][d(1055)]!==s&&(o.core.publishers[i].layerIndex=s)):(s=0,o[d(1178)][d(425)][i].layerIndex=s),void 0!==a&&o[d(1178)][d(425)][i][d(811)]!==a&&(o[d(1178)][d(425)][i][d(811)]=a),typeof c!==d(733)&&o[d(1178)][d(425)][i][d(1574)]!==c&&(o[d(1178)][d(425)][i][d(1574)]=c),0===s&&o.options[d(288)]&&o[d(1178)][d(425)][i][d(1107)][d(532)]>1&&(o[d(1178)][d(425)][i][d(1067)]=s,o[d(1178)][d(425)][i][d(1055)]=1,s=1),o[d(1162)](t,i))},unsubscribe:function(e="",t=""){const i=r;n[i(574)](i(1152)+e+i(835)+t+")");const s=o[i(856)](e);t&&e&&s&&!(t[i(1248)](s.publishID)<0)?o.wsUnsubscribe(t):n[i(1366)](i(990))},muteLocal:function(e="",t={}){const i=r;return n.logInfo(i(255)+e+i(1381)+JSON[i(1064)](t)+")"),t.hasOwnProperty("muteAudio")||t[i(326)](i(1369))?Object.values(o.StreamType)[i(1248)](e)<0?o.emitError(o[i(246)].ParamsError,i(576)):void o[i(1278)](e,t):o[i(694)](o.ErrorCode[i(1489)],"muteLocal")},muteLocalEx:function(e="",t={}){const i=r;return n[i(574)](i(426)+e+i(1381)+JSON[i(1064)](t)+")"),t[i(326)](i(1553))||t[i(326)](i(1369))?e?void o[i(557)](e,t):o[i(694)](o[i(246)][i(1489)],"muteLocalEx"):o[i(694)](o[i(246)][i(1489)],i(1545))},muteLocalScreenEx:function(e="",t={}){const i=r;return n[i(574)](i(553)+e+i(1381)+JSON[i(1064)](t)+")"),(t[i(326)](i(1553))||t.hasOwnProperty("muteVideo"))&&e?void o.muteLocalStreamEx(e,t):o[i(694)](o[i(246)][i(1489)],i(1098))},muteLocalCustom(e={}){const t=r;if(n[t(574)](t(517)+JSON.stringify(e)+")"),!e[t(326)]("muteAudio")&&!e[t(326)](t(1369)))return o[t(694)](o[t(246)][t(1489)],t(270));o[t(1278)](o[t(858)][t(1091)],e,!1,o[t(1382)][t(442)])},muteRemote:function(e="",t={}){const i=r;return n[i(574)](i(1153)+e+i(1381)+JSON[i(1064)](t)+")"),t[i(326)]("muteAudio")||t.hasOwnProperty(i(1369))?e?void o.muteRemoteStream(e,t):o.emitError(o[i(246)][i(1489)],i(1289)):o.emitError(o[i(246)][i(1489)],"muteRemote")},selectLayer:function(e="",t=0){const i=r;if(n[i(574)]("selectLayer(subscriberID:"+e+", layerIndex:"+t+")"),!e)return o[i(694)](o.ErrorCode.ParamsError,"selectLayer: no subscriberID");if(t<0)return o[i(694)](o.ErrorCode[i(1489)],i(645));let s=o.getPubIdBySubId(e),a=o.core.publishers[s];if(!a)return o.emitError(o[i(246)][i(1489)],i(1203));t>a.layers[i(532)]-1&&(t=a[i(1107)].length-1),a[i(1055)]!==t&&(a.layerIndex=t),0===t&&o[i(1408)][i(288)]&&a[i(1107)].length>1&&(t=1),a[i(1067)]=t,a[i(1055)]=t,o[i(866)](e,t)},updateInfo:function(e=[]){const t=r;if(n[t(574)]("updateInfo(streams:"+JSON[t(1064)](e)+")"),!e||0===e.length)return o[t(694)](o[t(246)][t(1489)],t(789));e.forEach((e=>{const r=t;let n=e[r(530)]?o[r(1174)](e[r(530)]):null;if(n){"object"===typeof n[r(1552)]?info=n.info:info=JSON[r(562)](n.info),e[r(1552)]!=={}&&(info.app=e[r(1552)],info.act=1);let t=[{userID:o[r(1178)][r(1096)],publishID:e[r(530)],info:JSON[r(1064)](info)}];o[r(1141)](t),n[r(1552)][r(952)]=0}}))},getAppInfo:function(e){const t=r;n[t(574)](t(454)+e+")");let i=o[t(1174)](e);return i?i[t(1552)]:{}},message:function(e="",t=null){const i=r;if(n[i(574)](i(854),t||i(1095)),!e)return o[i(694)](o[i(246)][i(1489)],"message");(!t||t instanceof Array&&0===t[i(532)])&&(t=null),o.wsMessage(e,t)},getDevices:function(e=!1){const t=r;n[t(574)](t(755)+!!e),o.getDeviceList(!!e).then()},setDevice:function(e="",t=""){const i=r;if(n[i(574)](i(333)+e+i(446)+t+")"),Object[i(834)](o.DeviceType)[i(1248)](e)<0)return o.emitError(o.ErrorCode[i(1489)],"setDevice");o[i(881)](e,t)},getDeviceInfo:function(e){const t=r;return n.logInfo("getDeviceInfo(deviceID:"+e+")"),typeof e!==t(743)?Promise[t(1377)](t(173)):o.getDeviceInfo(e)},audioReport:function(e=!0,t=250,i=null,s=!1,a){const c=r;if(n[c(574)](c(1137)+(i?i.id:"")+c(208)+e+c(393)+t+"), enableInspire: "+s+c(1447)+(typeof a===c(1075)?JSON[c(1064)](a):"")),isNaN(t))return o[c(694)](o[c(246)][c(1489)],c(1052));let d=t>200&&!s?t:200;o[c(381)](i?i[c(1303)]():null,e,d,s,a)},audioTest:function(e,t,i=200){const s=r;if(n.logInfo(s(526)+e+", has audioElement: "+!!t+s(393)+i+")"),e){if(!(t instanceof HTMLElement&&t))return o[s(694)](o[s(246)].ParamsError,"audio test audioElement error");if("number"!==typeof i)return o[s(694)](o[s(246)][s(1489)],s(656));let r=null;try{r=t[s(1303)]()}catch(e){return o[s(694)](o[s(246)].ParamsError,"audio test audioElement get stream error, "+e)}let n=i>200?i:200;o.streamAudioTest(e,r,n)}else o[s(1227)](!1)},videoReport:function(e=!0,t=1e3){const i=r;if(n[i(574)]("videoReport(enable:"+e+", interval:"+t+")"),isNaN(t))return o[i(694)](o[i(246)][i(1489)],i(1052));let s=t>500?t:500;o[i(1236)](e,s)},qosReport:function(e=!0){const t=r;n[t(574)](t(1335)+!!e+")"),o[t(1408)][t(1014)]=!!e},recordLocal:function(e=o.StreamType[r(1372)],t=!0,i=!0){const s=r;return n[s(574)](s(342),e,t),Object[s(834)](o[s(858)])[s(1248)](e)<0?o[s(694)](o[s(246)][s(1489)],s(1037)):o[s(522)](!0,e,t,"",i)},recordLocalEx:function(e,t=!0,i=!0){const s=r;return n[s(574)](s(310),e,t,i),e?o.record(!0,o.StreamType[s(1372)],t,e,i):o.emitError(o[s(246)].ParamsError,s(1130))},recordLocalScreenEx:function(e,t=!0){const i=r;return n[i(574)]("[recordLocalScreenEx]",e,t),e?o[i(522)](!0,o[i(858)][i(1091)],t,e):o[i(694)](o[i(246)].ParamsError,i(1076))},recordRemote:function(e="",t=!0,i=!0){const s=r;return n[s(574)]("[recordRemote]",e,t,i),e?o[s(522)](!1,e,t,"",i):o[s(694)](o.ErrorCode[s(1489)],s(972))},printLocal:function(e=o.StreamType[r(1372)]){const t=r;return n[t(574)](t(1435),e),Object[t(834)](o[t(858)])[t(1248)](e)<0?o.emitError(o[t(246)][t(1489)],t(719)):o.print(!0,e)},printLocalEx:function(e){const t=r;return n.logInfo(t(1302),e),e?o[t(175)](!0,o.StreamType.Camera,e):o[t(694)](o[t(246)][t(1489)],t(1194))},printLocalScreenEx:function(e){const t=r;return n[t(574)](t(1e3),e),e?o[t(175)](!0,o.StreamType[t(1091)],e):o.emitError(o[t(246)][t(1489)],t(1016))},printRemote:function(e=""){const t=r;return n.logInfo(t(164),e),e?o.print(!1,e):o.emitError(o[t(246)][t(1489)],t(719))},startMixer:function(e=0,t=null,i=0,s=!1,a=!1,c=!1,d="",u=""){const l=r;return n[l(574)](l(1206),e,t,i,s,a,c,d,u),0===e||0==(e&o[l(688)][l(1253)])&&0==(e&o[l(688)].Record)||0===i?o[l(694)](o.ErrorCode.ParamsError,l(1056)):e&o[l(688)].Live>0&&!d?o.emitError(o[l(246)][l(1489)],l(1056)):void o[l(1199)]("",o[l(734)][l(339)],i,t,e,a,s,c,d,u)},pauseMixer:function(e,t){const i=r;n.logInfo("[pauseMixer]",e,t),o[i(1199)](e,t?o[i(734)][i(235)]:o[i(734)][i(685)])},stopMixer:function(e){const t=r;n.logInfo("[stopMixer]",e),o[t(1199)](e,o[t(734)].Stop)},updateMixer:function(e,t,i){const s=r;n[s(574)](s(1286),e,t,i),o[s(1199)](e,o[s(734)].Update,i,t)},startWebPage:function(e,t,i,s,a,c,d,u,l){const p=r;n[p(574)](p(592),e,t,i,s,a,c,d,u,l),o.webPage(e,o[p(734)][p(339)],t,i,s,a,c,d,u,l)},stopWebPage:function(e){const t=r;n[t(574)](t(279),e),o[t(1543)](e,o.TaskCmd.Stop)},pauseWebPage:function(e,t){const i=r;n[i(574)]("[pauseWebPage]",e,t),o[i(1543)](e,t?o[i(734)].Pause:o.TaskCmd[i(685)])},userPlay:function(){const e=r;n[e(574)](e(346)),o[e(346)]()[e(1419)]()},recordScreen:function(e=!0){const t=r;n.logInfo(t(451)),o[t(451)](e)},checkRequirement:function(){const e=r;return n[e(574)](e(1103)),o[e(1103)]()},setVideoOption:function(e){const t=r;if(n[t(574)]("setVideoOption:"+JSON[t(1064)](e)),typeof e!==t(1075))return o[t(694)](o[t(246)][t(1489)],"setVideoOption");if(e.hasOwnProperty(t(288))){const r=!!e[t(288)];o[t(1408)][t(288)]!==r&&(o[t(1408)][t(288)]=r,1===o.core[t(180)]&&(o.wsUpdateRoom(),Object[t(1015)](o[t(1178)][t(425)]).forEach((e=>{const n=t,i=o[n(1178)][n(425)][e];i.pc&&0===i[n(r?1055:1067)]&&this[n(1368)](i.id,0)}))))}},setPublishLayer(e,t={}){const i=r;if(n[i(574)]("[setPublishRatio]",e,t),typeof t!==i(1075))return o.emitError(o[i(246)].ParamsError,i(1173));if(!(t.targetBw&&t[i(477)]&&t.width&&t[i(683)]))return o[i(694)](o.ErrorCode[i(1489)],i(1420));if(e===o.StreamType.Camera){if(1!==o[i(1408)].cameraLayers[i(532)])return o[i(694)](o[i(246)][i(1489)],i(606));o[i(716)](e,t)}else{if(!o[i(1178)].cameraEx[e])return o[i(694)](o.ErrorCode[i(1489)],"setPublishLayer, type:"+e+i(1450));if(1!==o[i(1408)][i(981)][i(532)])return o.emitError(o[i(246)][i(1489)],i(606));o[i(716)](e,t)}},getRole:function(){const e=r;return o[e(1178)][e(764)]},setRole:function(e){const t=r;if(n.logInfo(t(634)+e),typeof e!==t(1123)||typeof Object[t(834)](o[t(638)])[t(409)]((t=>t===e))===t(733))return o[t(694)](o[t(246)][t(1489)],"setRole");n.logInfo("[setRole]: "+e),o[t(703)](e)},pauseAllStreamAudio(){const e=r;n[e(574)]("pauseAllStreamAudio"),o[e(706)]()},resumeAllStreamAudio(){const e=r;n.logInfo("resumeAllStreamAudio"),o[e(527)]()},destroy(){const e=r;n.logInfo(e(303)),o[e(303)](),o=null,n=null,i=null,Object[e(1015)](this).forEach((t=>{t!==e(1409)&&delete this[t]}))},create:j,Area:o[r(757)],StreamType:o[r(858)],StreamTrack:o[r(987)],DeviceType:o.DeviceType,ErrorCode:o.ErrorCode,Role:o[r(1306)],exAPI:{selfAESDecrypt:function(e=""){return o[r(848)](e)}}}}!function(t){const r=e;!t[r(982)]&&(t[r(982)]=j())}(window);
